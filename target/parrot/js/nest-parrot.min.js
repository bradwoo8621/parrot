/** nest-parrot.V0.1.1 2015-12-29 */

!function(a){var b={console:function(){for(var b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=a.console=a.console||{};d--;){var f=c[d];e[f]||(e[f]=b)}a.console=a.console?a.console:e},string:function(){void 0===String.prototype.upperFirst&&(String.prototype.upperFirst=function(){return 1==this.length?this.toUpperCase():this.substring(0,1).toUpperCase()+this.substring(1)}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString();(void 0===b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b}),String.prototype.startsWith||(String.prototype.startsWith=function(a){return this.slice(0,a.length)===a}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),void 0===String.prototype.isEmpty&&(String.prototype.isEmpty=function(){return 0===this.length}),void 0===String.prototype.isBlank&&(String.prototype.isBlank=function(){return 0===this.trim().length}),void 0===String.prototype.format&&(String.prototype.format=function(a){return this.replace(/%(\d+)/g,function(b,c){return a[--c]})}),void 0===String.prototype.currencyFormat&&(String.prototype.currencyFormat=function(a){a=a?a:0;var b=1*this;return b.toFixed(a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}),void 0===String.prototype.padLeft&&(String.prototype.padLeft=function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d=b+d,c++;return d}),void 0===String.prototype.padRight&&(String.prototype.padRight=function(a,b){var c=0,d=this?this:"";for(b=b?b:"0",c=d.length;a>c;)d+=b,c++;return d}),void 0===String.prototype.movePointLeft&&(String.prototype.movePointLeft=function(a){var b,c,d,e,f,g;return e=".",g="",b=this?this:"",0>=a?b:(f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"","-"==c.slice(0,1)&&(c=c.slice(1),g="-"),c.length<=a&&(e="0.",c=c.padLeft(a)),g+c.slice(0,-a)+e+c.slice(-a)+d)}),void 0===String.prototype.movePointRight&&(String.prototype.movePointRight=function(a){var b,c,d,e,f,g;if(e=".",b=this?this:"",0>=a)return b;f=b.split("."),c=f[0]?f[0]:"",d=f[1]?f[1]:"",d.length<=a&&(e="",d=d.padRight(a)),"-"==c.slice(0,1)?(c=c.slice(1),g="-"):g="",0==c&&(c="");var h=(c+d.slice(0,a)).replace(/^0+/,"");return h.isEmpty()&&(h="0"),g+h+e+d.slice(a,d.length)})},number:function(){},array:function(){Array.prototype.find||(Array.prototype.find=function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b}),Array.prototype.findIndex||(Array.prototype.findIndex=function(a){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return f;return-1})}};b.console(),b.string(),b.number(),b.array()}(window),function(a){var b=a.$pt;null==b&&(b={},a.$pt=b);var c=function(a,b){this.value=a,this.message=b,this.toString=function(){return this.value+": "+this.message}};b.createComponentException=function(a,b){return new c(a,b)};var d={};b.messages=d,b.defineMessage=function(c,e){return null!=d[c]&&a.console.log("Message["+c+"="+d[c]+"] was replaced by ["+e+"]"),d[c]=e,b},b.getMessage=function(a){var b=d[a];return null==b?null:b},b.Components={},b.exposeComponents=function(c){Object.keys(b.Components).forEach(function(c){a[c]=b.Components[c]})},b.ComponentConstants={Text:"text",TextArea:"textarea",Select:"select",Check:"check",ArrayCheck:"acheck",Toggle:"toggle",Radio:"radio",Table:{type:"table",label:!1,popover:!1},Tree:{type:"tree",label:!1,popover:!1},SelectTree:"seltree",Date:"date",Search:"search",Button:{type:"button",label:!1},Tab:{type:"tab",label:!1},ArrayTab:{type:"atab",label:!1},Panel:{type:"panel",label:!1},ArrayPanel:{type:"apanel",label:!1},Label:{type:"label",label:!1},Form:{type:"form",label:!1},ButtonFooter:{type:"buttonfooter",label:!1},File:"file",Nothing:{type:"nothing",label:!1},Default_Date_Format:"YYYY/MM/DD HH:mm:ss.SSS",Err_Unsupported_Component:"PT-00001",Err_Unuspported_Column_Sort:"PT-00002",Err_Search_Text_Trigger_Digits_Not_Defined:"PT-00003",Err_Tab_Index_Out_Of_Bound:"PT-00004",Http_Status:{0:"Browser Error",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Application Exception"}},b.parseJSON=function(a){return null==a?null:"string"==typeof a?JSON.parse(a):a},function(){var a,c=navigator.userAgent||"",d=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}};a=d(c),b.browser={},a.browser&&(b.browser[a.browser]=!0,b.browser.version=a.version),b.browser.webkit&&(b.browser.safari=!0)}();var e=a;b.getService=function(a,b){var c=a?a:e,d=b?b:"$service";return c[d]||(c[d]={}),c[d]}}(window),function(a,b,c){var d=a.$pt;null==d&&(d={},a.$pt=d),d.AjaxConstants={ContentType:{POST:"application/json; charset=UTF-8",GET:"application/json; charset=UTF-8",DELETE:"application/json; charset=UTF-8",PUT:"application/json; charset=UTF-8"}};var e=function(a){var c=a.url,e=a.done,f=a.fail,g=a.quiet;return delete a.url,delete a.done,delete a.fail,g===!0||d.Components.NOnRequestModal.getOnRequestModal().show(),b.ajax(c,a).done(function(a,b,c){void 0!==e&&null!==e&&e(a,b,c)}).fail(function(a,b,c){if(void 0!==f&&null!==f){var e=null;e="function"==typeof f?f:f[""+a.status],null!=e?e(a,b,c):d.Components.NExceptionModal.getExceptionModal().show(""+a.status,a.responseText)}else d.Components.NExceptionModal.getExceptionModal().show(""+a.status,a.responseText)}).always(function(){g===!0||d.Components.NOnRequestModal.getOnRequestModal().hide()})};d.doPost=function(a,c,f){return e(b.extend({method:"POST",dataType:"json",contentType:d.AjaxConstants.ContentType.POST},f,{url:a,data:"string"==typeof c?c:JSON.stringify(c)}))},d.doPut=function(a,c,f){return e(b.extend({method:"PUT",dataType:"json",contentType:d.AjaxConstants.ContentType.PUT},f,{url:a,data:"string"==typeof c?c:JSON.stringify(c)}))},d.doGet=function(a,c,f){return f.stringify&&(c="string"==typeof c?c:JSON.stringify(c)),e(b.extend({method:"GET",dataType:"json",contentType:d.AjaxConstants.ContentType.GET},f,{url:a,data:c}))},d.doDelete=function(a,c,f){return f.stringify&&(c="string"==typeof c?c:JSON.stringify(c)),e(b.extend({method:"DELETE",dataType:"json",contentType:d.AjaxConstants.ContentType.DELETE},f,{url:a,data:c}))},d.relocatePage=function(c,d){var e=c;d&&(e+=-1!=e.indexOf("?")?"&"+b.param(d):"?"+b.param(d)),a.location=e},d.getUrlData=function(b){var d="";if(void 0!==b){if(null==b||b.isBlank())return{};d=b}else{if(d=a.location.search,null==d||d.isBlank()||"?"==d.trim())return{};d=d.substring(1)}return c(d)},d.mock=function(){b.mockjax&&b.mockjax.apply(b,arguments)};var f={context:"",urls:{}};d.routes=f,d.defineWebContext=function(a){return f.context=a,d},d.defineURL=function(b,c){return null!=f.urls[b]&&a.console.warn("URL["+b+"="+f.urls[b]+"] was replaced by ["+f.context+c+"]"),f.urls[b]=c,d},d.getURL=function(a){var b=f.urls[a];return null==b?null:f.context+b}}(window,jQuery,jQuery.deparam),function(a,b,c){var d=a.$pt;null==d&&(d={},a.$pt=d);var e=c.Class({constructor:function(a){this._otherId=a},sort:function(a){var b=this;a.sort(function(a,c){if(b._otherId){if(a.id==b._otherId)return 1;if(c.id==b._otherId)return-1}return a.text<c.text?-1:a.text>c.text?1:0})}}),f=c.Class({constructor:function(a,b,c){Array.isArray(a)?(this._local=!0,this._initArray=a):(this._local=!1,this._url=a.url,this._postData=a.data),this._renderer=b,this._sorter=c},getRenderer:function(){return this._renderer},__initCodesArray:function(a,b,c){this._codes=a,null==this._codes&&(this._codes=[]);var d={},e=function(a){b&&(a.text=b(a),a.children&&a.children.forEach(e))};if(this._codes.forEach(function(a){d[a.id]=a,e(a)}),this._map=d,c){var f=function(a){c.sort(a),a.forEach(function(a){a.children&&f(a.children)})};f(this._codes)}},__loadRemoteCodes:function(){var b=this;d.doPost(this._url,this._postData,{quiet:!0,async:!1,done:function(a){b.__initCodesArray(a,b._renderer,b._sorter),b._initialized=!0},fail:function(b,c,d){a.console.error("Status:"+c+", error:"+d)}})},__getCodes:function(){return(void 0===this._codes||this._initialized!==!0)&&(this._local?(this.__initCodesArray(this._initArray,this._renderer,this._sorter),delete this._initArray,this._initialized=!0):this.__loadRemoteCodes()),this._codes},__getMap:function(){return this.__getCodes(),this._map},filter:function(a){if("function"==typeof a)return this.__getCodes().filter(a);var c=a.value;if(!(this._local||this._loadedKeys&&-1!=this._loadedKeys.indexOf(c))){this._postData?this._postData=b.extend({},this._postData,{value:a.value}):this._postData={value:a.value};var d=null!=this._codes?this._codes:[],e=null!=this._map?this._map:{};this.__loadRemoteCodes(),this._loadedKeys||(this._loadedKeys=[]),this._loadedKeys.push(c),this._codes.push.apply(this._codes,d),this._map=b.extend(e,this._map)}return this.__getCodes().filter(function(b){return b[a.name]==c})},get:function(a){var b=this.__getMap()[a];return null==b?null:b},getText:function(a){var b=this.get(a);return null==b?null:b.text},list:function(){return this.__getCodes()},listAllChildren:function(){var a={},b=function(c){a[c.id]=c,c.children&&c.children.forEach(function(a){b(a)})};return this.list().forEach(function(a){b(a)}),a},listWithHierarchyKeys:function(a){var b=a&&a.separator?a.separator:"|",c=a&&null!=a.rootId?a.rootId:"0",d={},e=function(a,c){d[c+b+a.id]=a,a.children&&a.children.forEach(function(d){e(d,c+b+a.id)})};return this.list().forEach(function(a){e(a,c)}),d},some:function(a){return this.__getCodes().some(a)},map:function(a){return this.__getCodes().map(a)},name:function(a){return a?void(this.__name=a):this.__name}});d.createDefaultCodeTableSorter=function(a){return new e(a)},d.createCodeTable=function(a,b,c){return new f(a,b,c)}}(window,jQuery,jsface),function(a,b,c,d){var e=a.$pt;null==e&&(e={},a.$pt=e),e.BUILD_PROPERTY_VISITOR=!0,e.PROPERTY_SEPARATOR="_",e.cloneJSON=function(a){return b.extend(!0,{},a)},e.mergeObject=function(a){var c=a.deep,d=a.target?a.target:{},f=Array.isArray(a.sources)?a.sources:[a.sources];console.log(d),console.log(f);var g,h,i,j,k,l,m=0,n=f.length;for("object"==typeof d||b.isFunction(d)||(d={});n>m;m++)if(null!=(g=f[m])){console.log(g);for(h in g)console.log(h),i=d[h],j=g[h],d!==j&&(c&&j&&(b.isPlainObject(j)||(k=b.isArray(j)))?(k?(k=!1,l=[]):l=i&&b.isPlainObject(i)?i:{},d[h]=e.mergeObject({deep:c,target:l,sources:[j]})):void 0!==j&&(d[h]=j))}return d},e.getValueFromJSON=function(a,b){if(-1!=b.indexOf(e.PROPERTY_SEPARATOR)){var c=b.split(e.PROPERTY_SEPARATOR),d=a,f=null,g=c.map(function(a){return null==d?null:(f=d[a],d=f,f)});return g[g.length-1]}return a[b]},e.setValueIntoJSON=function(a,b,c){if(-1==b.indexOf(e.PROPERTY_SEPARATOR))a[b]=c;else{for(var d=b.split(e.PROPERTY_SEPARATOR),f=a,g=0,h=d.length-1;h>g;g++)null==f[d[g]]&&(f[d[g]]={}),f=f[d[g]];f[d[d.length-1]]=c}return e};var f=d.Class({constructor:function(){this.__errors={},this.__models={},this.__startKeyIndex=1},push:function(a,b){return this.__errors[this.__startKeyIndex]=b,this.__models[this.__startKeyIndex]=a,this.__startKeyIndex++,this},remove:function(a){var b=this;return Object.keys(this.__models).forEach(function(c){var d=b.__models[c];d==a&&(delete b.__models[c],delete b.__errors[c])}),this},hasError:function(){return 0!==Object.keys(this.__models).length},getError:function(a){for(var b=Object.keys(this.__models),c=0,d=b.length;d>c;c++){var e=this.__models[b[c]];if(e==a)return this.__errors[b[c]]}return null}});e.createTableValidationResult=function(){return new f},e.defineMessage("validate.required",'"%1" is Required.'),e.defineMessage("validate.length",'Length of "%1" should be %2.'),e.defineMessage("validate.length.max",'Length of "%1" cannot be more than %2.'),e.defineMessage("validate.length.min",'Length of "%1" cannot be less than %2.'),e.defineMessage("validate.size.max",'Size of "%1" cannot be more than %2.'),e.defineMessage("validate.size.min",'Size of "%1" cannot be less than %2.'),e.defineMessage("validate.date.before",'Value of "%1" must be before than %2.'),e.defineMessage("validate.date.after",'Value of "%1" must be after than %2.'),e.ValidateRules={required:function(a,b,c){return c===!1?!0:null==b||b.toString().isEmpty()?e.getMessage("validate.required"):!0},length:function(a,b,c){return null==b||0==b.length?!0:b.length!=c?e.getMessage("validate.length").format(["%1",""+c]):void 0},maxlength:function(a,b,c){return null==b||0==b.length?!0:b.length>c?e.getMessage("validate.length.max").format(["%1",""+c]):void 0},minlength:function(a,b,c){return null==b||0==b.length?!0:b.length<c?e.getMessage("validate.length.min").format(["%1",""+c]):void 0},maxsize:function(a,b,c){return null==b||0==b.length?!0:b.length>c?e.getMessage("validate.size.max").format(["%1",""+c]):void 0},minsize:function(a,b,c){return null==b||b.length<c?e.getMessage("validate.size.min").format(["%1",""+c]):!0},before:function(a,b,c){return e.ValidateRules.__dateCompare(b,a,c,e.ValidateRules.__beforeSpecial)},__beforeSpecial:function(a,b,c,d,f){var g=e.ValidateRules.__convertToMomentValue(c,b,d);return null!==g&&a.unix()>g.unix()?"string"==typeof c?e.getMessage("validate.date.before").format(["%1",f?f:c]):e.getMessage("validate.date.before").format(["%1",g.format(d)]):!0},after:function(a,b,c){return e.ValidateRules.__dateCompare(b,a,c,e.ValidateRules.__afterSpecial)},__afterSpecial:function(a,b,c,d,f){var g=e.ValidateRules.__convertToMomentValue(c,b,d);return null!==g&&a.unix()<g.unix()?"string"==typeof c?e.getMessage("validate.date.after").format(["%1",f?f:c]):e.getMessage("validate.date.after").format(["%1",g.format(d)]):!0},__convertToMomentValue:function(a,b,d){var e=null;return"now"===a?e=c():void 0!==a.unix?e=a:"function"==typeof a?e=a():void 0!==b.get(a)?null!==b.get(a)&&(e=c(b.get(a),d)):e=c(a,d),e},__dateCompare:function(a,b,d,f){if(null==a)return!0;var g="string"==typeof d.format?d.format:e.ComponentConstants.Default_Date_Format,h=d.rule?d.rule:d,i=d.rule?d.label:null,j=c(a,g),k=[];if(Array.isArray(h))for(var l=0,m=h.length;m>l;l++){var n=h[l],o=i?i[l]:null;k.push(f(j,b,n,g,o))}else k.push(f(j,b,h,g,i));var p=k.filter(function(a){return a!==!0});return 0===p.length?!0:1==p.length?p[0]:p},table:function(a,b,c){if(null==b||0==b.length)return!0;for(var d=e.createTableValidationResult(),f=e.createModelValidator(c),g=0,h=b.length;h>g;g++){var i=b[g],j=e.createModel(i,f);j.validate();var k=j.getError();0!==Object.keys(k).length?d.push(i,k):d.remove(i)}return d.hasError()?d:!0}};var g=d.Class({constructor:function(a,c){Array.isArray(a)?(this.__validator={},b.extend.apply(b,[!0,this.__validator].concat(a))):this.__validator=a,this.__rules=c,void 0===this.__rules?this.__rules=e.ValidateRules:this.__rules=b.extend(!0,e.ValidateRules,c)},getConfig:function(a){return a?this.__validator[a]:this.__validator},getRule:function(a){return this.__rules[a]},_validateByPhase:function(a,b,c,d,e){var f=null;if("function"==typeof e)f=e.call(this,a,b,d);else{if(Array.isArray(e)){var g=this,h=e.map(function(e){return g._validateByPhase(a,b,c,d,e)}),i=[];return h.forEach(function(a){null!=a&&(Array.isArray(a)?a.forEach(function(a){i.push(a)}):i.push(a))}),i}var j=e,k=!0;if(null!=d&&e._phase)if(j=e.rule,Array.isArray(e._phase)){var l=e._phase.some(function(a){return a==d});l||(k=!1)}else e._phase!=d&&(k=!1);if(e._when){j=e.rule;var m=e._when.call(this,a);m||(k=!1)}k&&(f="function"==typeof j?j.call(this,a,b,d):this.getRule(c).call(this,a,b,j))}return f},validateByPhase:function(a,b,c){var d=this,e=null;if(c){var f=this.getConfig(c);if(null==f)return!0;e=Object.keys(f).map(function(e){var g=f[e],h=a.get(c),i=d._validateByPhase(a,h,e,b,g);return null!=i&&i!==!0?i:null});var g=[];return e.forEach(function(a){null!=a&&(Array.isArray(a)?a.forEach(function(a){g.push(a)}):g.push(a))}),0===g.length?!0:g}return e={},Object.keys(this.getConfig()).forEach(function(c){var f=d.validateByPhase(a,b,c);f!==!0&&(e[c]=f)}),e},validate:function(a,b){return this.validateByPhase(a,null,b)},isRequired:function(a){var b=this.getConfig(a);return null==b?!1:null!=b.required&&b.required===!0}});e.createModelValidator=function(a,b){return new g(a,b)};var h={constructor:function(a,b){this.__base=a,this.__model=e.cloneJSON(a),this.__validator=b,this.__validateResults={},this.__changed=!1},name:function(a){return a?(this.__name=a,this):this.__name},parent:function(a){return void 0!==a?(this.__parent=a,this):this.__parent},isChanged:function(){return this.__changed},getOriginalModel:function(){return this.__base},getCurrentModel:function(){return this.__model},useBaseAsCurrent:function(){return this.__model=this.__base,this},mergeCurrentModel:function(a){return this.__model=e.mergeObject({deep:!0,target:this.__model,sources:a}),this},applyCurrentToBase:function(){return this.__base=b.extend(!0,{},this.__model),this},getValidator:function(){return this.__validator},get:function(a){return e.getValueFromJSON(this.__model,a)},set:function(a,b){var c=this.get(a);if(c!=b)return e.setValueIntoJSON(this.__model,a,b),this.__changed=!0,this.fireEvent({model:this,id:a,old:c,"new":b,time:"post",type:"change"}),this},addListener:function(a,b,c,d){return a||(a="--all"),a instanceof RegExp?this.__addRegExpListener(a,b,c,d):this.__addListener(a,b,c,d)},__addRegExpListener:function(a,b,c,d){void 0===this.__regExpListeners&&(this.__regExpListeners={});var e=b+"-"+c,f=this.__regExpListeners[e];void 0===f&&(f=[],this.__regExpListeners[e]=f);var g=f.findIndex(function(b){return b.listener===d&&b.regexp.toString()==a.toString()});return-1==g&&f.push({regexp:a,listener:d}),this},__addListener:function(a,b,c,d){void 0===this.__listeners&&(this.__listeners={});var e=a+"-"+b+"-"+c,f=this.__listeners[e];void 0===f&&(f=[],this.__listeners[e]=f);var g=f.findIndex(function(a){return a===d});return-1==g&&f.push(d),this},addPostChangeListener:function(a,b){return this.addListener(a,"post","change",b)},addPostAddListener:function(a,b){return this.addListener(a,"post","add",b)},addPostRemoveListener:function(a,b){return this.addListener(a,"post","remove",b)},addPostValidateListener:function(a,b){return this.addListener(a,"post","validate",b)},removeListener:function(a,b,c,d){return a||(a="--all"),a instanceof RegExp?this.__removeRegExpListener(a,b,c,d):this.__removeListener(a,b,c,d)},__removeRegExpListener:function(a,b,c,d){if(void 0!==this.__regExpListeners){var e=this.__regExpListeners[b+"-"+c];if(null!=e){var f=e.findIndex(function(b){return b.listener===d&&b.regexp.toString()==a.toString()});-1!=f&&e.splice(f,1)}}return this},__removeListener:function(a,b,c,d){if(void 0!==this.__listeners){var e=this.__listeners[a+"-"+b+"-"+c];if(null!=e){var f=e.findIndex(function(a){return a===d});-1!=f&&e.splice(f,1)}}return this},removePostChangeListener:function(a,b){return this.removeListener(a,"post","change",b)},removePostAddListener:function(a,b){return this.removeListener(a,"post","add",b)},removePostRemoveListener:function(a,b){return this.removeListener(a,"post","remove",b)},removePostValidateListener:function(a,b){return this.removeListener(a,"post","validate",b)},fireEvent:function(a){var b=[],c=a.id+"-"+a.time+"-"+a.type,d=this.__listeners?this.__listeners[c]:null;null!=d&&0!=d.length&&b.push.apply(b,d),c="--all-"+a.time+"-"+a.type,d=this.__listeners?this.__listeners[c]:null,null!=d&&0!=d.length&&b.push.apply(b,d),c=a.time+"-"+a.type,d=this.__regExpListeners?this.__regExpListeners[c]:null,null!=d&&0!=d.length&&d.forEach(function(c){a.id.match(c.regexp)&&b.push.apply(b,[c.listener])});var e=this;return b.forEach(function(b){b.call(e,a)}),this},firePostChangeEvent:function(a,b,c){return this.fireEvent({model:this,id:a,old:b,"new":c?c:this.get(a),time:"post",type:"change"})},firePostAddEvent:function(a,b){var c=this.get(a);return this.fireEvent({model:this,id:a,array:c,index:b,old:null,"new":c[b],type:"add",time:"post"})},firePostRemoveEvent:function(a,b,c){return this.fireEvent({model:this,id:a,array:this.get(a),index:c,old:b,"new":null,type:"remove",time:"post"})},firePostValidateEvent:function(a){return this.fireEvent({model:this,id:a,time:"post",type:"validate"})},reset:function(){return this.__model=e.cloneJSON(this.__base),this.__validateResults={},this.__changed=!1,this},clearValidateResults:function(a){return a?delete this.__validateResults[a]:this.__validateResults={},this},validateByPhase:function(a,b){var c=this.getValidator();if(void 0===c||null===c)return this;if(b){var d=c.validateByPhase(this,a,b);d!==!0?this.__validateResults[b]=d:delete this.__validateResults[b],this.fireEvent({model:this,id:b,time:"post",type:"validate"})}else{this.__validateResults=c.validateByPhase(this,a);var e=this;Object.keys(this.getCurrentModel()).forEach(function(a){e.fireEvent({model:this,id:a,time:"post",type:"validate"})})}return this},validate:function(a){return this.validateByPhase(null,a)},isRequired:function(a){var b=this.getValidator();return null!=b&&b.isRequired(a)},getError:function(a){return a?this.__validateResults[a]:this.__validateResults},hasError:function(a){return a?null!=this.__validateResults[a]:0!=Object.keys(this.__validateResults).length},mergeError:function(a,b){return b?a?this.__validateResults[b]=a:delete this.__validateResults[b]:this.__validateResults=a?a:{},this},remove:function(a,b){var c=this.get(a);if(null==c||0==c.length)return this;var d=c.findIndex(function(a){return a===b});return-1!=d&&(c.splice(d,1),this.__changed=!0,this.fireEvent({model:this,id:a,array:c,index:d,old:b,"new":null,type:"remove",time:"post"})),this},add:function(a,b,c){var d=this.get(a);null==d&&(d=[],this.__model[a]=d);var e=d.findIndex(function(a){return a===b});return-1==e&&(null==c?(d.push(b),c=d.length-1):(c>=d.length&&(c=d.length),d.splice(c,0,b)),this.__changed=!0,this.fireEvent({model:this,id:a,array:d,index:c,old:null,"new":b,type:"add",time:"post"})),this},update:function(a,b,c){var d=this.get(a);if(null==d)return this;var e=d.findIndex(function(a){return a===b});return-1!=e&&(d.splice(e,1,c),this.__changed=!0,this.fireEvent({model:this,id:a,array:d,index:e,old:b,"new":c,type:"change",time:"post"})),this}};e.createModel=function(a,c){var f=null;Array.isArray(a)?(f={},b.extend.apply(b,[!0,f].concat(a))):f=null==a?{}:a;var g={};e.BUILD_PROPERTY_VISITOR&&Object.keys(f).forEach(function(a){var b=a.upperFirst();g["get"+b]=function(){return this.get(a)},g["set"+b]=function(b){this.set(a,b)}});var i=d.Class(b.extend(g,h));return new i(f,c)}}(window,jQuery,moment,jsface),function(a,b,c,d){var e=a.$pt;null==e&&(e={},a.$pt=e);var f=c.Class({$static:{DEFAULT_POSITION:{},DEFAULT_ROW:9999,DEFAULT_COLUMN:9999,DEFAULT_WIDTH:3,DEFAULT_COMPONENT:{type:e.ComponentConstants.Text}},constructor:function(a,c){this.__id=a,c.base&&(c=b.extend({},c.base,c)),this.__dataId=c.dataId?c.dataId:this.__id,this.__cell=c},getId:function(){return this.__id},getDataId:function(){return this.__dataId},getPosition:function(){return this.__cell.pos?this.__cell.pos:f.DEFAULT_POSITION},getRowIndex:function(){var a=this.getPosition().row;return null==a?f.DEFAULT_ROW:a},getColumnIndex:function(){var a=this.getPosition().col;return null==a?f.DEFAULT_COLUMN:a},getWidth:function(){var a=this.getPosition().width;return null==a?f.DEFAULT_WIDTH:a},getSection:function(){var a=this.getPosition().section;return null!=a?a:h.DEFAULT_KEY},getCard:function(){var a=this.getPosition().card;return null!=a?a:i.DEFAULT_KEY},getComponentType:function(){var a=this.getComponentOption("type");return a=null==a?e.ComponentConstants.Text:a,"string"==typeof a?{type:a,label:!0,popover:!0}:a},getComponentOption:function(a,b){if(a){if(void 0===b&&(b=null),this.__cell.comp){var c=this.__cell.comp[a];return void 0===c?b:c}return b}return this.__cell.comp?this.__cell.comp:{}},getLabel:function(){return this.__cell.label},getLabelCSS:function(a){return this.getAdditionalCSS("label",a)},getCellCSS:function(a){return this.getAdditionalCSS("cell",a)},getComponentCSS:function(a){return this.getAdditionalCSS("comp",a)},isAdditionalCSSDefined:function(a){return a?null!=this.__cell.css&&null!=this.__cell.css[a]:null!=this.__cell.css},getAdditionalCSS:function(a,b){if(a){var c=this.isAdditionalCSSDefined(a)?this.__cell.css[a]:"",d=c?c.split(" "):[],f={};return d.forEach(function(a){a&&!a.isBlank()&&(f[a.trim()]=!0)}),null==b||b.isBlank()||(f[b.trim()]=!0),e.LayoutHelper.classSet(f)}return this.isAdditionalCSSDefined()?this.__cell.css:{}},getEventMonitor:function(a){return a?this.__cell&&this.__cell.evt?this.__cell.evt[a]:null:this.__cell.evt?this.__cell.evt:{}}});e.createCellLayout=function(a,b){return new f(a,b)};var g=c.Class({constructor:function(a){this.__rowIndex=a},getRowIndex:function(){return this.__rowIndex},addCell:function(a){void 0===this.__cells&&(this.__cells=[]);var b=this.__cells.findIndex(function(b){return b.getId()==a.getId()});return-1==b?this.__cells.push(a):this.__cells.splice(b,1,a),this.__cells.sort(function(a,b){return a.getColumnIndex()-b.getColumnIndex()}),this},getCells:function(){return this.__cells}});e.createRowLayout=function(a,b){var c=new g(a);return b&&(Array.isArray(b)?b.forEach(function(a){c.addCell(a)}):c.addCell(b)),c};var h=c.Class({$static:{DEFAULT_KEY:"_defaultSection",DEFAULT_ROW_INDEX:9999,DEFAULT_COLUMN_INDEX:9999,DEFAULT_WIDTH:12},constructor:function(a,b,c){this.__layout={};var d=this;null==a&&(a={}),Object.keys(a).forEach(function(b){"layout"!=b&&(d.__layout[b]=a[b])}),this.__id=b,this.__parent=c,this.__all={},this.__rows={};var e=a.layout;e&&Object.keys(e).forEach(function(a){e[a].getCellCSS?d.addCell(e[a]):d.addCell(new f(a,e[a]))})},hasCell:function(){return 0!=Object.keys(this.__all).length},addCell:function(a){this.__all[a.getId()]=a;var b=a.getRowIndex(),c=this.__rows[b];return void 0===c&&(c=e.createRowLayout(b),this.__rows[b]=c),c.addCell(a),this.__sortRows(),this},__sortRows:function(){this.__rowsArray=[];var a=this.__rowsArray,b=this.__rows;Object.keys(b).forEach(function(c){a.push(b[c])}),a.sort(function(a,b){return a.getRowIndex()-b.getRowIndex()})},getRowIndex:function(){return null==this.__layout||null==this.__layout.row?h.DEFAULT_ROW_INDEX:this.__layout.row},getColumnIndex:function(){return null==this.__layout||null==this.__layout.col?h.DEFAULT_COLUMN_INDEX:this.__layout.col},getWidth:function(){return null==this.__layout||null==this.__layout.width?h.DEFAULT_WIDTH:this.__layout.width},getStyle:function(){return null==this.__layout||null==this.__layout.style?"default":this.__layout.style},getCSS:function(){return null==this.__layout||null==this.__layout.css?null:this.__layout.css},getLabel:function(){return null==this.__layout||null==this.__layout.label?null:this.__layout.label},isCollapsible:function(){return null==this.__layout||null==this.__layout.collapsible?!1:this.__layout.collapsible===!0},getCollapsedLabel:function(){return null==this.__layout||null==this.__layout.collapsedLabel?!1:this.__layout.collapsedLabel},isExpanded:function(){return null==this.__layout||null==this.__layout.expanded?!0:this.__layout.expanded!==!1},getExpandedLabel:function(){return null==this.__layout||null==this.__layout.expandedLabel?null:this.__layout.expandedLabel},hasCheckInTitle:function(){return this.__layout&&null!=this.__layout.checkInTitle},getCheckInTitleValue:function(a){var b=this.getCheckInTitleDataId();return b?a.get(b):null},getCheckInTitleDataId:function(){if(!this.hasCheckInTitle())return null;var a=this.__layout.checkInTitle;return a?a.data:null},getCheckInTitleLabel:function(){if(!this.hasCheckInTitle())return null;var a=this.__layout.checkInTitle;return a?a.label:null},getCheckInTitleCollapsible:function(){if(!this.hasCheckInTitle())return null;var a=this.__layout.checkInTitle;return a?a.collapsible:null},getCheckInTitleOption:function(){if(!this.hasCheckInTitle())return null;var a=b.extend({},this.__layout.checkInTitle);return delete a.collapsible,delete a.label,delete a.data,a},getVisible:function(){return this.__layout.visible},getId:function(){return this.__id},getRows:function(){return this.__rowsArray},getCell:function(a){return this.__all[a]},getCells:function(){return this.__all},getParentCard:function(){return this.__parent}});e.createSectionLayout=function(a,b,c){return new h(a,b,c)};var i=c.Class({$static:{DEFAULT_KEY:"_defaultCard",DEFAULT_CARD_INDEX:9999},constructor:function(a,c){var d=this;this.__layout=b.extend({},a),this.__id=c,this.__all={},this.__sections={},this.__layout._sections&&Object.keys(this.__layout._sections).forEach(function(a){var c=e.createSectionLayout(d.__layout._sections[a],a,d);c.hasCell()&&(d.__sections[a]=c,b.extend(d.__all,c.getCells()),d.__sortSections())})},hasCell:function(){return 0!=Object.keys(this.__all).length},addCell:function(a){this.__all[a.getId()]=a;var b=a.getSection(),c=this.__sections[b];if(null==c){var d=this.__layout._sections?this.__layout._sections[b]:null;c=e.createSectionLayout(d,b,this),this.__sections[b]=c}return c.addCell(a),this.__sortSections(),this},__sortSections:function(){this.__sectionsArray=[];var a=this.__sectionsArray,b=this.__sections;Object.keys(b).forEach(function(c){a.push(b[c])}),a.sort(function(a,b){var c=a.getRowIndex(),d=b.getRowIndex();return c==d?a.getColumnIndex()-b.getColumnIndex():c-d})},getIndex:function(){return null==this.__layout.index?i.DEFAULT_CARD_INDEX:this.__layout.index},getLabel:function(){return this.__layout.label},getIcon:function(){return this.__layout.icon},hasBadge:function(){return null!=this.__layout.badge},getBadgeId:function(){return this.__layout.badge},getBadgeRender:function(){return this.__layout.badgeRender},getId:function(){return this.__id},isActive:function(){return this.__layout.active===!0},setActive:function(a){return this.__layout.active=a,this},isBackable:function(){return this.__layout.backable!==!1},getRightButtons:function(){return this.__layout.rightButtons?this.__layout.rightButtons:[]},getLeftButtons:function(){return this.__layout.leftButtons?this.__layout.leftButtons:[]},getFinishButton:function(){return this.__layout.finishButton},getSections:function(){return this.__sectionsArray},getCells:function(){return this.__all},getCell:function(a){return this.__all[a]}});e.createCardLayout=function(a,b){return new i(a,b)};var j=c.Class({constructor:function(a){this.__all={};var b=this.__mergeLayouts(a),c=this.__createDefaultCard(b);delete b._cards,delete b._freeCard,delete b._cardButtonShown,delete b._sections;var d=this.__readCells(b,c,this.__all);this.__sortCards(d)},__mergeLayouts:function(a){return 1==a.length?b.extend(!0,{},a[0]):b.extend.apply(b,[].concat(!0,{},a))},__createDefaultCard:function(a){var b=a._cards;return this.__freeCard=a._freeCard,this.__cardButtonShown=a._cardButtonShown,null==b&&(b={},b[i.DEFAULT_KEY]={_sections:{}},null==a._sections?b[i.DEFAULT_KEY]._sections[h.DEFAULT_KEY]={}:b[i.DEFAULT_KEY]._sections=a._sections),b},__readCells:function(a,c,d){var e={};return Object.keys(c).forEach(function(a){var f=new i(c[a],a);f.hasCell()&&(e[a]=f,
b.extend(d,f.getCells()))}),Object.keys(a).forEach(function(b){var g=new f(b,a[b]);d[g.getId()]=g;var h=g.getCard(),j=e[h];if(null==j){var k=c[h];j=new i(k,h),e[h]=j}j.addCell(g)}),e},__sortCards:function(a){this.__cardsArray=[];var b=this.__cardsArray;Object.keys(a).forEach(function(c){b.push(a[c])}),this.__cardsArray.sort(function(a,b){return a.getIndex()-b.getIndex()})},getCards:function(){return this.__cardsArray},isFreeCard:function(){return this.__freeCard===!0},isCardButtonShown:function(){return this.__cardButtonShown!==!1},getCell:function(a){return this.__all[a]},getCells:function(){return this.__all}});e.createFormLayout=function(a){return new j(Array.prototype.slice.call(arguments))};var k=c.Class({constructor:function(a){this.__columns=a.slice(0)},columns:function(){return this.__columns},get:function(a){return this.__columns[a]},push:function(a){this.__columns.push(a)},splice:function(a,b,c){this.__columns.splice(a,b,c)},map:function(a){return this.__columns.map(a)},forEach:function(a){this.__columns.forEach(a)},length:function(){return this.__columns.length},some:function(a){return this.__columns.some(a)}});e.createTableColumnLayout=function(a){return new k(a)};var l={getModel:function(){return this.useFormModel()?this.getFormModel():this.getInnerModel()},useFormModel:function(){return this.getComponentOption("useFormModel")===!0},getFormModel:function(){return this.props.model},getInnerModel:function(){var a=this.getComponentOption("model");return a?a:this.getFormModel()},getValueFromModel:function(){return this.getModel().get(this.getDataId())},setValueToModel:function(a){this.getModel().set(this.getDataId(),a)},getLayout:function(){return this.props.layout},isViewMode:function(){return this.props.view===!0},renderInViewMode:function(){var a=e.LayoutHelper.getComponentViewModeRenderer(this.getLayout().getComponentType());if(a)return a.call(this,this.getModel(),this.getLayout(),this.props.direction,!0);var c=null;c=this.getTextInViewMode?this.getTextInViewMode():this.getValueFromModel();var f=e.createCellLayout(this.getId(),b.extend(!0,{},{comp:this.getComponentOption()},{label:c,dataId:this.getDataId(),comp:{type:e.ComponentConstants.Label,textFromModel:!1}})),g=e.LayoutHelper.transformParameters(this.getModel(),f,this.props.direction,!0);return g.ref="viewLabel",d.createElement(e.Components.NLabel,g)},getId:function(){return this.getLayout().getId()},getDataId:function(){return this.getLayout().getDataId()},getComponentCSS:function(a){return this.getLayout().getComponentCSS(a)},getAdditionalCSS:function(a,b){return this.getLayout().getAdditionalCSS(a,b)},getComponentOption:function(a,b){var c=this.getLayout().getComponentOption(a,b);return null==c&&null!=this.props.defaultOptions&&(c=this.props.defaultOptions[a]),void 0===c?null:c},getComponentCentralId:function(){return this.getComponentOption("centralId")},registerToComponentCentral:function(){var a=this.getComponentCentralId();a&&e.LayoutHelper.registerComponent(a,this)},unregisterFromComponentCentral:function(){var a=this.getComponentCentralId();a&&e.LayoutHelper.unregisterComponent(a,this)},getEventMonitor:function(a){return this.getLayout().getEventMonitor(a)},notifyEvent:function(a){var b=a.type,c=this.getEventMonitor(b);c&&c.call(this,a)},getComponentRuleValue:function(a,b){return this.getRuleValue(this.getComponentOption(a),b)},getRuleValue:function(a,b,c){return null===a?b:a===!0||a===!1?a:a.when.call(this,c?c:this.getModel(),this.getValueFromModel())},getComponentRuleDependencies:function(a){return this.getRuleDependencies(this.getComponentOption(a))},getRuleDependencies:function(a){return null===a||void 0===a.depends||null===a.depends?[]:Array.isArray(a.depends)?a.depends:[a.depends]},isEnabled:function(){return this.isViewMode()?!0:this.getComponentRuleValue("enabled",!0)},isVisible:function(){return this.getComponentRuleValue("visible",!0)},getDependencies:function(a){var b=[];Array.isArray(a)||(a=[a]);var c=this;return a.forEach(function(a){b.push.apply(b,c.getComponentRuleDependencies(a))}),b},addVisibleDependencyMonitor:function(){this.addDependencyMonitor(this.getDependencies("visible"))},addEnableDependencyMonitor:function(){this.addDependencyMonitor(this.getDependencies("enabled"))},removeVisibleDependencyMonitor:function(){this.removeDependencyMonitor(this.getDependencies("visible"))},removeEnableDependencyMonitor:function(){this.removeDependencyMonitor(this.getDependencies("enabled"))},__forceUpdate:function(){this.forceUpdate()},renderNormalLine:function(){var a={disabled:!this.isEnabled()};return a[this.getAdditionalCSS("normal-line","normal-line")]=!0,d.createElement("hr",{className:e.LayoutHelper.classSet(a),ref:"normalLine"})},renderFocusLine:function(){return d.createElement("hr",{className:this.getAdditionalCSS("focus-line","focus-line"),ref:"focusLine"})},addDependencyMonitor:function(a,b,c){b=null==b?this.__forceUpdate:b;var d=this;return c?a.forEach(function(a){c.addPostChangeListener(a,b)}):a.forEach(function(a){if("object"==typeof a){var c=a.id;"form"===a.on?d.getFormModel().addPostChangeListener(c,b):"inner"===a.on?d.getInnerModel().addPostChangeListener(c,b):d.getModel().addPostChangeListener(c,b)}else d.getModel().addPostChangeListener(a,b)}),this},removeDependencyMonitor:function(a,b,c){b=null==b?this.__forceUpdate:b;var d=this;return c?a.forEach(function(a){c.removePostChangeListener(a,b)}):a.forEach(function(a){if("object"==typeof a){var c=a.id;"form"===a.on?d.getFormModel().removePostChangeListener(c,b):"inner"===a.on?d.getInnerModel().removePostChangeListener(c,b):d.getModel().removePostChangeListener(c,b)}else d.getModel().removePostChangeListener(a,b)}),this},addPostChangeListener:function(a){this.getModel().addPostChangeListener(this.getDataId(),a)},removePostChangeListener:function(a){this.getModel().removePostChangeListener(this.getDataId(),a)},addPostAddListener:function(a){this.getModel().addPostAddListener(this.getDataId(),a)},removePostAddListener:function(a){this.getModel().removePostAddListener(this.getDataId(),a)},addPostRemoveListener:function(a){this.getModel().addPostRemoveListener(this.getDataId(),a)},removePostRemoveListener:function(a){this.getModel().removePostRemoveListener(this.getDataId(),a)},addPostValidateListener:function(a){this.getModel().addPostValidateListener(this.getDataId(),a)},removePostValidateListener:function(a){this.getModel().removePostValidateListener(this.getDataId(),a)}};e.defineCellComponent=function(a){return b.extend({},l,a)};var m=c.Class({constructor:function(){this.__comp={},this.__components={}},classSet:function(a){return"object"==typeof a?Object.keys(a).filter(function(b){return a[b]}).join(" "):Array.prototype.join.call(arguments," ")},setDefaultCellWidth:function(a){f.DEFAULT_WIDTH=1*a},setDefaultSectionWidth:function(a){h.DEFAULT_WIDTH=1*a},registerComponent:function(a,b){if(this.__comp[a]){var c=this.__comp[a];if(Array.isArray(c)){var d=c.find(function(a){return a===b});d||c.push(b)}else c!==b&&(this.__comp[a]=[c,b])}else this.__comp[a]=b;return this},unregisterComponent:function(a,b){if(b)delete this.__comp[a];else{var c=this.__comp[a];if(c)if(Array.isArray(c)){var d=c.findIndex(function(a){return a===b});-1!=d&&c.splice(d,1)}else c===b&&delete this.__comp[a]}return this},getComponent:function(a){return this.__comp[a]},__forceUpdate:function(a){return a.forceUpdate&&a.forceUpdate(),this},forceUpdate:function(a){var b=this.getComponent(a);return b&&(Array.isArray(b)?b.forEach(this.__forceUpdate):this.__forceUpdate(b)),this},registerComponentRenderer:function(b,c){"string"!=typeof b&&(b=b.type),this.__components[b]&&a.console.warn("Component ["+b+"] is replaced."),this.__components[b]=c},getComponentRenderer:function(a){if("string"!=typeof a&&(a=a.type),this.__components[a])return this.__components[a];throw e.createComponentException(e.ComponentConstants.Err_Unsupported_Component,"Component type ["+a+"] is not supported yet.")},registerComponentViewModeRenderer:function(b,c){"string"!=typeof b&&(b=b.type),b+="@view",this.__components[b]&&a.console.warn("Component ["+b+"] is replaced."),this.__components[b]=c},getComponentViewModeRenderer:function(a){return"string"!=typeof a&&(a=a.type),a+="@view",this.__components[a]?this.__components[a]:null},transformParameters:function(a,b,c,d){return{model:a,layout:b,direction:c,view:d,ref:b.getId()}}});e.LayoutHelper=new m,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Nothing,function(){return null})}(window,jQuery,jsface,React),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NArrayCheck",statics:{},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{direction:"horizontal",labelAttached:"right"}}},getInitialState:function(){return{}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderItem:function(a,b,d){var f=e.createModel({id:b.id,checked:this.isCodeChecked(b)}),g=e.createCellLayout("checked",{label:b.text,comp:{labelAttached:this.getComponentOption("labelAttached"),enabled:a}});return f.addPostChangeListener("checked",this.onCodeItemCheckedChanged.bind(this,b)),c.createElement(e.Components.NCheck,{model:f,layout:g,key:d})},render:function(){var a=this.isEnabled(),b={"n-disabled":!a,vertical:"vertical"===this.getComponentOption("direction")};return b[this.getComponentCSS("n-array-check")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(b)},this.getCodeTable().list().map(this.renderItem.bind(this,a)))},onModelChanged:function(){this.forceUpdate()},onCodeItemCheckedChanged:function(a,b){b["new"]?this.onCodeItemChecked(a):this.onCodeTableUnchecked(a)},onCodeTableUnchecked:function(a){var b=this.getValueFromModel();null!=b&&this.setValueToModel(b.filter(function(b){return b!=a.id}).slice(0))},onCodeItemChecked:function(a){var b=this.getValueFromModel();if(null==b)b=[a.id];else{var c=b.findIndex(function(b){return b==a.id});-1==c&&b.push(a.id)}this.setValueToModel(b.slice(0))},getCodeTable:function(){return this.getComponentOption("data")},isCodeChecked:function(a){var b=this.getValueFromModel();return null!=b&&b.some(function(b){return b==a.id})}}));e.Components.NArrayCheck=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.ArrayCheck,function(a,b,d,f){return c.createElement(e.Components.NArrayCheck,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NArrayPanel",statics:{UNTITLED:"Untitled Item"},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"])},getDefaultProps:function(){return{defaultOptions:{collapsible:!0,expanded:!0}}},getInitialState:function(){return{}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removePostAddListener(this.onModelChanged),this.removePostRemoveListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addPostAddListener(this.onModelChanged),this.addPostRemoveListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addPostAddListener(this.onModelChanged),this.addPostRemoveListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removePostAddListener(this.onModelChanged),this.removePostRemoveListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.unregisterFromComponentCentral()},renderItem:function(a,b){var d=this.getModel(),f=d.getValidator(),g=null;if(f){var h=f.getConfig()[this.getDataId()];h&&h.table&&(g=e.createModelValidator(h.table))}var i=g?e.createModel(a,g):e.createModel(a);i.useBaseAsCurrent(),i.parent(d);var j=this.getModel().getError(this.getDataId());if(j)for(var k=null,l=0,m=j.length;m>l;l++)"string"!=typeof j[l]&&(k=j[l].getError(a),i.mergeError(k));var n=this;this.getDependencies("itemTitle").forEach(function(a){i.addListener(a,"post","change",function(){n.forceUpdate()})});var o={label:this.getPanelTitle(i),comp:{type:e.ComponentConstants.Panel,collapsible:this.getComponentOption("collapsible"),expanded:this.getComponentOption("expanded"),editLayout:this.getEditLayout(i),style:this.getComponentOption("style"),checkInTitle:this.getCheckInTitle(i),expandedLabel:this.getComponentOption("expandedLabel"),collapsedLabel:this.getComponentOption("collapsedLabel")}};return c.createElement("div",{className:"row",key:b},c.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},c.createElement(e.Components.NPanel,{model:i,layout:e.createCellLayout("pseudo-panel",o),direction:this.props.direction,view:this.isViewMode()})))},render:function(){return c.createElement("div",{className:this.getComponentCSS("n-array-panel")},this.getValueFromModel().map(this.renderItem))},getValueFromModel:function(){var a=this.getModel().get(this.getDataId());return null==a?[]:a},onModelChanged:function(a){this.forceUpdate()},onModelValidateChanged:function(a){this.forceUpdate()},getEditLayout:function(a){var b=this.getComponentOption("editLayout");return"function"==typeof b?b.call(this,a):b},getCheckInTitle:function(a){var b=this.getComponentOption("checkInTitle");return"function"==typeof b?b.call(this,a):b},getPanelTitle:function(a){var b=this.getComponentOption("itemTitle");if(null==b)return f.UNTITLED;if("string"==typeof b)return b;var c=b.when.call(this,a);return null==c||c.isBlank()?f.UNTITLED:c}}));e.Components.NArrayPanel=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.ArrayPanel,function(a,b,d,f){return c.createElement(e.Components.NArrayPanel,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NArrayTab",statics:{UNTITLED:"Untitled Item",ADD_ICON:"plus-circle",ADD_LABEL:"Add"},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"])},getDefaultProps:function(){return{defaultOptions:{tabType:"tab",justified:!1,titleDirection:"horizontal"}}},getInitialState:function(){return{tabs:null}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removePostAddListener(this.onModelChanged),this.removePostRemoveListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addPostAddListener(this.onModelChanged),this.addPostRemoveListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addPostAddListener(this.onModelChanged),this.addPostRemoveListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removePostAddListener(this.onModelChanged),this.removePostRemoveListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.unregisterFromComponentCentral()},renderTabContent:function(a,b){var d=this.getActiveTabIndex(),f={"n-array-tab-card":!0,show:b==d,hide:b!=d},g=this;this.getDependencies(["itemTitle","itemIcon"]).forEach(function(b){a.data.addListener(b,"post","change",function(){g.forceUpdate()})});var h=this.getComponentOption("badge");return null!=h&&("string"==typeof h?a.data.addListener(h,"post","change",function(){g.forceUpdate()}):this.getDependencies(h).forEach(function(b){a.data.addListener(b,"post","change",function(){g.forceUpdate()})})),c.createElement(e.Components.NForm,{model:a.data,layout:e.createFormLayout(a.layout),direction:this.props.direction,view:this.isViewMode(),className:e.LayoutHelper.classSet(f),key:b})},render:function(){var a=this.getTabs(),b=function(b,c,d,e){if(this.isAddable()&&c==a.length-1){var f=this.getComponentOption("onAdd");return f.call(this,this.getModel(),this.getValueFromModel()),!1}var g=this.getComponentOption("canActive");g&&g.call(this,b,c,d,e)}.bind(this);return c.createElement("div",{className:this.getComponentCSS("n-array-tab")},c.createElement(e.Components.NTab,{type:this.getComponentOption("tabType"),justified:this.getComponentOption("justified"),direction:this.getComponentOption("titleDirection"),size:this.getComponentOption("titleIconSize"),tabClassName:this.getAdditionalCSS("tabs"),tabs:a,canActive:b,onActive:this.onTabClicked,ref:"tabs"}),c.createElement("div",{className:"n-array-tab-content",ref:"content"},a.map(this.renderTabContent)))},createItemModel:function(a){var b=this.getModel(),c=b.getValidator(),d=null;if(c){var f=c.getConfig()[this.getDataId()];f&&f.table&&(d=e.createModelValidator(f.table))}var g=d?e.createModel(a,d):e.createModel(a);g.useBaseAsCurrent(),g.parent(b);var h=this.getModel().getError(this.getDataId());if(h)for(var i=null,j=0,k=h.length;k>j;j++)"string"!=typeof h[j]&&(i=h[j].getError(a),g.mergeError(i));return g},getTabs:function(){var a=this;return this.state.tabs?(this.state.tabs.forEach(function(b,c){if(a.isAddable()&&c!=a.state.tabs.length-1||!a.isAddable()){var d=b.data;b.label=a.getTabTitle(d),b.icon=a.getTabIcon(d),b.layout=a.getEditLayout(d),b.badge=a.getTabBadge(d)}}),this.state.tabs):(this.state.tabs=this.getValueFromModel().map(function(b){var c=a.createItemModel(b);return{label:a.getTabTitle(c),icon:a.getTabIcon(c),layout:a.getEditLayout(c),badge:a.getTabBadge(c),data:c}}),this.isAddable()&&this.state.tabs.push({icon:f.ADD_ICON,label:f.ADD_LABEL,layout:{nothing:{comp:{type:e.ComponentConstants.Nothing}}},data:e.createModel({})}),this.state.tabs)},clearTabs:function(a){this.setState({tabs:null},a.call(this))},getValueFromModel:function(){var a=this.getModel().get(this.getDataId());return null==a?[]:a},onModelChanged:function(a){if("add"===a.type)this.clearTabs(this.setActiveTabIndex.bind(this,a.index));else if("remove"===a.type){var b=a.index,c=this.getValueFromModel();b==c.length&&(b-=1),this.clearTabs(this.setActiveTabIndex.bind(this,b))}else this.forceUpdate()},onModelValidateChanged:function(a){this.forceUpdate()},getEditLayout:function(a){var b=this.getComponentOption("editLayout");return"function"==typeof b?b.call(this,a):b},getTabTitle:function(a){var b=this.getComponentOption("itemTitle");if(null==b)return f.UNTITLED;if("string"==typeof b)return b;var c=b.when.call(this,a);return null==c||c.isBlank()?f.UNTITLED:c},getTabBadge:function(a){var b=this.getComponentOption("badge");if(null==b)return null;if("string"==typeof b){var c=a.get(b),d=this.getComponentOption("badgeRender");return d&&(c=d.call(this,c,a,this.getModel())),c}return b.when.call(this,a)},getTabIcon:function(a){var b=this.getComponentOption("itemIcon");return null==b?null:"string"==typeof b?b:b.when.call(this,a)},isAddable:function(){return!this.isViewMode()&&null!=this.getComponentOption("onAdd")},onTabClicked:function(a,b){this.setActiveTabIndex(b);var c=this.getComponentOption("onActive");c&&c.call(this,a,b)},getActiveTabIndex:function(){var a=this.state.tabs,b=a.findIndex(function(a,b){return a.active===!0});return-1==b&&(b=a.findIndex(function(a,b){var c=a.visible!==!1;return c?(a.active=!0,!0):void 0})),b},setActiveTabIndex:function(a){this.refs.tabs.setActiveTabIndex(a),this.forceUpdate()}}));e.Components.NArrayTab=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.ArrayTab,function(a,b,d,f){return c.createElement(e.Components.NArrayTab,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NFormButton",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{style:"default",labelFromModel:!1}}},componentWillUpdate:function(a){this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderIcon:function(a){if(null==a)return null;var b={fa:!0,"fa-fw":!0};return b["fa-"+a]=!0,c.createElement("span",{className:e.LayoutHelper.classSet(b)})},renderButtonIcon:function(){return this.renderIcon(this.getIcon())},renderMoreButtons:function(a){var b=this.getComponentOption("more");if(b){var d=c.createElement("a",{href:"javascript:void(0);",className:e.LayoutHelper.classSet(a)+" dropdown-toggle",onClick:this.onClicked,disabled:!this.isEnabled(),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",key:"a"},c.createElement("span",{className:"caret"})),f=function(){},g=this,h=c.createElement("ul",{className:"dropdown-menu",key:"ul"},b.map(function(a,b){if(a.divider)return c.createElement("li",{role:"separator",className:"divider",key:b});var d=a.click?a.click:f,e=a.text,h=g.renderIcon(a.icon);return e&&h&&(e=" "+e),c.createElement("li",{key:b},c.createElement("a",{href:"javascript:void(0);",onClick:d.bind(g,g.getModel())},h,e))}));return[d,h]}return null},render:function(){if(!this.isVisible())return null;var a={};a[this.getComponentCSS("n-button")]=!0,a["n-disabled"]=!this.isEnabled();var b={btn:!0,disabled:!this.isEnabled()};b["btn-"+this.getStyle()]=!0;var d=this.getLabel(),f=this.renderButtonIcon();return"left"===this.getLabelPosition()?(d&&f&&(d+=" "),c.createElement("div",{className:e.LayoutHelper.classSet(a)},c.createElement("div",{className:"btn-group"},c.createElement("a",{href:"javascript:void(0);",className:e.LayoutHelper.classSet(b),onClick:this.onClicked,disabled:!this.isEnabled(),title:this.getComponentOption("tooltip"),ref:"a"},d,f),this.renderMoreButtons(b)))):(d&&f&&(d=" "+d),c.createElement("div",{className:e.LayoutHelper.classSet(a)},c.createElement("div",{className:"btn-group"},c.createElement("a",{href:"javascript:void(0);",className:e.LayoutHelper.classSet(b),onClick:this.onClicked,disabled:!this.isEnabled(),title:this.getComponentOption("tooltip"),ref:"a"},f,d),this.renderMoreButtons(b))))},onClicked:function(a){if(this.isEnabled()){b(d.findDOMNode(this.refs.a)).toggleClass("effect");var c=this.getComponentOption("click");c&&c.call(this,this.getModel(),a.target)}},getIcon:function(){return this.getComponentOption("icon")},getStyle:function(){return this.getComponentOption("style")},getLabelPosition:function(){return this.getComponentOption("labelPosition")},getLabel:function(){var a=this.getComponentOption("labelFromModel");return a?this.getValueFromModel():this.getLayout().getLabel()},setValueToModel:function(a){}}));e.Components.NFormButton=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Button,function(a,b,d,f){return c.createElement(e.Components.NFormButton,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NCheck",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderLabel:function(a){if(this.isLabelAttached()){var b=this.getLayout().getLabel();if(null==b||b.isEmpty())return null;var d=this.isEnabled(),f={"check-label":!0,disabled:!this.isEnabled(),"check-label-left":a};return c.createElement("span",{className:e.LayoutHelper.classSet(f),onClick:d&&!this.isViewMode()?this.onButtonClicked:null},this.getLayout().getLabel())}return null},renderCheckbox:function(){var a=this.isChecked(),b=this.isEnabled(),d={disabled:!b,checked:a,"check-container":!0};return c.createElement("div",{className:"check-container"},c.createElement("span",{className:e.LayoutHelper.classSet(d),onClick:b&&!this.isViewMode()?this.onButtonClicked:null,onKeyUp:b&&!this.isViewMode()?this.onKeyUp:null,tabIndex:"0",ref:"out"},c.createElement("span",{className:"check",onClick:this.onInnerClicked})))},render:function(){var a={"n-disabled":!this.isEnabled(),"n-view-mode":this.isViewMode()};a[this.getComponentCSS("n-checkbox")]=!0;var b=this.isLabelAtLeft();return c.createElement("div",{className:e.LayoutHelper.classSet(a)},b?this.renderLabel(!0):null,this.renderCheckbox(),b?null:this.renderLabel(!1))},onInnerClicked:function(){b(d.findDOMNode(this.refs.out)).focus()},onButtonClicked:function(){this.setValueToModel(!this.isChecked())},onKeyUp:function(a){"32"==a.keyCode&&this.onButtonClicked()},onModelChanged:function(a){this.forceUpdate()},isChecked:function(){return this.getValueFromModel()===!0},isLabelAttached:function(){return null!==this.getComponentOption("labelAttached")},isLabelAtLeft:function(){return"left"===this.getComponentOption("labelAttached")}}));e.Components.NCheck=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Check,function(a,b,d,f){return c.createElement(e.Components.NCheck,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e,f){var g=d.createClass(f.defineCellComponent({displayName:"NDateTime",statics:{FORMAT:"YYYY/MM/DD",HEADER_MONTH_FORMAT:"MMMM",HEADER_YEAR_FORMAT:"YYYY",VALUE_FORMAT:f.ComponentConstants.Default_Date_Format,FORMAT_TYPES:{ALL:126,YMD:112,YM:96,HM:12,HMS:14,YEAR:64,MONTH:32,DAY:16,HOUR:8,MINUTE:4,SECOND:2,MILLSECOND:1},MIN_WIDTH:250,CLOCK_RADIUS:100,CLOCK_HOUR_PERCENTAGE:.6,CLOCK_BIG_ENGRAVE_LENGTH:8,CLOCK_SMALL_ENGRAVE_LENGTH:4,CLOCK_CHAR_POS:{TOP:{X:100,Y:-2},LEFT:{X:-1,Y:99},RIGHT:{X:201,Y:99},BOTTOM:{X:100,Y:203}},CLOCK_HAND_OFFSET:10,TOTAL_HEIGHT:272},propTypes:{model:d.PropTypes.object,layout:d.PropTypes.object,view:d.PropTypes.bool},getDefaultProps:function(){return{defaultOptions:{locale:"en",headerMonthFirst:!0,bodyYearFormat:"YYYY",icons:{calendar:"calendar",today:"crosshairs",clear:"trash-o",close:"close"}}}},getInitialState:function(){return{popover:null}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.setValueToTextInput(this.getValueFromModel()),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.setValueToTextInput(this.getValueFromModel()),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.destroyPopover(),this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderIcon:function(a){var b={fa:!0,"fa-fw":!0};return b["fa-"+a.icon]=!0,a.className&&(b[a.className]=!0),d.createElement("span",{className:f.LayoutHelper.classSet(b),onClick:a.click})},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"input-group-addon":!0,link:!0,disabled:!this.isEnabled()},b={"n-datetime":!0,"n-disabled":!this.isEnabled()};return d.createElement("div",{className:f.LayoutHelper.classSet(b)},d.createElement("div",{className:"input-group",ref:"comp"},d.createElement("input",{type:"text",className:"form-control",disabled:!this.isEnabled(),onChange:this.onTextInputChange,onFocus:this.onTextInputFocused,onBlur:this.onTextInputBlurred,ref:"text"}),d.createElement("span",{className:f.LayoutHelper.classSet(a)},this.renderIcon({icon:this.getIcon("calendar"),click:this.onCalendarButtonClicked}))),this.renderNormalLine(),this.renderFocusLine())},renderHeaderMonth:function(a){return d.createElement("span",{onClick:this.renderPopover.bind(this,{date:a,type:g.FORMAT_TYPES.MONTH}),className:"header-date-btn",key:"header-month"},this.convertValueToString(a,this.getHeaderMonthFormat()))},renderHeaderYear:function(a){return d.createElement("span",{onClick:this.renderPopover.bind(this,{date:a,type:g.FORMAT_TYPES.YEAR}),className:"header-date-btn",key:"header-year"},this.convertValueToString(a,this.getHeaderYearFormat()))},renderDayHeader:function(a){var b=[this.renderHeaderMonth(a)," ",this.renderHeaderYear(a)],c=this.getComponentOption("headerMonthFirst");return d.createElement("div",{className:"calendar-header day-view"},this.renderIcon({icon:"angle-double-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(1,"y"),type:g.FORMAT_TYPES.DAY})}),this.renderIcon({icon:"angle-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(1,"M"),type:g.FORMAT_TYPES.DAY})}),c?b:b.reverse(),this.renderIcon({icon:"angle-double-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(1,"y"),type:g.FORMAT_TYPES.DAY})}),this.renderIcon({icon:"angle-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(1,"M"),type:g.FORMAT_TYPES.DAY})}))},getWeekdayHeader:function(a){var b=c.locale();c.locale(this.getLocale());var d=c.weekdaysMin();c.locale(b);var e=this.getFirstDayOfWeek(),f=d.splice(0,e);return d=d.concat.apply(d,f)},getDaysOfDayBody:function(a){var b=this.getDaysOfMonth(a),c=a.clone();c.date(1);var d=this.getDayOfWeek(c),e=this.getFirstDayOfWeek(),f=0;f=d>=e?d-e:d+7-e;var g=0,h=[],i=null;for(g=1;f>=g;g++)i=c.clone(),i.subtract(g,"d"),h.splice(0,0,i);for(g=0;b>g;g++)i=c.clone(),i.add(g,"d"),h.push(i);var j=7-h.length%7;j=7==j?0:j;var k=h[h.length-1];for(g=1;j>=g;g++)i=k.clone(),i.add(g,"d"),h.push(i);return h},renderDayBody:function(a){var b=this,c=this.getWeekdayHeader(),e=this.getDaysOfDayBody(a),g=a.month(),h=this.getValueFromModel(),i=this.getToday();return d.createElement("div",{className:"calendar-body day-view"},d.createElement("div",{className:"day-view-body-header row"},c.map(function(a,b){return d.createElement("div",{className:"cell-7-1",key:"weekday-"+b},a)})),d.createElement("div",{className:"day-view-body-body row"},e.map(function(a,c){var e={"cell-7-1":!0,"gap-day":a.month()!=g,today:a.isSame(i,"day"),"current-value":null!=h&&a.isSame(h,"day")};return d.createElement("div",{className:f.LayoutHelper.classSet(e),onClick:b.onDaySelected.bind(b,a),key:"day-"+c},d.createElement("span",null,a.date()))})))},renderMonthHeader:function(a){return d.createElement("div",{className:"calendar-header month-view"},this.renderIcon({icon:"angle-double-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(10,"y"),type:g.FORMAT_TYPES.MONTH
})}),this.renderIcon({icon:"angle-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(1,"y"),type:g.FORMAT_TYPES.MONTH})}),this.renderHeaderYear(a),this.renderIcon({icon:"angle-double-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(10,"y"),type:g.FORMAT_TYPES.MONTH})}),this.renderIcon({icon:"angle-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(1,"y"),type:g.FORMAT_TYPES.MONTH})}))},renderMonthBody:function(a){var b=this,e=c.locale();c.locale(this.getLocale());var g=c.monthsShort("-MMM-");c.locale(e);var h=this.getValueFromModel();null==h&&(h=this.getToday());var i=this.getValueFromModel(),j=this.getToday();return d.createElement("div",{className:"calendar-body month-view"},d.createElement("div",{className:"month-view-body-body row"},g.map(function(c,e){var g=h.clone();g.year(a.year()),g.month(e);var k={"cell-4-1":!0,today:e==j.month(),"current-value":null!=i&&e==i.month()};return d.createElement("div",{className:f.LayoutHelper.classSet(k),onClick:b.onMonthSelected.bind(b,g),key:e},c)})))},renderYearHeader:function(a){var b=[this.convertValueToString(a.clone().subtract(10,"y"),this.getHeaderYearFormat())," - ",this.convertValueToString(a.clone().add(9,"y"),this.getHeaderYearFormat())];return d.createElement("div",{className:"calendar-header year-view"},this.renderIcon({icon:"angle-double-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(40,"y"),type:g.FORMAT_TYPES.YEAR})}),this.renderIcon({icon:"angle-left",className:"header-btn left",click:this.renderPopover.bind(this,{date:a.clone().subtract(20,"y"),type:g.FORMAT_TYPES.YEAR})}),b,this.renderIcon({icon:"angle-double-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(40,"y"),type:g.FORMAT_TYPES.YEAR})}),this.renderIcon({icon:"angle-right",className:"header-btn right",click:this.renderPopover.bind(this,{date:a.clone().add(20,"y"),type:g.FORMAT_TYPES.YEAR})}))},renderYearBody:function(a){var b=this,c=this.getValueFromModel();null==c&&(c=this.getToday());for(var e=this.getValueFromModel(),g=this.getToday(),h=[],i=-10;9>=i;i++){var j=a.clone().set({month:c.month(),date:c.date(),hour:c.hour(),minute:c.minute(),second:c.second(),millisecond:c.millisecond()});j.add(i,"y"),h.push(j)}return d.createElement("div",{className:"calendar-body month-view"},d.createElement("div",{className:"year-view-body-body row"},h.map(function(a,c){var h={"cell-4-1":!0,today:a.year()==g.year(),"current-value":null!=e&&a.year()==e.year()};return d.createElement("div",{className:f.LayoutHelper.classSet(h),onClick:b.onYearSelected.bind(b,a),key:c},a.format(b.getBodyYearFormat()))})))},renderPopoverContentFooterButton:function(a){return d.createElement("div",{className:"cell-3-1",onClick:a.click},this.renderIcon({icon:this.getIcon(a.icon)}))},renderPopoverContentFooter:function(a,b){return d.createElement("div",{className:"calendar-footer row"},this.renderPopoverContentFooterButton({icon:"today",click:this.renderPopover.bind(this,{date:a,type:b,set:!0})}),this.renderPopoverContentFooterButton({icon:"clear",click:this.renderPopover.bind(this,{date:null,type:b,set:!0})}),this.renderPopoverContentFooterButton({icon:"close",click:this.hidePopover}))},renderEngrave:function(a,b,c,e,f){var g=b-c;return d.createElement("line",{className:e,x1:g*Math.cos(2*Math.PI*a/360)+f,y1:f-g*Math.sin(2*Math.PI*a/360),x2:b*Math.cos(2*Math.PI*a/360)+f,y2:f-b*Math.sin(2*Math.PI*a/360),key:a})},render12HourDial:function(a,b){var c=this,e=a.hour()<=11,f=this.getHourRadius();return d.createElement("g",{key:"hour-12-dial"},d.createElement("text",{className:"text hour-12 am"+(e?" yes":""),onClick:this.onAMPMSelected.bind(this,!0,b),x:0,y:0},"AM"),d.createElement("text",{className:"text hour-12 pm"+(e?"":" yes"),onClick:this.onAMPMSelected.bind(this,!1,b),x:2*g.CLOCK_RADIUS,y:0},"PM"),d.createElement("text",{className:"text hour-12 top-num",x:g.CLOCK_CHAR_POS.TOP.X,y:g.CLOCK_CHAR_POS.TOP.Y+g.CLOCK_RADIUS-f},"0"),d.createElement("text",{className:"text hour-12 left-num",x:g.CLOCK_CHAR_POS.LEFT.X+g.CLOCK_RADIUS-f,y:g.CLOCK_CHAR_POS.LEFT.Y},"9"),d.createElement("text",{className:"text hour-12 right-num",x:g.CLOCK_CHAR_POS.RIGHT.X-g.CLOCK_RADIUS+f,y:g.CLOCK_CHAR_POS.RIGHT.Y},"3"),d.createElement("text",{className:"text hour-12 bottom-num",x:g.CLOCK_CHAR_POS.BOTTOM.X,y:g.CLOCK_CHAR_POS.BOTTOM.Y-g.CLOCK_RADIUS+f},"6"),[30,60,120,150,210,240,300,330].map(function(a){return c.renderEngrave(a,f,g.CLOCK_SMALL_ENGRAVE_LENGTH,"big",g.CLOCK_RADIUS)}))},render24HourDial:function(){var a=this,b=this.getHourRadius();return d.createElement("g",{key:"hour-24-dial"},d.createElement("text",{className:"text hour-24 top-num",x:g.CLOCK_CHAR_POS.TOP.X,y:g.CLOCK_CHAR_POS.TOP.Y+g.CLOCK_RADIUS-b},"0"),d.createElement("text",{className:"text hour-24 left-num",x:g.CLOCK_CHAR_POS.LEFT.X+g.CLOCK_RADIUS-b,y:g.CLOCK_CHAR_POS.LEFT.Y},"18"),d.createElement("text",{className:"text hour-24 right-num",x:g.CLOCK_CHAR_POS.RIGHT.X-g.CLOCK_RADIUS+b,y:g.CLOCK_CHAR_POS.RIGHT.Y},"6"),d.createElement("text",{className:"text hour-24 bottom-num",x:g.CLOCK_CHAR_POS.BOTTOM.X,y:g.CLOCK_CHAR_POS.BOTTOM.Y-g.CLOCK_RADIUS+b},"12"),[45,135,225,315].map(function(c){return a.renderEngrave(c,b,g.CLOCK_BIG_ENGRAVE_LENGTH,"big",g.CLOCK_RADIUS)}),[15,30,60,75,105,120,150,165,195,210,240,255,285,300,330,345].map(function(c){return a.renderEngrave(c,b,g.CLOCK_SMALL_ENGRAVE_LENGTH,"small",g.CLOCK_RADIUS)}))},renderMinuteDial:function(){if(!this.hasMinute())return null;var a=this;return d.createElement("g",{key:"minute-dial"},d.createElement("text",{className:"text minute top-num",x:g.CLOCK_CHAR_POS.TOP.X,y:g.CLOCK_CHAR_POS.TOP.Y},"0"),d.createElement("text",{className:"text minute left-num",x:g.CLOCK_CHAR_POS.LEFT.X,y:g.CLOCK_CHAR_POS.LEFT.Y},"45"),d.createElement("text",{className:"text minute right-num",x:g.CLOCK_CHAR_POS.RIGHT.X,y:g.CLOCK_CHAR_POS.RIGHT.Y},"15"),d.createElement("text",{className:"text minute bottom-num",x:g.CLOCK_CHAR_POS.BOTTOM.X,y:g.CLOCK_CHAR_POS.BOTTOM.Y},"30"),[30,60,120,150,210,240,300,330].map(function(b){return a.renderEngrave(b,g.CLOCK_RADIUS,g.CLOCK_BIG_ENGRAVE_LENGTH,"big",g.CLOCK_RADIUS)}),[6,12,18,24,36,42,48,54,66,72,78,84,96,102,108,114,126,132,138,144,156,162,168,174,186,192,198,204,216,222,228,234,246,252,258,264,276,282,288,294,306,312,318,324,336,342,348,354].map(function(b){return a.renderEngrave(b,g.CLOCK_RADIUS,g.CLOCK_SMALL_ENGRAVE_LENGTH,"small",g.CLOCK_RADIUS)}))},renderHourHand:function(a,b){var c=a.hour(),e=null;e=this.is12Hour()?450-30*c:450-15*c;var f=this.getHourRadius();return d.createElement("line",{x1:b+g.CLOCK_HAND_OFFSET*Math.cos(2*Math.PI*(e-180)/360),y1:b-g.CLOCK_HAND_OFFSET*Math.sin(2*Math.PI*(e-180)/360),x2:b+(f-g.CLOCK_HAND_OFFSET)*Math.cos(2*Math.PI*e/360),y2:b-(f-g.CLOCK_HAND_OFFSET)*Math.sin(2*Math.PI*e/360),className:"hour-hand"})},renderMinuteHand:function(a,b,c){if(!this.hasMinute())return null;var e=a.minute(),f=450-6*e;return d.createElement("line",{x1:c+g.CLOCK_HAND_OFFSET*Math.cos(2*Math.PI*(f-180)/360),y1:c-g.CLOCK_HAND_OFFSET*Math.sin(2*Math.PI*(f-180)/360),x2:c+(b-g.CLOCK_HAND_OFFSET)*Math.cos(2*Math.PI*f/360),y2:c-(b-g.CLOCK_HAND_OFFSET)*Math.sin(2*Math.PI*f/360),className:"minute-hand"})},renderSecondHand:function(a,b,c){this.guessDisplayFormatType();if(!this.hasSecond())return null;var e=a.second(),f=450-6*e;return d.createElement("line",{x1:c+g.CLOCK_HAND_OFFSET*Math.cos(2*Math.PI*(f-180)/360),y1:c-g.CLOCK_HAND_OFFSET*Math.sin(2*Math.PI*(f-180)/360),x2:c+b*Math.cos(2*Math.PI*f/360),y2:c-b*Math.sin(2*Math.PI*f/360),className:"second-hand"})},renderTime:function(a,b){var c=this.guessDisplayFormatType();if(!this.hasTimeToDisplay(c))return null;var e={"float":"left",width:this.hasDateToDisplay(c)?"50%":"100%"},f="HH";return this.hasSecond()?f="HH:mm:ss":this.hasMinute()&&(f="HH:mm"),d.createElement("div",{className:"time-view",style:e},d.createElement("div",{className:"calendar-header"},a.format(f)),d.createElement("div",{className:"calendar-body"},d.createElement("div",{className:"time-view-body-body"},d.createElement("div",{style:{height:2*g.CLOCK_RADIUS,width:2*g.CLOCK_RADIUS,position:"relative"}},d.createElement("svg",{className:"clock",height:2*g.CLOCK_RADIUS,width:2*g.CLOCK_RADIUS},this.renderMinuteDial(),this.is12Hour()?this.render12HourDial(a,b):this.render24HourDial(),this.renderHourHand(a,g.CLOCK_RADIUS),this.renderMinuteHand(a,g.CLOCK_RADIUS,g.CLOCK_RADIUS),this.renderSecondHand(a,g.CLOCK_RADIUS,g.CLOCK_RADIUS)),d.createElement("div",{style:{position:"absolute",backgroundColor:"transparent",top:0,left:0,height:2*g.CLOCK_RADIUS,width:2*g.CLOCK_RADIUS},onClick:this.onClockClicked.bind(this,b)})))))},renderPopoverContent:function(a,b){a=a?a:this.getValueFromModel(),a=a?a:this.getToday(),null==b&&(b=this.guessDisplayFormatType());var c={"float":"left",width:this.hasTimeToDisplay(this.guessDisplayFormatType())?"50%":"100%"};return 0!=(b&g.FORMAT_TYPES.DAY)?(this.startClockInterval(g.FORMAT_TYPES.DAY),d.createElement("div",{className:"popover-content row"},d.createElement("div",{className:"date-view",style:c},this.renderDayHeader(a),this.renderDayBody(a),this.renderPopoverContentFooter(this.getToday(),g.FORMAT_TYPES.DAY)),this.renderTime(a,g.FORMAT_TYPES.DAY))):0!=(b&g.FORMAT_TYPES.MONTH)?(this.startClockInterval(g.FORMAT_TYPES.MONTH),d.createElement("div",{className:"popover-content row"},d.createElement("div",{className:"date-view",style:c},this.renderMonthHeader(a),this.renderMonthBody(a),this.renderPopoverContentFooter(this.getToday(),g.FORMAT_TYPES.MONTH)),this.renderTime(a,g.FORMAT_TYPES.MONTH))):0!=(b&g.FORMAT_TYPES.YEAR)?(this.startClockInterval(g.FORMAT_TYPES.YEAR),d.createElement("div",{className:"popover-content row"},d.createElement("div",{className:"date-view",style:c},this.renderYearHeader(a),this.renderYearBody(a),this.renderPopoverContentFooter(this.getToday(),g.FORMAT_TYPES.YEAR)),this.renderTime(a,g.FORMAT_TYPES.YEAR))):(this.startClockInterval(b),d.createElement("div",{className:"popover-content row"},this.renderTime(a,this.guessDisplayFormatType())))},renderPopover:function(c){c||(c={}),c.set&&this.setValueToModel(c.date);var h={display:"block"},i=this.getComponent();h.width=i.outerWidth();var j=this.guessDisplayFormatType(),k=(this.hasDateToDisplay(j)?g.MIN_WIDTH:0)+(this.hasTimeToDisplay(j)?g.MIN_WIDTH:0),l=!1;h.width<k&&(l=!0,h.width=k);var m=i.offset();h.top=m.top+i.outerHeight(),h.left=m.left;var n={"n-datetime":!0,popover:!0,"in":!0};h.top+g.TOTAL_HEIGHT>b(a).height()+b(a).scrollTop()?m.top-b(a).scrollTop()>=g.TOTAL_HEIGHT?(h.top=m.top-g.TOTAL_HEIGHT,n.top=!0):h.top+g.TOTAL_HEIGHT<=b(document).height()?n.bottom=!0:m.top<g.TOTAL_HEIGHT?n.bottom=!0:(h.top=m.top-g.TOTAL_HEIGHT,n.top=!0):n.bottom=!0,l&&(k=b(document).width(),h.left+h.width<=k||h.left+i.outerWidth()>=h.width&&(h.left=h.left+i.outerWidth()-h.width,n["right-to-left"]=!0));var o=d.createElement("div",{role:"tooltip",className:f.LayoutHelper.classSet(n),style:h},d.createElement("div",{className:"arrow"}),this.renderPopoverContent(c.date,c.type));e.render(o,this.state.popover.get(0))},renderPopoverContainer:function(){null==this.state.popover&&(this.state.popover=b("<div>"),this.state.popover.appendTo(b("body")),b(document).on("mousedown",this.onDocumentMouseDown).on("keyup",this.onDocumentKeyUp).on("mousewheel",this.onDocumentMouseWheel),b(a).on("resize",this.onWindowResize)),this.state.popover.hide()},stopClockInterval:function(){this.state.clockInterval&&(clearInterval(this.state.clockInterval.handler),this.state.clockInterval=null)},startClockInterval:function(a){var b=this,d=this.getValueFromModel();null==d?this.state.clockInterval&&this.state.clockInterval.type==a||(this.stopClockInterval(),this.state.clockInterval={handler:setInterval(function(){b.renderPopover({date:c(),type:a})},1e3),type:a}):this.stopClockInterval()},showPopover:function(){this.renderPopoverContainer(),this.renderPopover(),this.state.popover.show()},hidePopover:function(){this.destroyPopover()},destroyPopover:function(){this.state.popover&&(this.stopClockInterval(),b(document).off("mousedown",this.onDocumentMouseDown).off("keyup",this.onDocumentKeyUp).off("mousewheel",this.onDocumentMouseWheel),b(a).on("resize",this.onWindowResize),this.state.popover.remove(),delete this.state.popover)},hasTimeToDisplay:function(a){return 0!=(a&(g.FORMAT_TYPES.HOUR|g.FORMAT_TYPES.MINUTE|g.FORMAT_TYPES.SECOND|g.FORMAT_TYPES.MILLSECOND))},hasDateToDisplay:function(a){return 0!=(a&g.FORMAT_TYPES.YMD)},guessDisplayFormatType:function(){var a=this.getPrimaryDisplayFormat(),b=-1!=a.indexOf("Y"),c=-1!=a.indexOf("M"),d=-1!=a.indexOf("D"),e=-1!=a.indexOf("H"),f=-1!=a.indexOf("m"),h=-1!=a.indexOf("s"),i=-1!=a.indexOf("S");return(b?g.FORMAT_TYPES.YEAR:0)+(c?g.FORMAT_TYPES.MONTH:0)+(d?g.FORMAT_TYPES.DAY:0)+(e?g.FORMAT_TYPES.HOUR:0)+(f?g.FORMAT_TYPES.MINUTE:0)+(h?g.FORMAT_TYPES.SECOND:0)+(i?g.FORMAT_TYPES.MILLSECOND:0)},onDocumentMouseDown:function(a){var c=b(a.target);0==c.closest(this.getComponent()).length&&0==c.closest(this.state.popover).length&&this.hidePopover()},onDocumentMouseWheel:function(a){this.hidePopover()},onDocumentKeyUp:function(a){(27===a.keyCode||9===a.keyCode)&&this.hidePopover()},onWindowResize:function(){this.hidePopover()},onCalendarButtonClicked:function(){this.isEnabled()&&!this.isViewMode()&&(this.showPopover(),this.getTextInput().focus())},onTextInputFocused:function(){b(e.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(e.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onTextInputBlurred:function(){b(e.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(e.findDOMNode(this.refs.normalLine)).toggleClass("focus");var a=this.getTextInput().val();if(0==a.length||a.isBlank())this.setValueToModel(null);else{var c=this.convertValueFromString(a,this.getDisplayFormat());null==c&&0!=a.length?this.setValueToModel(null):this.setValueToModel(c)}},onYearSelected:function(a){this.setValueToModel(a);var b=this.guessDisplayFormatType();this.hasTimeToDisplay(b)||0!=(b&g.FORMAT_TYPES.MONTH)?this.renderPopover({date:a,type:g.FORMAT_TYPES.MONTH}):this.hidePopover()},onMonthSelected:function(a){this.setValueToModel(a);var b=this.guessDisplayFormatType();this.hasTimeToDisplay(b)||0!=(b&g.FORMAT_TYPES.DAY)?this.renderPopover({date:a,type:g.FORMAT_TYPES.DAY}):this.hidePopover()},onDaySelected:function(a){this.setValueToModel(a);var b=this.guessDisplayFormatType();this.hasTimeToDisplay(b)?this.renderPopover({date:a,type:g.FORMAT_TYPES.DAY}):this.hidePopover()},onClockClicked:function(a,c){var d=b(c.target).offset(),e={x:c.pageX-d.left-g.CLOCK_RADIUS,y:g.CLOCK_RADIUS-(c.pageY-d.top)},f=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));if(!(f>101)){var h=g.FORMAT_TYPES.SECOND;h=f>g.CLOCK_RADIUS-g.CLOCK_HAND_OFFSET?this.hasSecond()?g.FORMAT_TYPES.SECOND:this.hasMinute()?g.FORMAT_TYPES.MINUTE:g.FORMAT_TYPES.HOUR:f>g.CLOCK_RADIUS*g.CLOCK_HOUR_PERCENTAGE&&this.hasMinute()?g.FORMAT_TYPES.MINUTE:g.FORMAT_TYPES.HOUR;var i=0;0==e.x?i=e.y>=0?90:270:(i=180*Math.atan(e.y/e.x)/Math.PI,e.x>0&&e.y>=0||(i+=e.x<0?180:360)),i=90>=i?90-i:450-i;var j,k,l,m,n=this.getValueFromModel();n=null==n?this.getToday():n,j=n.hour(),h==g.FORMAT_TYPES.SECOND?(m=Math.floor(i/6)+(3>i%6?0:1),n.second(m)):h==g.FORMAT_TYPES.MINUTE?(l=Math.floor(i/6)+(3>i%6?0:1),n.minute(l)):this.is12Hour()?(k=Math.floor(i/30)+(15>i%30?0:1),n.hour(11>=j?k:k+12)):(k=Math.floor(i/15)+(7.5>i%15?0:1),n.hour(k)),this.renderPopover({date:n,type:a,set:!0})}},onAMPMSelected:function(a,b){var c=this.getValueFromModel();c=null==c?this.getToday():c;var d=c.hour();d=a?d>11?d-12:d:11>=d?d+12:d,c.hour(d),this.setValueToModel(c),this.renderPopover({date:c,type:b})},onTextInputChange:function(){},onModelChange:function(a){this.forceUpdate()},getValueFromModel:function(){return this.convertValueFromString(this.getModel().get(this.getDataId()))},setValueToModel:function(a){this.getModel().set(this.getDataId(),this.convertValueToString(a))},setValueToTextInput:function(a){this.getTextInput().val(this.convertValueToString(a,this.getPrimaryDisplayFormat()))},convertValueFromString:function(a,b){var d=null==a||a.isBlank()?null:c(a,b?b:this.getValueFormat(),this.getLocale());return null!=d&&d.isValid()?d:null},convertValueToString:function(a,b){return null==a?null:a.format(b?b:this.getValueFormat())},getFirstDayOfWeek:function(){return this.getMomentLocaleData().firstDayOfWeek()},getDayOfWeek:function(a){return a.day()},getDaysOfMonth:function(b){var c=b.month()+1;switch(c){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return b.isLeapYear()?29:28;default:return a.console.warn("Something wrong with momentjs."),a.console.warn(b),31}},getComponent:function(){return b(e.findDOMNode(this.refs.comp))},getTextInput:function(){return b(e.findDOMNode(this.refs.text))},getDisplayFormat:function(){var a=this.getComponentOption("format");return a?a:g.FORMAT},getPrimaryDisplayFormat:function(){var a=this.getDisplayFormat();return Array.isArray(a)?a[0]:a},getHeaderMonthFormat:function(){var a=this.getComponentOption("headerMonthFormat");return a?a:g.HEADER_MONTH_FORMAT},getHeaderYearFormat:function(){var a=this.getComponentOption("headerYearFormat");return a?a:g.HEADER_YEAR_FORMAT},getBodyYearFormat:function(){return this.getComponentOption("bodyYearFormat")},getValueFormat:function(){var a=this.getComponentOption("valueFormat");return a?a:g.VALUE_FORMAT},is12Hour:function(){return 12==this.getComponentOption("hour")},getHourRadius:function(){var a=g.CLOCK_RADIUS;return this.hasMinute()&&(a*=g.CLOCK_HOUR_PERCENTAGE),a},hasMinute:function(){return 0!=(this.guessDisplayFormatType()&g.FORMAT_TYPES.MINUTE)},hasSecond:function(){return 0!=(this.guessDisplayFormatType()&g.FORMAT_TYPES.SECOND)},getIcon:function(a){return this.getComponentOption("icons")[a]},getTextInViewMode:function(){return this.convertValueToString(this.getValueFromModel(),this.getPrimaryDisplayFormat())},getLocale:function(){return this.getComponentOption("locale")},getMomentLocaleData:function(){return c.localeData(this.getLocale())},getToday:function(){return c().locale(this.getLocale())}}));f.Components.NDateTime=g,f.LayoutHelper.registerComponentRenderer(f.ComponentConstants.Date,function(a,b,c,e){return d.createElement(f.Components.NDateTime,f.LayoutHelper.transformParameters(a,b,c,e))})}(window,jQuery,moment,React,ReactDOM,$pt),function(a,b,c,d,e,f){var g=d.createClass(f.defineCellComponent({displayName:"NDateTime2",statics:{FORMAT:"YYYY/MM/DD",DAY_VIEW_HEADER_FORMAT:"MMMM YYYY",HEADER_YEAR_FORMAT:null,VALUE_FORMAT:f.ComponentConstants.Default_Date_Format,LOCALE:"en",DATE_PICKER_VERTICAL_OFFSET:35},propTypes:{model:d.PropTypes.object,layout:d.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{stepping:1,useCurrent:!1,minDate:!1,maxDate:!1,collapse:!0,defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash"},useStrict:!1,sideBySide:!0,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!0,showClear:!0,showClose:!0,tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century"}}}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.isViewMode()||this.getComponent().data("DateTimePicker").date(this.getValueFromModel()),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.createComponent(),this.isViewMode()||this.getComponent().data("DateTimePicker").date(this.getValueFromModel()),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},createComponent:function(){var a=this,b=this.getComponent().datetimepicker(this.createDisplayOptions({format:g.FORMAT,dayViewHeaderFormat:g.DAY_VIEW_HEADER_FORMAT,locale:g.LOCALE,stepping:null,useCurrent:null,minDate:null,maxDate:null,collapse:null,disabledDates:null,enabledDates:null,icons:null,useStrict:null,sideBySide:null,daysOfWeekDisabled:null,calendarWeeks:null,viewMode:null,toolbarPlacement:null,showTodayButton:null,showClear:null,showClose:null,tooltips:null})).on("dp.change",this.onComponentChange),c=b.data("DateTimePicker");b.on("dp.show",function(b){a.resetPopupContent.call(a,c,b.target)}).on("dp.update",function(b){a.resetPopupContent.call(a,c,b.target)})},resetPopupContent:function(a,c){var d=b(c).children("div.bootstrap-datetimepicker-widget");if(0!=d.closest(".n-table").length){var e=b(c).closest(".n-table-body-container"),f=d.prev().offset(),h=d.offset(),i=d.outerHeight(!0);null==h.top||"auto"==h.top||f.top>h.top?h.top=f.top-i+g.DATE_PICKER_VERTICAL_OFFSET:h.top=f.top+d.prev().height();var j={top:h.top,left:h.left,bottom:"auto",right:"auto",height:"auto"},k=b(c).closest(".n-modal-form");0!=k.length&&(j["z-index"]=k.css("z-index")+1),d.css(j),d.detach().appendTo(b("body")),e.hide().show(0)}var l=this.getHeaderYearFormat();if(l){var m=a.viewDate(),n=d.find(".datepicker-months"),o=n.find("th");o.eq(1).text(m.format(l))}},createDisplayOptions:function(a){var b=this;return Object.keys(a).forEach(function(c){var d=b.getComponentOption(c);null!==d&&(a[c]=d)}),a},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"input-group-addon":!0,link:!0,disabled:!this.isEnabled()},b={"n-datetime":!0,"n-disabled":!this.isEnabled()};return d.createElement("div",{className:f.LayoutHelper.classSet(b)},d.createElement("div",{className:"input-group",ref:"div"},d.createElement("input",{type:"text",className:"form-control",disabled:!this.isEnabled(),onFocus:this.onComponentFocused,onBlur:this.onComponentBlurred}),d.createElement("span",{className:f.LayoutHelper.classSet(a)},d.createElement("span",{className:"fa fa-fw fa-calendar"}))),this.renderNormalLine(),this.renderFocusLine())},onComponentFocused:function(){b(e.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(e.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentBlurred:function(){b(e.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(e.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentChange:function(a){a.date!==!1?this.setValueToModel(a.date):this.setValueToModel(null)},onModelChange:function(a){this.forceUpdate()},getComponent:function(){return b(e.findDOMNode(this.refs.div))},getValueFromModel:function(){return this.convertValueFromModel(this.getModel().get(this.getDataId()))},setValueToModel:function(a){this.getModel().set(this.getDataId(),null==a?null:a.format(this.getValueFormat()))},convertValueFromModel:function(a){return null==a?null:c(a,this.getValueFormat())},getValueFormat:function(){var a=this.getComponentOption("valueFormat");return a?a:g.VALUE_FORMAT},getHeaderYearFormat:function(){var a=this.getComponentOption("headerYearFormat");return a?a:g.HEADER_YEAR_FORMAT},getTextInViewMode:function(){var a=this.getValueFromModel();return null==a?null:a.format(this.getDisplayFormat())},getDisplayFormat:function(){var a=this.getComponentOption("format");return a?a:g.FORMAT}}));f.Components.NDateTime2=g,f.LayoutHelper.registerComponentRenderer("date2",function(a,b,c,e){return d.createElement(f.Components.NDateTime2,f.LayoutHelper.transformParameters(a,b,c,e))})}(window,jQuery,moment,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NExceptionModal",statics:{getExceptionModal:function(a){if(void 0===e.exceptionDialog||null===e.exceptionDialog){var f=b("#exception_modal_container");0==f.length&&b("<div id='exception_modal_container' />").appendTo(b(document.body)),e.exceptionDialog=d.render(c.createElement(e.Components.NExceptionModal,{className:a}),document.getElementById("exception_modal_container"))}return e.exceptionDialog},TITLE:"Exception Raised...",Z_INDEX:9998},propTypes:{className:c.PropTypes.string},getDefaultProps:function(){return{}},getInitialState:function(){return{visible:!1,status:null,message:null}},fixDocumentPadding:function(){document.body.style.paddingRight=0},componentDidUpdate:function(a,c){this.fixDocumentPadding(),b(document).on("keyup",this.onDocumentKeyUp)},componentDidMount:function(){this.fixDocumentPadding(),b(document).on("keyup",this.onDocumentKeyUp)},componentWillUpdate:function(){b(document).off("keyup",this.onDocumentKeyUp)},componentWillUnmount:function(){b(document).off("keyup",this.onDocumentKeyUp)},renderContent:function(){var a=this.state.status,b=e.ComponentConstants.Http_Status[a],d=this.state.message;return c.createElement("div",null,c.createElement("h6",null,a,": ",b),null!=d?c.createElement("pre",null,d):null)},render:function(){if(!this.state.visible)return null;var a={"n-exception-modal":!0,modal:!0,fade:!0,"in":!0};return this.props.className&&(a[this.props.className]=!0),c.createElement("div",null,c.createElement("div",{className:"modal-backdrop fade in",style:{zIndex:f.Z_INDEX}}),c.createElement("div",{className:e.LayoutHelper.classSet(a),tabIndex:"-1",role:"dialog",style:{display:"block",zIndex:f.Z_INDEX+1}},c.createElement("div",{className:"modal-danger modal-dialog"},c.createElement("div",{className:"modal-content",role:"document"},c.createElement("div",{className:"modal-header"},c.createElement("button",{className:"close",onClick:this.hide,"aria-label":"Close",style:{marginTop:"-2px"}},c.createElement("span",{"aria-hidden":"true"},"")),c.createElement("h4",{className:"modal-title"},f.TITLE)),c.createElement("div",{className:"modal-body"},this.renderContent())))))},onDocumentKeyUp:function(a){27===a.keyCode&&this.hide()},hide:function(){this.setState({visible:!1,status:null,message:null})},show:function(a,c){b(":focus").blur(),this.setState({visible:!0,status:a,message:c})}});e.Components.NExceptionModal=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NFile",statics:{},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{multiple:!0,browseLabel:"",browseIcon:'<i class="fa fa-fw fa-folder-open-o"></i>',browseClass:"btn btn-link",uploadLabel:"",uploadIcon:'<i class="fa fa-fw fa-upload"></i>',uploadClass:"btn btn-link",removeLabel:"",removeIcon:'<i class="fa fa-fw fa-trash-o"></i>',removeClass:"btn btn-link",showClose:!1,showPreview:!0}}},getInitialState:function(){return{}},componentWillUpdate:function(){this.unregisterFromComponentCentral()},componentDidUpdate:function(){this.registerToComponentCentral()},componentDidMount:function(){var a=b(d.findDOMNode(this.refs.file));a.fileinput(this.createDisplayOptions({ajaxDeleteSettings:null,ajaxSettings:null,allowedFileExtensions:null,allowedFileTypes:null,allowedPreviewMimeTypes:null,allowedPreviewTypes:null,autoReplace:null,browseClass:null,browseIcon:null,browseLabel:null,buttonLabelClass:null,captionClass:null,customLayoutTags:null,customPreviewTags:null,deleteExtraData:null,deleteUrl:null,dropZoneEnabled:null,dropZoneTitle:null,dropZoneTitleClass:null,fileTypeSettings:null,initialCaption:null,initialPreview:null,initialPreviewConfig:null,initialPreviewCount:null,initialPreviewDelimiter:null,initialPreviewShowDelete:null,initialPreviewThumbTags:null,language:null,mainClass:null,maxFileCount:null,maxFileSize:null,maxImageHeight:null,maxImageWidth:null,minFileCount:null,minImageHeight:null,minImageWidth:null,msgErrorClass:null,msgFileNotFound:null,msgFileNotReadable:null,msgFilePreviewAborted:null,msgFilePreviewError:null,msgFileSecured:null,msgFilesTooLess:null,msgFilesTooMany:null,msgFoldersNotAllowed:null,msgImageHeightLarge:null,msgImageHeightSmall:null,msgImageWidthLarge:null,msgImageWidthSmall:null,msgInvalidFileExtension:null,msgInvalidFileType:null,msgLoading:null,msgProgress:null,msgSelected:null,msgSizeTooLarge:null,msgUploadAborted:null,msgValidationError:null,msgValidationErrorClass:null,msgValidationErrorIcon:null,msgZoomModalHeading:null,msgZoomTitle:null,overwriteInitial:null,previewClass:null,previewFileExtSettings:null,previewFileIcon:null,previewFileIconClass:null,previewFileIconSettings:null,previewFileType:null,previewSettings:null,previewThumbTags:null,progressClass:null,progressCompleteClass:null,removeClass:null,removeIcon:null,removeLabel:null,removeTitle:null,showAjaxErrorDetails:null,showCaption:null,showClose:null,showPreview:null,showRemove:null,showUpload:null,showUploadedThumbs:null,uploadAsync:null,uploadClass:null,uploadExtraData:null,uploadIcon:null,uploadLabel:null,uploadTitle:null,uploadUrl:null,validateInitialCount:null,zoomIndicator:null}));var c=this.getEventMonitor();Object.keys(c).forEach(function(b){a.on(b,c[b])});var e=b(d.findDOMNode(this.refs.comp));e.find(".kv-fileinput-caption").focus(this.onComponentFocused).blur(this.onComponentBlurred),e.find(".input-group-btn>.btn").focus(this.onComponentFocused).blur(this.onComponentBlurred),this.registerToComponentCentral()},componentWillUnmount:function(){var a=b(d.findDOMNode(this.refs.file)),c=this.getEventMonitor();Object.keys(c).forEach(function(b){a.off(b,c[b])}),a.fileinput("destroy"),this.unregisterFromComponentCentral()},render:function(){var a={};a[this.getComponentCSS("n-file")]=!0;var b={file:!0};return c.createElement("div",{className:e.LayoutHelper.classSet(a),ref:"comp"},c.createElement("input",{type:"file",className:e.LayoutHelper.classSet(b),multiple:this.allowMultipleFiles(),disabled:!this.isEnabled(),ref:"file"}),this.renderNormalLine(),this.renderFocusLine())},createDisplayOptions:function(a){var b=this;return Object.keys(a).forEach(function(c){a[c]=b.getComponentOption(c),null==a[c]&&delete a[c]}),a},allowMultipleFiles:function(){return this.getComponentOption("multiple")},onComponentFocused:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentBlurred:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")}}));e.Components.NFile=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.File,function(a,b,d,f){return c.createElement(e.Components.NFile,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NForm",statics:{LABEL_DIRECTION:"vertical"},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"]),view:c.PropTypes.bool,className:c.PropTypes.string},getDefaultProps:function(){return{next:{icon:"angle-double-right",text:"Next",style:"primary",labelPosition:"left"},previous:{icon:"angle-double-left",text:"Previous",style:"primary"}}},getInitialState:function(){return{activeCard:null,next:b.extend({},this.props.next,{click:this.onNextClicked}),previous:b.extend({},this.props.previous,{click:this.onPreviousClicked}),expanded:{}}},componentWillUpdate:function(a){var b=this;this.getLayout().getCards().forEach(function(a){a.hasBadge()&&b.getModel().removeListener(a.getBadgeId(),"post","change",b.onModelChanged)})},componentDidUpdate:function(a,b){var c=this;this.getLayout().getCards().forEach(function(a){
a.hasBadge()&&c.getModel().addListener(a.getBadgeId(),"post","change",c.onModelChanged)})},componentDidMount:function(){var a=this;this.getLayout().getCards().forEach(function(b){b.hasBadge()&&a.getModel().addListener(b.getBadgeId(),"post","change",a.onModelChanged)})},componentWillUnmount:function(){var a=this;this.getLayout().getCards().forEach(function(b){b.hasBadge()&&a.getModel().removeListener(b.getBadgeId(),"post","change",a.onModelChanged)})},renderSections:function(a){var b={},d=this;a.forEach(function(a){var c={label:a.getLabel(),comp:{type:e.ComponentConstants.Panel,style:a.getStyle(),expanded:a.isExpanded(),collapsible:a.isCollapsible(),visible:a.getVisible(),expandedLabel:a.getExpandedLabel(),collapsedLabel:a.getCollapsedLabel()},pos:{width:a.getWidth(),col:a.getColumnIndex(),row:a.getRowIndex()}};if(a.hasCheckInTitle()){c.comp.checkInTitle={data:a.getCheckInTitleDataId(),collapsible:a.getCheckInTitleCollapsible(),label:a.getCheckInTitleLabel()};var f=a.getCheckInTitleOption();Object.keys(f).forEach(function(a){c.comp.checkInTitle[a]=f[a]})}c.comp.editLayout=a.getCells(),b[d.getSectionKey(a)]=c});var f={comp:{type:e.ComponentConstants.Panel,editLayout:b},pos:{width:12}};return c.createElement(e.Components.NPanel,{model:this.getModel(),layout:e.createCellLayout(a[0].getParentCard().getId()+"-body",f),direction:this.getLabelDirection(),view:this.isViewMode()})},attachPreviousButton:function(a,c){this.getLayout().isCardButtonShown()&&(this.isPreviousCardBackable(c.getId())?a.splice(0,0,this.state.previous):a.splice(0,0,b.extend({enabled:!1},this.state.previous)))},attachNextButton:function(a){this.getLayout().isCardButtonShown()&&a.push(this.state.next)},wrapCustomButton:function(a){var c=this,d=b.extend({},a);return"next"===a.successCallback?d.click=function(b){a.click.call(c,b)&&c.onNextClicked()}:"prev"===a.successCallback?d.click=function(b){a.click.call(c,b)&&c.onPreviousClicked()}:"return"===a.successCallback&&(d.click=function(b){var d=a.click.call(c,b);"string"==typeof d&&c.jumpToCard(d)}),d},wrapCustomButtons:function(a){if(null==a)return null;if(Array.isArray(a)){var b=this;return a.map(function(a){return b.wrapCustomButton(a)})}return[this.wrapCustomButton(a)]},renderCard:function(a,b,d){var f={"n-card":!0},g=[];g.push.apply(g,this.wrapCustomButtons(a.getRightButtons()));var h=[];h.push.apply(h,this.wrapCustomButtons(a.getLeftButtons()));var i=null;if(b)if(f["n-card-active"]=a.getId()==this.state.activeCard,0==d)this.attachNextButton(g);else if(d==this.props.layout.getCards().length-1){this.attachPreviousButton(h,a);var j=a.getFinishButton();j&&g.push(j)}else this.attachPreviousButton(h,a),this.attachNextButton(g);else f["n-card-active"]=!0;return(0!=g.length||0!=h.length)&&(g=g.reverse(),i=c.createElement(e.Components.NPanelFooter,{right:g,left:h,model:this.getModel(),view:this.isViewMode()})),c.createElement("div",{className:e.LayoutHelper.classSet(f),key:d},this.renderSections(a.getSections()),i)},renderBadge:function(a){if(a.hasBadge()){var b=a.getBadgeRender(),d=b?b.call(this,this.getModel().get(a.getBadgeId()),this.getModel()):this.getModel().get(a.getBadgeId());return c.createElement("span",{className:"badge"}," ",d)}return null},renderWizards:function(){var a=e.LayoutHelper.classSet({nav:!0,"nav-justified":!0,"nav-pills":!0,"nav-direction-vertical":!1,"n-cards-nav":!0,"n-cards-free":this.isFreeCard()}),b=this;return c.createElement("ul",{className:a,key:"wizards"},this.getLayout().getCards().map(function(a,d){var f={active:a.getId()==b.state.activeCard,before:b.isBeforeActiveCard(a.getId()),after:b.isAfterActiveCard(a.getId())},g=null;b.isFreeCard()&&(g=function(){b.jumpToCard(a.getId())});var h=null;if(null!=a.getIcon()){var i={fa:!0,"fa-fw":!0};i["fa-"+a.getIcon()]=!0,h=c.createElement("span",{className:e.LayoutHelper.classSet(i)})}return c.createElement("li",{className:e.LayoutHelper.classSet(f),key:d},c.createElement("a",{href:"javascript:void(0);",onClick:g},h," ",a.getLabel(),b.renderBadge(a)))}))},renderCards:function(){var a=this.getLayout().getCards();if(1==a.length)return this.renderCard(a[0],!1);var b=this;this.initActiveCard();var c=[];c.push(this.renderWizards());var d=0;return a.forEach(function(a){c.push(b.renderCard(a,!0,d)),d++}),c},initActiveCard:function(){if(null==this.state.activeCard){var a=this,b=this.getLayout().getCards();b.forEach(function(b){b.isActive()&&(a.state.activeCard=b.getId())}),this.state.activeCard||(this.state.activeCard=b[0].getId())}},render:function(){var a={"n-form":!0};return this.props.className&&(a[this.props.className]=!0),c.createElement("div",{className:e.LayoutHelper.classSet(a)},this.renderCards())},onModelChanged:function(a){this.forceUpdate()},onPreviousClicked:function(){var a=this.getActiveCardIndex(),b=this.getLayout().getCards()[a-1];(this.isFreeCard()||b.isBackable())&&this.setState({activeCard:b.getId()})},onNextClicked:function(){var a=this.getActiveCardIndex(),b=this.getLayout().getCards()[a+1];this.setState({activeCard:b.getId()})},jumpToCard:function(a){this.setState({activeCard:a})},getActiveCardIndex:function(a){for(var b=a?a:this.state.activeCard,c=this.getLayout().getCards(),d=0,e=0,f=c.length;f>e;e++)if(c[e].getId()==b){d=e;break}return d},getSectionKey:function(a){return a.getParentCard().getId()+"-"+a.getId()},isViewMode:function(){return this.props.view},isFreeCard:function(){return this.isViewMode()||this.getLayout().isFreeCard()},isPreviousCardBackable:function(a){if(this.isFreeCard())return!0;var b=this.getActiveCardIndex(a),c=this.getLayout().getCards();return c[b-1].isBackable()},isAfterActiveCard:function(a){return this.getActiveCardIndex(a)-this.getActiveCardIndex()>0},isBeforeActiveCard:function(a){return this.getActiveCardIndex(a)-this.getActiveCardIndex()<0},getModel:function(){return this.props.model},getLabelDirection:function(){return this.props.direction?this.props.direction:f.LABEL_DIRECTION},getLayout:function(){return this.props.layout},getCellComponent:function(a){var b=this.refs[a];return b?b.refs[a]:null}});e.Components.NForm=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Form,function(a,b,d,f){var g=e.createFormLayout(b.getComponentOption("editLayout"));return c.createElement(e.Components.NForm,e.LayoutHelper.transformParameters(a,g,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NFormButtonFooter",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},componentWillUpdate:function(){this.unregisterFromComponentCentral()},componentDidUpdate:function(){this.registerToComponentCentral()},componentDidMount:function(){this.registerToComponentCentral()},componentWillUnmount:function(){this.unregisterFromComponentCentral()},render:function(){var a=this.getButtonLayout();return c.createElement(e.Components.NPanelFooter,{model:this.props.model,view:this.isViewMode(),save:a.save,validate:a.validate,cancel:a.cancel,reset:a.reset,left:a.left,right:a.right})},getButtonLayout:function(){return this.getComponentOption("buttonLayout")}}));e.Components.NFormButtonFooter=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.ButtonFooter,function(a,b,d,f){return c.createElement(e.Components.NFormButtonFooter,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NFormCell",statics:{REQUIRED_ICON:"asterisk",TOOLTIP_ICON:"question-circle",LABEL_WIDTH:4,__componentRenderer:{},registerComponentRenderer:function(a,b){e.LayoutHelper.registerComponentRenderer(a,b)},getComponentRenderer:function(a){return e.LayoutHelper.getComponentRenderer(a)}},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"]),view:c.PropTypes.bool},getDefaultProps:function(){return{defaultOptions:{paintRequired:!0},direction:"vertical"}},componentWillUpdate:function(a){this.destroyPopover(),this.removePostChangeListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.removeVisibleDependencyMonitor(),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.renderPopover(),this.addPostChangeListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.addVisibleDependencyMonitor(),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.renderPopover(),this.addPostChangeListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged),this.addVisibleDependencyMonitor(),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.destroyPopover(),this.removePostChangeListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged),this.removeVisibleDependencyMonitor(),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},destroyPopover:function(){var a=this.refs.comp;null!=a&&b(d.findDOMNode(a)).popover("destroy")},renderPopover:function(){if(this.getLayout().getComponentType().popover!==!1&&this.getModel().hasError(this.getDataId())){var a=this.getModel().getError(this.getDataId()),c=this,e={placement:"top",trigger:"hover",html:!0,content:a.map(function(a){return"<span style='display:block'>"+a.format([c.getLayout().getLabel()])+"</span>"}),animation:!1},f=this.refs.comp;null!=f&&b(d.findDOMNode(f)).popover(e)}},renderInputComponent:function(a){var b=this.props.direction?this.props.direction:"vertical";if(a.render)return a.render.call(this,this.getFormModel(),this.getLayout(),b,this.isViewMode());var d=a.type;return d||(d="text"),c.createElement("div",{ref:"comp"},e.LayoutHelper.getComponentRenderer(d).call(this,this.getFormModel(),this.getLayout(),b,this.isViewMode()))},renderLabel:function(){var a=this.getComponentOption("paintRequired"),b={fa:!0,"fa-fw":!0,required:!0};b["fa-"+f.REQUIRED_ICON]=!0;var d=a&&this.getModel().isRequired(this.getDataId())?c.createElement("span",{className:e.LayoutHelper.classSet(b)}):null,g=this.getComponentOption("tooltip"),h=null;if(null!=g&&!g.isBlank()){var i={fa:!0,"fa-fw":!0,"n-form-cell-tooltip":!0};i["fa-"+f.TOOLTIP_ICON]=!0,h=c.createElement("span",{className:e.LayoutHelper.classSet(i),title:g})}return c.createElement("span",{className:this.getLayout().getLabelCSS(),onClick:this.onLabelClicked,ref:"label"},this.getLayout().getLabel(),h,d)},render:function(){var a=this.isVisible();if(a){var b=this.getComponentOption("view");this.isViewMode()?a="edit"==b!=1:this.isViewMode()||(a="view"==b!=1)}if(a){var d=this.getCSSClassName();this.getModel().hasError(this.getDataId())&&(d+=" has-error"),this.isEnabled()||(d+=" n-form-cell-disabled");var e=this.getLayout().getComponentType();if(e.label===!1)return c.createElement("div",{className:d,ref:"div"},this.renderInputComponent(e));var f=this.getComponentOption("labelDirection");return null==f&&(f=this.props.direction?this.props.direction:"vertical"),"vertical"!=f?c.createElement("div",{className:d+" horizontal-label",ref:"div"},c.createElement("div",{className:"row"},c.createElement("div",{className:this.getHorizontalLabelCSS()},this.renderLabel()),c.createElement("div",{className:this.getHorizontalComponentCSS()},this.renderInputComponent(e)))):c.createElement("div",{className:d+" vertical-label",ref:"div"},this.renderLabel(),this.renderInputComponent(e))}return c.createElement("div",{className:this.getCSSClassName()+" n-form-cell-invisible"})},onModelChanged:function(a){this.getModel().validate(a.id)},onModelValidateChanged:function(a){var c;this.getModel().hasError(this.getDataId())?(this.renderPopover(),c=this.refs.div,null!=c&&b(d.findDOMNode(c)).addClass("has-error")):(this.destroyPopover(),c=this.refs.div,null!=c&&b(d.findDOMNode(c)).removeClass("has-error"))},onLabelClicked:function(){b(d.findDOMNode(this.refs.comp)).focus()},getCSSClassName:function(){var a=this.getLayout().getWidth(),b={"n-form-cell":!0};return"number"==typeof a?(b["col-sm-"+a]=!0,b["col-md-"+a]=!0,b["col-lg-"+a]=!0):Object.keys(a).forEach(function(c){b["col-"+c+"-"+a[c]]=!0}),this.getLayout().getCellCSS(e.LayoutHelper.classSet(b))},getHorizontalLabelCSS:function(){var a=this.getHorizontalLabelWidth();return"col-sm-"+a+" col-md-"+a+" col-lg-"+a},getHorizontalComponentCSS:function(){var a=12-this.getHorizontalLabelWidth();return"col-sm-"+a+" col-md-"+a+" col-lg-"+a},getHorizontalLabelWidth:function(){var a=this.getComponentOption("labelWidth");return a?a:f.LABEL_WIDTH},registerToComponentCentral:function(){var a=this.getComponentCentralId();a&&e.LayoutHelper.registerComponent(a+"@cell",this)},unregisterFromComponentCentral:function(){var a=this.getComponentCentralId();a&&e.LayoutHelper.unregisterComponent(a+"@cell",this)}}));e.Components.NFormCell=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NFormTab",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"])},getDefaultProps:function(){return{defaultOptions:{tabType:"tab",justified:!1,titleDirection:"horizontal"}}},getInitialState:function(){return{}},componentWillUpdate:function(a){var b=this;this.getTabs().forEach(function(a){a.badgeId&&b.removeDependencyMonitor([a.badgeId])}),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){var c=this;this.getTabs().forEach(function(a){a.badgeId&&c.addDependencyMonitor([a.badgeId])}),this.registerToComponentCentral()},componentDidMount:function(){var a=this;this.getTabs().forEach(function(b){b.badgeId&&a.addDependencyMonitor([b.badgeId])}),this.registerToComponentCentral()},componentWillUnmount:function(){var a=this;this.getTabs().forEach(function(b){b.badgeId&&a.removeDependencyMonitor([b.badgeId])}),this.unregisterFromComponentCentral()},renderTabContent:function(a,b){var d=this.getActiveTabIndex(),f={"n-form-tab-card":!0,show:b==d,hide:b!=d};return c.createElement(e.Components.NForm,{model:this.getModel(),layout:a,direction:this.props.direction,view:this.isViewMode(),className:e.LayoutHelper.classSet(f),key:"form-"+b})},render:function(){var a=this.initializeTabs(),b=this.getComponentOption("canActive");return b&&b.bind(this),c.createElement("div",{className:this.getComponentCSS("n-form-tab")},c.createElement(e.Components.NTab,{type:this.getComponentOption("tabType"),justified:this.getComponentOption("justified"),direction:this.getComponentOption("titleDirection"),size:this.getComponentOption("titleIconSize"),tabClassName:this.getAdditionalCSS("tabs"),tabs:a,canActive:b,onActive:this.onTabClicked,ref:"tabs"}),c.createElement("div",{className:"n-form-tab-content",ref:"content"},this.getTabLayouts().map(this.renderTabContent)))},getTabs:function(){return this.getComponentOption("tabs")},initializeTabs:function(){var a=this,b=this.getTabs();return b.forEach(function(b){b.badgeId&&(b.badge=a.getModel().get(b.badgeId),b.badgeRender&&(b.badge=b.badgeRender.call(a,b.badge,a.getModel())))}),b},getTabLayouts:function(){return this.getTabs().map(function(a){return e.createFormLayout(a.layout||a.editLayout)})},onTabClicked:function(a,b){this.setActiveTabIndex(b);var c=this.getComponentOption("onActive");c&&c.call(this,a,b)},getActiveTabIndex:function(){var a=this.getComponentOption("tabs"),b=a.findIndex(function(a,b){return a.active===!0});return-1==b&&(b=a.findIndex(function(a,b){var c=a.visible!==!1;return c?(a.active=!0,!0):void 0})),b},setActiveTabIndex:function(a){this.refs.tabs.setActiveTabIndex(a),this.forceUpdate()}}));e.Components.NFormTab=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Tab,function(a,b,d,f){return c.createElement(e.Components.NFormTab,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NIcon",propTypes:{size:c.PropTypes.string,fixWidth:c.PropTypes.bool,icon:c.PropTypes.string.isRequired,spin:c.PropTypes.bool,pulse:c.PropTypes.bool,rotate:c.PropTypes.oneOf([90,180,270]),flip:c.PropTypes.oneOf(["h","v"]),iconClassName:c.PropTypes.string,backIcon:c.PropTypes.string,backSpin:c.PropTypes.bool,backPulse:c.PropTypes.bool,backRotate:c.PropTypes.oneOf([90,180,270]),backFlip:c.PropTypes.oneOf(["h","v"]),backClassName:c.PropTypes.string,tooltip:c.PropTypes.string},getDefaultProps:function(){return{fixWidth:!1,spin:!1}},getSize:function(){var a={"fa-lg":"lg"===this.props.size,"fa-2x":"2x"===this.props.size,"fa-3x":"3x"===this.props.size,"fa-4x":"4x"===this.props.size,"fa-5x":"5x"===this.props.size,"fa-fw":this.props.fixWidth};return this.props.size&&(a["fa-"+this.props.size]=!0),a},getIcon:function(){var a={fa:!0,"fa-spin":this.props.spin,"fa-pulse":this.props.pulse,"fa-rotate-90":90==this.props.rotate,"fa-rotate-180":180==this.props.rotate,"fa-rotate-270":270==this.props.rotate,"fa-flip-horizontal":"h"===this.props.flip,"fa-flip-vertical":"v"===this.props.flip};return a["fa-"+this.props.icon]=!0,this.props.iconClassName&&(a[this.props.iconClassName]=!0),a},getBackIcon:function(){var a={fa:!0,"fa-spin":this.props.backSpin,"fa-pulse":this.props.backPulse,"fa-rotate-90":90==this.props.backRotate,"fa-rotate-180":180==this.props.backRotate,"fa-rotate-270":270==this.props.backRotate,"fa-flip-horizontal":"h"===this.props.backFlip,"fa-flip-vertical":"v"===this.props.backFlip};return a["fa-"+this.props.backIcon]=!0,this.props.backClassName&&(a[this.props.backClassName]=!0),a},render:function(){var a=this.getSize(),d=this.getIcon();if(this.props.backIcon){a["fa-stack"]=!0,d["fa-stack-1x"]=!0;var f=this.getBackIcon();return f["fa-stack-2x"]=!0,c.createElement("span",{className:e.LayoutHelper.classSet(a),title:this.props.tooltip},c.createElement("i",{className:e.LayoutHelper.classSet(d)}),c.createElement("i",{className:e.LayoutHelper.classSet(f)}))}return c.createElement("span",{className:e.LayoutHelper.classSet(b.extend(d,a)),title:this.props.tooltip})}});e.Components.NIcon=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NJumbortron",propTypes:{highlightText:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.arrayOf(c.PropTypes.string)]).isRequired},renderText:function(){return Array.isArray(this.props.highlightText)?this.props.highlightText.map(function(a,b){return c.createElement("h4",{key:b},a)}):c.createElement("h4",null,this.props.highlightText)},render:function(){return c.createElement("div",{className:"n-jumbotron jumbotron"},this.renderText())}});e.Components.NJumbortron=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NLabel",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{textFromModel:!0}}},componentWillUpdate:function(a){this.removePostChangeListener(this.__forceUpdate),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.__forceUpdate),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.__forceUpdate),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},render:function(){var a=this.getText();if(!Array.isArray(a)){var b=this.getComponentOption("currency");if(b&&null!=a&&!(a+"").isBlank()){var d=this.getComponentOption("fraction");d=d?1*d:0,a=(a+"").currencyFormat(d)}(null==a||(a+"").isBlank())&&(a=this.getComponentOption("replaceBlank")||this.getComponentOption("placeholder"));var f=this.getComponentOption("left"),g=this.getComponentOption("right");a=f?f+a:a,a=g?a+g:a,a=[a]}var h={"n-disabled":!this.isEnabled()};h[this.getComponentCSS("n-label")]=!0;var i=this.getComponentOption("style");return i&&(h["n-label-"+i]=!0),c.createElement("div",{className:e.LayoutHelper.classSet(h)},a.map(function(a,b){return c.createElement("span",{key:b},a)}))},getText:function(){return this.isTextFromModel()?this.getValueFromModel():this.getLayout().getLabel()},isTextFromModel:function(){return this.getComponentOption("textFromModel")!==!1}}));e.Components.NLabel=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Label,function(a,b,d,f){return c.createElement(e.Components.NLabel,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NConfirm",statics:{getConfirmModal:function(a){if(void 0===e.confirmDialog||null===e.confirmDialog){var f=b("#confirm_modal_container");0==f.length&&b("<div id='confirm_modal_container' />").appendTo(b(document.body)),e.confirmDialog=d.render(c.createElement(e.Components.NConfirm,{className:a}),document.getElementById("confirm_modal_container"))}return e.confirmDialog},OK_TEXT:"OK",OK_ICON:"check",CLOSE_TEXT:"Close",CLOSE_ICON:"ban",CANCEL_TEXT:"Cancel",CANCEL_ICON:"ban",Z_INDEX:9698},propTypes:{className:c.PropTypes.string},getDefaultProps:function(){return{}},getInitialState:function(){return{visible:!1,title:null,options:null,onConfirm:null}},fixDocumentPadding:function(){document.body.style.paddingRight=0},componentDidUpdate:function(a,c){this.fixDocumentPadding(),b(document).on("keyup",this.onDocumentKeyUp)},componentDidMount:function(){this.fixDocumentPadding(),b(document).on("keyup",this.onDocumentKeyUp)},componentWillUpdate:function(){b(document).off("keyup",this.onDocumentKeyUp)},componentWillUnmount:function(){b(document).off("keyup",this.onDocumentKeyUp)},renderConfirmButton:function(){if(this.state.options&&this.state.options.disableConfirm)return null;var a=e.createCellLayout("pseudo-button",{label:f.OK_TEXT,comp:{type:e.ComponentConstants.Button,icon:f.OK_ICON,style:"primary",click:this.onConfirmClicked}});return c.createElement(e.Components.NFormButton,{layout:a})},renderCloseButton:function(){if(this.state.options&&this.state.options.disableClose)return null;var a=e.createCellLayout("pseudo-button",{label:this.state.options&&this.state.options.close?f.CLOSE_TEXT:f.CANCEL_TEXT,comp:{type:e.ComponentConstants.Button,icon:this.state.options&&this.state.options.close?f.CLOSE_ICON:f.CANCEL_ICON,style:"danger",click:this.onCancelClicked}});return c.createElement(e.Components.NFormButton,{layout:a})},renderFooter:function(){return this.state.options&&this.state.options.disableButtons?c.createElement("div",{className:"modal-footer-empty"}):c.createElement("div",{className:"modal-footer"},this.renderCloseButton(),this.renderConfirmButton())},renderContent:function(){var a=this.state.options;return"string"==typeof a&&(a=[a]),Array.isArray(a)||(a=a.messages,"string"==typeof a&&(a=[a])),a.map(function(a,b){return c.createElement("h6",{key:b},a)})},render:function(){if(!this.state.visible)return null;var a={"n-confirm":!0,modal:!0,fade:!0,"in":!0};return this.props.className&&(a[this.props.className]=!0),c.createElement("div",null,c.createElement("div",{className:"modal-backdrop fade in",style:{zIndex:f.Z_INDEX}}),c.createElement("div",{className:e.LayoutHelper.classSet(a),tabIndex:"-1",role:"dialog",style:{display:"block",zIndex:f.Z_INDEX+1}},c.createElement("div",{className:"modal-dialog"},c.createElement("div",{className:"modal-content",role:"document"},c.createElement("div",{className:"modal-header"},c.createElement("button",{className:"close",onClick:this.onCancelClicked,"aria-label":"Close",style:{marginTop:"-2px"}},c.createElement("span",{"aria-hidden":"true"},"")),c.createElement("h4",{className:"modal-title"},this.state.title)),c.createElement("div",{className:"modal-body"},this.renderContent()),this.renderFooter()))))},onDocumentKeyUp:function(a){27===a.keyCode&&this.onCancelClicked()},hide:function(){this.setState({visible:!1,title:null,options:null,onConfirm:null,onCancel:null})},onConfirmClicked:function(){this.state.onConfirm&&this.state.onConfirm.call(this),this.hide(),this.state.afterClose&&this.state.afterClose.call(this,"confirm")},onCancelClicked:function(){this.state.onCancel&&this.state.onCancel.call(this),this.hide(),this.state.afterClose&&this.state.afterClose.call(this,"cancel")},show:function(a,c,d,e){b(":focus").blur();var f;"string"==typeof a?f={visible:!0,title:a,options:c,onConfirm:d,onCancel:e,afterClose:c.afterClose}:(c=a,f={visible:!0,title:c.title,options:{disableButtons:c.disableButtons,disableConfirm:c.disableConfirm,disableClose:c.disableClose,close:c.close,messages:c.messages},onConfirm:c.onConfirm,onCancel:c.onCancel,afterClose:c.afterClose}),this.setState(f)}});e.Components.NConfirm=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NModalForm",statics:{createFormModal:function(a,f){void 0===e.formModalIndex||null===e.formModalIndex?e.formModalIndex=1500:e.formModalIndex+=1;var g="form_modal_container_"+e.formModalIndex,h=b("#"+g);0==h.length&&b("<div id='"+g+"' />").appendTo(b(document.body));var i={"n-modal-form":!0};return f&&(i[f]=!0),d.render(c.createElement(e.Components.NModalForm,{title:a,className:e.LayoutHelper.classSet(i),zIndex:e.formModalIndex}),document.getElementById(g))},RESET_CONFIRM_TITLE:"Reset Data",RESET_CONFIRM_MESSAGE:["Are you sure to reset data?","All data will be lost and cannot be recovered."],CANCEL_CONFIRM_TITLE:"Cancel Editing",CANCEL_CONFIRM_MESSAGE:["Are you sure to cancel current operating?","All data will be lost and cannot be recovered."]},propTypes:{title:c.PropTypes.string,className:c.PropTypes.string,zIndex:c.PropTypes.number},getInitialState:function(){return{visible:!1,expanded:!0,collapsible:!1,draggable:!0}},fixDocumentPadding:function(){document.body.style.paddingRight=0},setDraggable:function(){if(this.isDraggable()&&this.refs.top){var c=b(d.findDOMNode(this.refs.top)),e=c.children(".modal");e.drags({handle:".modal-header"}),e.css({overflow:"visible",height:0});var f=e.children(".modal-dialog");if(f.css({height:0}),this.state.modal||c.find(".modal-backdrop").hide(),this.state.pos){var g={top:parseInt(f.css("margin-top")),left:parseInt(f.css("margin-left")),bottom:parseInt(f.css("margin-bottom")),right:parseInt(f.css("margin-right"))},h=f.children(".modal-content"),i={},j=parseInt(h.css("top"));isNaN(j)?null!=this.state.pos.bottom?i.bottom=g.bottom+h.height()-b(a).height():null!=this.state.pos.top&&(i.top=this.state.pos.top-g.top):i.top=j;var k=parseInt(h.css("left"));isNaN(k)?null!=this.state.pos.right?i.right=this.state.pos.right-g.right:null!=this.state.pos.left&&(i.left=this.state.pos.left-g.left):i.left=k,Object.keys(i).length>0&&h.css(i)}}},stopDraggable:function(){if(this.refs.top){var a=b(d.findDOMNode(this.refs.top)),c=a.children(".modal");c.stopDrags({handle:".modal-header"})}},componentDidUpdate:function(a,c){this.fixDocumentPadding(),this.setDraggable(),this.isDialogCloseShown()&&b(document).on("keyup",this.onDocumentKeyUp)},componentWillUpdate:function(){this.stopDraggable(),this.isDialogCloseShown()&&b(document).off("keyup",this.onDocumentKeyUp)},componentDidMount:function(){this.fixDocumentPadding(),this.setDraggable(),this.isDialogCloseShown()&&b(document).on("keyup",this.onDocumentKeyUp)},componentWillUnmount:function(){this.stopDraggable(),this.isDialogCloseShown()&&b(document).off("keyup",this.onDocumentKeyUp)},renderFooter:function(){return this.state.footer!==!1&&this.state.expanded?c.createElement("div",{className:"n-modal-form-footer modal-footer",ref:"footer"},c.createElement(e.Components.NPanelFooter,{reset:this.getResetButton(),validate:this.getValidationButton(),save:this.getSaveButton(),cancel:this.getCancelButton(),left:this.getLeftButton(),right:this.getRightButton(),model:this.getModel(),view:this.isViewMode()})):c.createElement("div",{ref:"footer"})},renderBody:function(){var a={"modal-body":!0,hide:!this.state.expanded};return c.createElement("div",{className:e.LayoutHelper.classSet(a)},c.createElement(e.Components.NForm,{model:this.getModel(),layout:this.getLayout(),direction:this.getDirection(),view:this.isViewMode(),ref:"form"}))},renderCloseButton:function(){return this.isDialogCloseShown()?c.createElement("button",{className:"close",onClick:this.hide,"aria-label":"Close",style:{marginTop:"-2px"}},c.createElement("span",{"aria-hidden":"true"},"")):null},render:function(){if(!this.state.visible)return null;var a=this.state.title?this.state.title:this.props.title;this.isCollapsible()&&(a=c.createElement("a",{href:"javascript:void(0);",onClick:this.onTitleClicked},a));var b={"n-confirm":!0,modal:!0,fade:!0,"in":!0};return this.props.className&&(b[this.props.className]=!0),c.createElement("div",{ref:"top"},c.createElement("div",{className:"modal-backdrop fade in",style:{zIndex:1*this.props.zIndex}}),c.createElement("div",{className:e.LayoutHelper.classSet(b),role:"dialog",style:{display:"block",zIndex:1*this.props.zIndex+1}},c.createElement("div",{className:"modal-dialog"},c.createElement("div",{className:"modal-content",role:"document"},c.createElement("div",{className:"modal-header"},this.renderCloseButton(),c.createElement("h4",{className:"modal-title"},a)),this.renderBody(),this.renderFooter()))))},onDocumentKeyUp:function(a){27===a.keyCode&&this.hide()},onTitleClicked:function(){this.setState({expanded:!this.state.expanded})},onResetClicked:function(){var a=function(){this.getModel().reset(),this.refs.form.forceUpdate()};e.Components.NConfirm.getConfirmModal().show(f.RESET_CONFIRM_TITLE,f.RESET_CONFIRM_MESSAGE,a.bind(this))},onValidateClicked:function(){this.getModel().validate(),this.forceUpdate()},onCancelClicked:function(){this.state.buttons&&"function"==typeof this.state.buttons.cancel?this.hide():e.Components.NConfirm.getConfirmModal().show(f.CANCEL_CONFIRM_TITLE,f.CANCEL_CONFIRM_MESSAGE,this.hide)},getModel:function(){return this.state.model},getLayout:function(){return this.state.layout},getDirection:function(){return this.state.direction},getLeftButton:function(){return this.state.buttons?this.state.buttons.left:null},getRightButton:function(){return this.state.buttons?this.state.buttons.right:null},getValidationButton:function(){return this.state.buttons&&this.state.buttons.validate===!1?null:this.isViewMode()?null:this.onValidateClicked},getCancelButton:function(){return this.state.buttons&&this.state.buttons.cancel===!1?null:this.onCancelClicked},getResetButton:function(){return this.state.buttons&&this.state.buttons.reset===!1?null:this.isViewMode()?null:this.onResetClicked},getSaveButton:function(){return this.state.buttons?this.state.buttons.save:null},isDialogCloseShown:function(){return this.state.buttons?this.state.buttons.dialogCloseShown!==!1:!0},isDraggable:function(){return this.state.draggable||!this.state.modal},isCollapsible:function(){return this.state.collapsible},isExpanded:function(){return this.state.expanded},isViewMode:function(){return this.state.view},validate:function(){return this.getModel().validate(),this.forceUpdate(),this.getModel().hasError()},hide:function(){var a=this.state.model;return this.state.buttons&&"function"==typeof this.state.buttons.cancel?this.state.buttons.cancel.call(this,a,function(){this.setState({visible:!1,model:null,layout:null,buttons:null})}.bind(this)):this.setState({visible:!1,model:null,layout:null,buttons:null}),a},show:function(b,c,d,e,f,g){b.getCurrentModel?(a.console.warn("Properties [draggable, expanded, collapsible, pos] are not supported in parameters, use JSON parameter instead."),this.setState({visible:!0,model:b,layout:c,buttons:d,direction:e,footer:f,title:g,draggable:!1,modal:!0,expanded:!0,collapsible:!1,view:!1})):this.setState({visible:!0,model:b.model,layout:b.layout,buttons:b.buttons,direction:b.direction,footer:b.footer,title:b.title,draggable:b.draggable,modal:null==b.modal&&b.draggable?!1:!0,collapsible:b.collapsible,expanded:null==b.expanded?!0:b.expanded,pos:b.pos,view:b.view===!0})}});e.Components.NModalForm=f,b.fn.drags=function(a){
a=b.extend({handle:"",cursor:"move"},a);var c=null;return c=""===a.handle?this:this.find(a.handle),c.css("cursor",a.cursor).on("mousedown",function(c){var d=null;d=""===a.handle?b(this).addClass("draggable"):b(this).addClass("active-handle").parent().addClass("draggable");var e=d.css("z-index"),f=d.outerHeight(),g=d.outerWidth(),h=d.offset().top+f-c.pageY,i=d.offset().left+g-c.pageX;d.parents().on("mousemove",function(a){b(".draggable").offset({top:a.pageY+h-f,left:a.pageX+i-g}).on("mouseup",function(){b(this).removeClass("draggable").css("z-index",e)})}),c.preventDefault()}).on("mouseup",function(){""===a.handle?b(this).removeClass("draggable"):b(this).removeClass("active-handle").parent().removeClass("draggable")})},b.fn.stopDrags=function(a){a=b.extend({handle:"",cursor:"move"},a);var c=null;c=""===a.handle?this:this.find(a.handle);var d=null;return d=""===a.handle?b(c):b(c).parent(),d.parents().off("mousemove"),c.off("mousedown mouseup")}}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NNormalLabel",propTypes:{text:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.arrayOf(c.PropTypes.string)]),style:c.PropTypes.string,className:c.PropTypes.string},getDefaultProps:function(){return{}},render:function(){var a=this.getText();Array.isArray(a)||(a=[a]);var b={"n-normal-label":!0};return this.props.className&&(b[this.props.className]=!0),this.props.style&&(b["n-label-"+this.props.style]=!0),this.props.size&&(b["n-label-"+this.props.size]=!0),c.createElement("span",{className:e.LayoutHelper.classSet(b)},a.map(function(a,b){return c.createElement("span",{key:b},a)}))},getText:function(){return this.props.text}});e.Components.NNormalLabel=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NOnRequestModal",statics:{getOnRequestModal:function(a){if(void 0===e.onRequestDialog||null===e.onRequestDialog){var f=b("#onrequest_modal_container");0==f.length&&b("<div id='onrequest_modal_container' />").appendTo(b(document.body)),e.onRequestDialog=d.render(c.createElement(e.Components.NOnRequestModal,{className:a}),document.getElementById("onrequest_modal_container"))}return e.onRequestDialog},WAITING_MESSAGE:"Send request to server and waiting for response...",Z_INDEX:9898},propTypes:{className:c.PropTypes.string},getInitialState:function(){return{visible:!1}},fixDocumentPadding:function(){document.body.style.paddingRight=0},componentDidUpdate:function(a,b){this.fixDocumentPadding()},componentDidMount:function(){this.fixDocumentPadding()},render:function(){if(!this.state.visible)return null;var a={"n-on-request":!0,modal:!0,fade:!0,"in":!0};return this.props.className&&(a[this.props.className]=!0),c.createElement("div",null,c.createElement("div",{className:"modal-backdrop fade in",style:{zIndex:f.Z_INDEX}}),c.createElement("div",{className:e.LayoutHelper.classSet(a),tabIndex:"-1",role:"dialog",style:{display:"block",zIndex:f.Z_INDEX+1}},c.createElement("div",{className:"modal-danger modal-dialog"},c.createElement("div",{className:"modal-content",role:"document"},c.createElement("div",{className:"modal-body",ref:"body"},c.createElement("span",{className:"fa fa-fw fa-lg fa-spin fa-spinner"})," ",f.WAITING_MESSAGE)))))},hide:function(){this.setState({visible:!1})},show:function(){this.setState({visible:!0})}});e.Components.NOnRequestModal=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NPageFooter",statics:{TECH_BASE:"Parrot",TECH_URL:"https://github.com/bradwoo8621/parrot",COMPANY:"NEST",COMPANY_URL:"https://github.com/bradwoo8621/nest",LEFT_TEXT:"For best viewing, we recommend using the latest Chrome version."},propTypes:{name:c.PropTypes.string.isRequired},getDefaultProps:function(){return{}},renderTech:function(){return null==f.TECH_BASE||f.TECH_BASE.isBlank()?null:c.createElement("span",null,", on ",c.createElement("a",{href:f.TECH_URL,target:"_blank",tabIndex:"-1"},f.TECH_BASE))},renderCompany:function(){return null==f.COMPANY||f.COMPANY.isBlank()?null:c.createElement("span",null,", by ",c.createElement("a",{href:f.COMPANY_URL,target:"_blank",tabIndex:"-1"},f.COMPANY))},render:function(){return c.createElement("footer",{className:"footer"},c.createElement("div",{className:"container"},c.createElement("p",{className:"text-muted",style:{display:"inline-block"}},c.createElement("span",null,f.LEFT_TEXT)),c.createElement("p",{className:"text-muted pull-right",style:{display:"inline-block"}},this.props.name,this.renderTech(),this.renderCompany(),".")))}});e.Components.NPageFooter=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NPageHeader",statics:{SEARCH_PLACEHOLDER:"Search..."},propTypes:{brand:c.PropTypes.oneOfType([c.PropTypes.object,c.PropTypes.string]).isRequired,brandUrl:c.PropTypes.string,brandFunc:c.PropTypes.func,menus:c.PropTypes.array,side:c.PropTypes.bool,search:c.PropTypes.func},getDefaultProps:function(){return{side:!1}},getInitialState:function(){return{model:e.createModel({text:null})}},renderSearchBox:function(){var a=e.createCellLayout("text",{comp:{placeholder:f.SEARCH_PLACEHOLDER,rightAddon:{icon:"search",click:this.onSearchClicked}}});return c.createElement("div",{className:"navbar-form navbar-right",role:"search"},c.createElement(e.Components.NText,{model:this.state.model,layout:a}))},renderMenuItem:function(a,b,d,e){if(void 0!==a.children){var f=this;return c.createElement("li",{className:e?"dropdown":"dropdown-submenu",key:b},c.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",role:"button","aria-expanded":"false"},a.text," ",e?c.createElement("span",{className:"caret"}):null),c.createElement("ul",{className:"dropdown-menu",role:"menu"},a.children.map(function(a,b,c){return f.renderMenuItem(a,b,c,!1)})))}return a.divider===!0?c.createElement("li",{className:"divider",key:b}):void 0!==a.func?c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);",onClick:this.onMenuClicked.bind(this,a.func),key:b},a.text)):c.createElement("li",{key:b},c.createElement("a",{href:a.url},a.text))},renderMenus:function(){var a=this;this.props.side&&(this.state.sideMenu=NSideMenu.getSideMenu(this.props.menus,null,null,!0));var b={"nav navbar-nav":!0};return this.props.side&&(b["nav-side"]=!0),c.createElement("ul",{className:e.LayoutHelper.classSet(b)},this.props.menus.map(function(b,c,d){return a.renderMenuItem(b,c,d,!0)}))},renderBrand:function(){return this.props.brandUrl?c.createElement("a",{href:this.props.brandUrl},c.createElement("span",{className:"navbar-brand"},this.props.brand)):this.props.brandFunc||this.props.side?c.createElement("a",{href:"javascript:void(0);",onMouseEnter:this.onBrandMouseEnter,onMouseLeave:this.onBrandMouseLeave,onClick:this.onBrandClicked},c.createElement("span",{className:"navbar-brand"},this.props.brand)):c.createElement("span",{className:"navbar-brand"},this.props.brand)},onBrandMouseEnter:function(){this.props.side&&this.state.sideMenu&&this.state.sideMenu.show()},onBrandMouseLeave:function(){this.props.side&&this.state.sideMenu&&this.state.sideMenu.willHide()},onBrandClicked:function(){this.props.brandFunc&&this.props.brandFunc.call(this)},onMenuClicked:function(a){a.call(this)},onSearchClicked:function(){this.props.search.call(this,this.state.model.get("text"))},render:function(){return c.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},c.createElement("div",{className:"container-fluid"},c.createElement("div",{className:"navbar-header"},c.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar-1"},c.createElement("span",{className:"sr-only"},"Toggle navigation"),c.createElement("span",{className:"icon-bar"}),c.createElement("span",{className:"icon-bar"}),c.createElement("span",{className:"icon-bar"})),this.renderBrand()),c.createElement("div",{className:"collapse navbar-collapse",id:"navbar-1"},this.props.menus?this.renderMenus():null,this.props.search?this.renderSearchBox():null,this.props.custom?this.props.custom.call(this):null)))}});e.Components.NPageHeader=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NPagination",propTypes:{maxPageButtons:c.PropTypes.number,pageCount:c.PropTypes.number,currentPageIndex:c.PropTypes.number,toPage:c.PropTypes.func.isRequired,className:c.PropTypes.string,showStatus:c.PropTypes.bool},getDefaultProps:function(){return{maxPageButtons:5,pageCount:1,currentPageIndex:1,showStatus:!0}},getMaxPageButtons:function(){var a=1*this.props.maxPageButtons;return a%2==0&&(a-=1),3>a&&(a=3),a},getPageButtonsRange:function(){var a=this.getCurrentPageIndex(),b=this.getMaxPageButtons(),c=0,d=this.getPageCount()-a,e=Math.floor(b/2);d>=e?c=a+e:(c=a+d,e+=e-d);var f=0,g=a-1;return f=g>=e?a-e:1,b>c-f&&(c=f+b-1,c=c>this.getPageCount()?this.getPageCount():c),{min:f,max:c}},renderFirst:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"First",onClick:this.toFirst},c.createElement("span",{className:"fa fa-fw fa-fast-backward"})))},renderPreviousSection:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"PreviousSection",onClick:this.toPreviousSection},c.createElement("span",{className:"fa fa-fw fa-backward"})))},renderPrevious:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"Previous",onClick:this.toPrevious},c.createElement("span",{className:"fa fa-fw fa-chevron-left"})))},renderButtons:function(a){for(var b=[],d=a.min;d<=a.max;d++)b.push(d);var f=this;return b.map(function(a){var b={active:a==f.getCurrentPageIndex()};return c.createElement("li",{key:a},c.createElement("a",{href:"javascript:void(0);",onClick:f.toPage,"data-index":a,className:e.LayoutHelper.classSet(b)},a))})},renderNext:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"Next",onClick:this.toNext},c.createElement("span",{className:"fa fa-fw fa-chevron-right"})))},renderNextSection:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"NextSection",onClick:this.toNextSection},c.createElement("span",{className:"fa fa-fw fa-forward"})))},renderLast:function(a){return c.createElement("li",null,c.createElement("a",{href:"javascript:void(0);","aria-label":"Last",onClick:this.toLast},c.createElement("span",{className:"fa fa-fw fa-fast-forward"})))},renderStatus:function(){return this.props.showStatus?c.createElement("div",{className:"n-pagination-status col-sm-2 col-md-2 col-lg-2"},c.createElement("div",null,"Page: ",this.getCurrentPageIndex()," / ",this.getPageCount())):null},render:function(){var a=this.getPageButtonsRange(),b={row:!0,"n-pagination":!0};this.props.className&&(b[this.props.className]=!0);var d={"n-pagination-buttons":!0,"col-sm-10 col-md-10 col-lg-10":this.props.showStatus,"col-sm-12 col-md-12 col-lg-12":!this.props.showStatus};return c.createElement("div",{className:e.LayoutHelper.classSet(b)},this.renderStatus(),c.createElement("div",{className:e.LayoutHelper.classSet(d)},c.createElement("ul",{className:"pagination"},this.renderFirst(a),this.renderPreviousSection(a),this.renderPrevious(a),this.renderButtons(a),this.renderNext(a),this.renderNextSection(a),this.renderLast(a))))},getCurrentPageIndex:function(a){return a?b(a).attr("data-index"):1*this.props.currentPageIndex},getPageCount:function(){return 1*this.props.pageCount},toFirst:function(){this.jumpTo(1)},toPreviousSection:function(){var a=this.getCurrentPageIndex()-this.getMaxPageButtons();a=1>a?1:a,this.jumpTo(a)},toPrevious:function(){var a=this.getCurrentPageIndex()-1;this.jumpTo(1>a?1:a)},toPage:function(a){this.jumpTo(this.getCurrentPageIndex(a.target))},toNext:function(){var a=this.getCurrentPageIndex()+1;this.jumpTo(a>this.getPageCount()?this.getPageCount():a)},toNextSection:function(){var a=this.getCurrentPageIndex()+this.getMaxPageButtons();a=a>this.getPageCount()?this.getPageCount():a,this.jumpTo(a)},toLast:function(){this.jumpTo(this.getPageCount())},jumpTo:function(a){a=1*a,b(":focus").blur(),a-this.getCurrentPageIndex()!=0&&this.props.toPage&&this.props.toPage.call(this,a)}});e.Components.NPagination=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NPanel",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,direction:c.PropTypes.oneOf(["vertical","horizontal"])},componentWillUpdate:function(a){this.hasCheckInTitle()&&this.getModel().removeListener(this.getCheckInTitleDataId(),"post","change",this.onTitleCheckChanged),this.removeDependencyMonitor(this.getDependencies("collapsedLabel")),this.removeDependencyMonitor(this.getDependencies("expandedLabel")),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.hasCheckInTitle()&&this.getModel().addListener(this.getCheckInTitleDataId(),"post","change",this.onTitleCheckChanged),this.addDependencyMonitor(this.getDependencies("collapsedLabel")),this.addDependencyMonitor(this.getDependencies("expandedLabel")),this.registerToComponentCentral()},componentDidMount:function(){this.hasCheckInTitle()&&this.getModel().addListener(this.getCheckInTitleDataId(),"post","change",this.onTitleCheckChanged),this.addDependencyMonitor(this.getDependencies("collapsedLabel")),this.addDependencyMonitor(this.getDependencies("expandedLabel")),this.registerToComponentCentral()},componentWillUnmount:function(){this.hasCheckInTitle()&&this.getModel().removeListener(this.getCheckInTitleDataId(),"post","change",this.onTitleCheckChanged),this.removeDependencyMonitor(this.getDependencies("collapsedLabel")),this.removeDependencyMonitor(this.getDependencies("expandedLabel")),this.unregisterFromComponentCentral()},getDefaultProps:function(){return{defaultOptions:{collapsible:!1,expanded:!0,style:"default"}}},getInitialState:function(){return{expanded:null}},renderCheckInTitle:function(){if(!this.hasCheckInTitle())return null;var a={label:this.getCheckInTitleLabel(),dataId:this.getCheckInTitleDataId(),comp:b.extend({labelAttached:"left"},this.getCheckInTitleOption(),{type:e.ComponentConstants.Check,labelDirection:"horizontal"})};return c.createElement("div",null,"(",c.createElement(e.Components.NCheck,{model:this.getModel(),layout:e.createCellLayout("check",a),view:this.isViewMode()}),")")},renderHeading:function(){var a=this.getTitle(),b={"panel-title":!0};return this.isCollapsible()?(b["n-collapsible-title-check"]=this.hasCheckInTitle(),c.createElement("div",{className:"panel-heading"},c.createElement("h4",{className:e.LayoutHelper.classSet(b)},c.createElement("a",{href:"javascript:void(0);",onClick:this.onTitleClicked,ref:"head"},a),this.renderCheckInTitle()))):this.hasCheckInTitle()?(b["n-normal-title-check"]=this.hasCheckInTitle(),c.createElement("div",{className:"panel-heading"},c.createElement("h4",{className:e.LayoutHelper.classSet(b)},c.createElement("span",{ref:"head"},a),this.renderCheckInTitle()))):c.createElement("div",{className:"panel-heading",ref:"head"},a)},renderRow:function(a,b){var d=this,f=a.getCells().map(function(a,f){return c.createElement(e.Components.NFormCell,{layout:a,model:d.getModel(),ref:a.getId(),direction:d.props.direction,view:d.isViewMode(),key:""+b+"-"+f})});return c.createElement("div",{className:"row",key:b},f)},render:function(){var a=this.getLayout().getLabel();if(null==a)return c.createElement("div",{ref:"panel"},this.getInnerLayout().getRows().map(this.renderRow));var b={panel:!0};b["panel-"+this.getStyle()]=!0,b[this.getComponentCSS("n-panel")]=!0;var d={display:this.isInitExpanded()?"block":"none"};return c.createElement("div",{className:e.LayoutHelper.classSet(b),ref:"panel"},this.renderHeading(),c.createElement("div",{className:"panel-body",style:d,ref:"body"},this.getInnerLayout().getRows().map(this.renderRow)))},getInnerLayout:function(){return e.createSectionLayout({layout:this.getComponentOption("editLayout")})},isCollapsible:function(){return this.getComponentOption("collapsible")},isInitExpanded:function(){if(null==this.state.expanded&&(this.state.expanded=this.getComponentOption("expanded"),this.hasCheckInTitle())){var a=this.getCheckInTitleValue(),b=this.getCheckInTitleCollapsible();"same"===b?this.state.expanded=this.state.expanded&&a===!0:"reverse"===b&&(this.state.expanded=this.state.expanded&&a!==!0)}return this.state.expanded},getStyle:function(){return this.getComponentOption("style")},getTitle:function(){var a=this.getLayout().getLabel();if(this.state.expanded){var b=this.getExpandedLabelRenderer();b&&(a="string"==typeof b?b:b.when.call(this,this.getModel()))}else{var c=this.getCollapsedLabelRenderer();c&&(a="string"==typeof c?c:c.when.call(this,this.getModel()))}return a},getExpandedLabelRenderer:function(){return this.getComponentOption("expandedLabel")},getCollapsedLabelRenderer:function(){return this.getComponentOption("collapsedLabel")},hasCheckInTitle:function(){return null!=this.getComponentOption("checkInTitle")},getCheckInTitleValue:function(){var a=this.getCheckInTitleDataId();return a?this.getModel().get(a):null},getCheckInTitleDataId:function(){var a=this.getComponentOption("checkInTitle");return a?a.data:null},getCheckInTitleLabel:function(){var a=this.getComponentOption("checkInTitle");return a?a.label:null},getCheckInTitleCollapsible:function(){var a=this.getComponentOption("checkInTitle");return a?a.collapsible:null},getCheckInTitleOption:function(){var a=this.getComponentOption("checkInTitle");if(a){var c=b.extend({},a);return delete c.data,delete c.label,delete c.collapsible,c}return null},onTitleClicked:function(a){a.selected=!1,a.preventDefault(),this.toggleExpanded(!this.state.expanded)},onTitleCheckChanged:function(a){var b=a["new"],c=this.getCheckInTitleCollapsible();"same"===c?this.toggleExpanded(b):"reverse"===c&&this.toggleExpanded(!b)},toggleExpanded:function(a){a?this.canExpanded()&&b(d.findDOMNode(this.refs.body)).slideDown(300,function(){this.setState({expanded:!0})}.bind(this)):b(d.findDOMNode(this.refs.body)).slideUp(300,function(){this.setState({expanded:!1})}.bind(this))},canExpanded:function(){if(this.hasCheckInTitle()){var a=this.getCheckInTitleValue(),b=this.getCheckInTitleCollapsible();if("same"===b)return a===!0;if("reverse"===b)return a!==!0}return!0}}));e.Components.NPanel=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Panel,function(a,b,d,f){return c.createElement(e.Components.NPanel,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NPanelFooter",statics:{RESET_TEXT:"Reset",RESET_ICON:"reply-all",RESET_STYLE:"warning",VALIDATE_TEXT:"Validate",VALIDATE_ICON:"bug",VALIDATE_STYLE:"default",SAVE_TEXT:"Save",SAVE_ICON:"floppy-o",SAVE_STYLE:"primary",CANCEL_TEXT:"Cancel",CANCEL_ICON:"ban",CANCEL_STYLE:"danger"},propTypes:{save:c.PropTypes.func,validate:c.PropTypes.func,cancel:c.PropTypes.func,reset:c.PropTypes.func,model:c.PropTypes.object,view:c.PropTypes.bool},componentWillUpdate:function(a){},componentDidUpdate:function(a,b){},componentDidMount:function(){},componentWillUnmount:function(){},renderLeftButtons:function(){return this.props.left?Array.isArray(this.props.left)?this.props.left.map(this.renderButton):this.renderButton(this.props.left):null},renderRightButtons:function(){return this.props.right?Array.isArray(this.props.right)?this.props.right.map(this.renderButton):this.renderButton(this.props.right):null},renderButton:function(a,b){if(this.isViewMode()&&"edit"==a.view)return null;if(!this.isViewMode()&&"view"==a.view)return null;var d={label:a.text,comp:{type:e.ComponentConstants.Button,icon:a.icon,style:a.style,click:a.click,enabled:a.enabled,visible:a.visible}};return c.createElement(e.Components.NFormButton,{model:this.getModel(),layout:e.createCellLayout("pseudo-button",d),key:b})},render:function(){return c.createElement("div",{className:"row n-panel-footer"},c.createElement("div",{className:"col-sm-12 col-md-12 col-lg-12"},c.createElement("div",{className:"btn-toolbar n-panel-footer-left",role:"toolbar"},this.props.reset?this.renderButton({icon:f.RESET_ICON,text:f.RESET_TEXT,style:f.RESET_STYLE,click:this.props.reset.click?this.props.reset.click:this.props.reset,enabled:this.props.reset.enabled?this.props.reset.enabled:!0,visible:this.props.reset.visible?this.props.reset.visible:!0}):null,this.props.validate?this.renderButton({icon:f.VALIDATE_ICON,text:f.VALIDATE_TEXT,style:f.VALIDATE_STYLE,click:this.props.validate.click?this.props.validate.click:this.props.validate,enabled:this.props.validate.enabled?this.props.validate.enabled:!0,visible:this.props.validate.visible?this.props.validate.visible:!0}):null,this.renderLeftButtons()),c.createElement("div",{className:"btn-toolbar n-panel-footer-right",role:"toolbar"},this.props.cancel?this.renderButton({icon:f.CANCEL_ICON,text:f.CANCEL_TEXT,style:f.CANCEL_STYLE,click:this.props.cancel.click?this.props.cancel.click:this.props.cancel,enabled:this.props.cancel.enabled?this.props.cancel.enabled:!0,visible:this.props.cancel.visible?this.props.cancel.visible:!0}):null,this.props.save?this.renderButton({icon:f.SAVE_ICON,text:f.SAVE_TEXT,style:f.SAVE_STYLE,click:this.props.save.click?this.props.save.click:this.props.save,enabled:this.props.save.enabled?this.props.save.enabled:!0,visible:this.props.save.visible?this.props.save.visible:!0}):null,this.renderRightButtons())))},getModel:function(){return this.props.model},isViewMode:function(){return this.props.view}});e.Components.NPanelFooter=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NRadio",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{direction:"horizontal",labelAtLeft:!1}}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderLabel:function(a,b){var d={"radio-label":!0,disabled:!this.isEnabled(),"radio-label-left":b};return c.createElement("span",{className:e.LayoutHelper.classSet(d),onClick:this.isEnabled()&&!this.isViewMode()?this.onButtonClicked.bind(this,a):null},a.text)},renderRadio:function(a,b){var d=this.getValueFromModel()==a.id,f=this.isEnabled(),g={disabled:!f,checked:d,"radio-container":!0},h=this.isLabelAtLeft();return c.createElement("div",{className:"n-radio-option",key:b},h?this.renderLabel(a,!0):null,c.createElement("div",{className:"radio-container"},c.createElement("span",{className:e.LayoutHelper.classSet(g),onClick:f&&!this.isViewMode()?this.onButtonClicked.bind(this,a):null,onKeyUp:f&&!this.isViewMode()?this.onKeyUp.bind(this,a):null,tabIndex:"0",ref:"out-"+a.id},c.createElement("span",{className:"check",onClick:this.onInnerClicked.bind(this,a)}))),h?null:this.renderLabel(a,!1))},render:function(){var a={"n-radio":!0,vertical:"vertical"===this.getComponentOption("direction"),"n-disabled":!this.isEnabled(),"n-view-mode":this.isViewMode()};return c.createElement("div",{className:this.getComponentCSS(e.LayoutHelper.classSet(a))},this.getComponentOption("data").map(this.renderRadio))},onInnerClicked:function(a){b(d.findDOMNode(this.refs["out-"+a.id])).focus()},onButtonClicked:function(a){this.setValueToModel(a.id)},onKeyUp:function(a,b){"32"==b.keyCode&&this.onButtonClicked(a)},onModelChanged:function(a){this.forceUpdate()},isLabelAtLeft:function(){return this.getComponentOption("labelAtLeft")}}));e.Components.NRadio=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Radio,function(a,b,d,f){return c.createElement(e.Components.NRadio,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NSearchText",statics:{ADVANCED_SEARCH_BUTTON_ICON:"search",ADVANCED_SEARCH_DIALOG_NAME_LABEL:"Name",ADVANCED_SEARCH_DIALOG_BUTTON_TEXT:"Search",ADVANCED_SEARCH_DIALOG_CODE_LABEL:"Code",ADVANCED_SEARCH_DIALOG_RESULT_TITLE:"Search Result",NOT_FOUND:"Not Found"},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,view:c.PropTypes.bool},getDefaultProps:function(){return{defaultOptions:{}}},getInitialState:function(){return{stopRetrieveLabelFromRemote:!1}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.initSetValues(),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.initSetValues(),this.addPostChangeListener(this.onModelChange),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChange),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},render:function(){if(this.isViewMode())return this.renderInViewMode();var a=this.isEnabled(),b={"n-search-text":!0};a||(b["n-disabled"]=!0);var d={width:"0"};return c.createElement("div",{className:this.getComponentCSS(e.LayoutHelper.classSet(b))},c.createElement("div",{className:"input-group"},c.createElement("input",{type:"text",className:"form-control search-code",onKeyUp:this.onComponentChange,ref:"code",disabled:!a,onFocus:this.onComponentFocused,onBlur:this.onComponentBlurred}),c.createElement("span",{className:"input-group-btn",style:d}),c.createElement("input",{type:"text",className:"form-control search-label",onFocus:this.onLabelFocused,ref:"label",disabled:!a}),c.createElement("span",{className:"input-group-addon advanced-search-btn",onClick:a?this.showAdvancedSearchDialog:null},c.createElement("span",{className:"fa fa-fw fa-"+f.ADVANCED_SEARCH_BUTTON_ICON})),this.renderNormalLine(),this.renderFocusLine()))},onLabelFocused:function(){this.getComponent().focus()},onComponentFocused:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentBlurred:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentChange:function(a){a.target.value;this.setValueToModel(a.target.value)},onModelChange:function(a){var b=a["new"];this.getComponent().val(b),this.retrieveAndSetLabelTextFromRemote(b)},showAdvancedSearchDialog:function(){this.state.searchDialog||(this.state.searchDialog=e.Components.NModalForm.createFormModal(this.getLayout().getLabel(),"advanced-search-dialog")),this.state.searchDialog.show({model:this.getAdvancedSearchDialogModel(),layout:this.getAdvancedSearchDialogLayout(),buttons:{reset:!1,validate:!1,cancel:!1}})},pickupAdvancedResultItem:function(a){this.state.stopRetrieveLabelFromRemote=!0,this.getModel().set(this.getDataId(),a.code),this.setLabelText(a.name),this.state.stopRetrieveLabelFromRemote=!1},initSetValues:function(){var a=this.getValueFromModel();this.getComponent().val(a);var b=this.getComponentOption("labelPropId");b?this.setLabelText(this.getModel().get(b)):this.retrieveAndSetLabelTextFromRemote(a)},setLabelText:function(a){if(this.isViewMode()){var c=this.getValueFromModel();if(null==c)b(d.findDOMNode(this.refs.viewLabel)).text("");else{var e=c;e+=null==a?" - "+f.NOT_FOUND:" - "+a,b(d.findDOMNode(this.refs.viewLabel)).text(e)}}else b(d.findDOMNode(this.refs.label)).val(a)},retrieveAndSetLabelTextFromRemote:function(b){if(null!=this.state.search&&clearTimeout(this.state.search),!this.state.stopRetrieveLabelFromRemote){var c=this.getSearchTriggerDigits();if(null==c)throw new e.createComponentException(e.ComponentConstants.Err_Search_Text_Trigger_Digits_Not_Defined,"Trigger digits cannot be null in search text.");if(null==b||b.isBlank()||b.length!=c&&-1!=c)return void this.setLabelText(null);var d=this;this.state.search=setTimeout(function(){e.doPost(d.getSearchUrl(),{code:b},{quiet:!0}).done(function(a){"string"==typeof a&&(a=JSON.parse(a)),d.setLabelText(a.name)}).fail(function(){a.console.error("Error occured when retrieve label from remote in NSearch."),arguments.slice(0).forEach(function(b){a.console.error(b)})})},300)}},getSearchUrl:function(){return this.getComponentOption("searchUrl")},getAdvancedSearchUrl:function(){return this.getComponentOption("advancedUrl")},getSearchTriggerDigits:function(){return this.getComponentOption("searchTriggerDigits")},getComponent:function(){return b(d.findDOMNode(this.refs.code))},getAdvancedSearchDialogModel:function(){var a=this.getComponentOption("searchDialogModel");return null==a&&(a={name:null,countPerPage:10,pageIndex:1,items:null,criteria:{pageIndex:1,pageCount:1,countPerPage:10}}),e.createModel(a)},getAdvancedSearchDialogLayout:function(){var c=this,d=this.getComponentOption("searchDialogLayout");if(null==d){var g=this.props.direction;g||(g=NForm.LABEL_DIRECTION);var h={"pull-right":!0,"pull-down":"vertical"==g};d={name:{label:f.ADVANCED_SEARCH_DIALOG_NAME_LABEL,comp:{type:e.ComponentConstants.Text},pos:{row:10,col:10,width:6}},button:{label:f.ADVANCED_SEARCH_DIALOG_BUTTON_TEXT,comp:{type:e.ComponentConstants.Button,style:"primary",click:function(d){var f=b.extend({},d.getCurrentModel());delete f.items,delete f.criteria,e.doPost(c.getAdvancedSearchUrl(),f,{done:function(b){"string"==typeof b&&(b=JSON.parse(b)),d.mergeCurrentModel(b),d.set("criteria_url",this.getAdvancedSearchUrl()),a.console.debug(d.getCurrentModel()),this.state.searchDialog.forceUpdate()}.bind(c)})}},css:{comp:e.LayoutHelper.classSet(h)},pos:{row:10,col:20,width:6}},items:{label:f.ADVANCED_SEARCH_DIALOG_RESULT_TITLE,comp:{type:e.ComponentConstants.Table,indexable:!0,searchable:!1,rowOperations:{icon:"check",click:function(a){c.pickupAdvancedResultItem(a),c.state.searchDialog.hide()}},pageable:!0,criteria:"criteria",columns:[{title:f.ADVANCED_SEARCH_DIALOG_CODE_LABEL,width:200,data:"code"},{title:f.ADVANCED_SEARCH_DIALOG_NAME_LABEL,width:400,data:"name"}]},pos:{row:20,col:10,width:12}}}}else d=d.call(this);return e.createFormLayout(d)},getTextInViewMode:function(){var a=this.getValueFromModel();return a}}));e.Components.NSearchText=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Search,function(a,b,d,f){return c.createElement(e.Components.NSearchText,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NSelect2",statics:{PLACEHOLDER:"Please Select..."},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,view:c.PropTypes.bool},getDefaultProps:function(){return{defaultOptions:{allowClear:!0,minimumResultsForSearch:1,width:"100%",data:[],availableWhenNoParentValue:!1}}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){if(a.model!=this.props.model){var c=this.createDisplayOptions({allowClear:null,placeholder:null,minimumResultsForSearch:null,data:null});this.resetOptions(c)}this.getComponent().val(this.getValueFromModel()).trigger("change"),this.addEnableDependencyMonitor(),this.addPostChangeListener(this.onModelChanged),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),
this.removeTooltip(),this.registerToComponentCentral()},componentDidMount:function(){this.createComponent(),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.removeTooltip(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.getComponent().next("span").remove(),this.unregisterFromComponentCentral()},createComponent:function(){var a=this.createDisplayOptions({allowClear:null,placeholder:null,minimumResultsForSearch:null,data:null},this.getLayout());this.getComponent().fireOnDisable().select2(a).val(this.getValueFromModel()).trigger("change").change(this.onComponentChanged),this.renderBorderBottom()},renderBorderBottom:function(){var a=b(d.findDOMNode(this.refs.div)),c=a.find(".select2-selection");0==c.find("hr.normal-line").length&&c.append('<hr class="'+this.getAdditionalCSS("normal-line","normal-line")+'"/>').append('<hr class="'+this.getAdditionalCSS("focus-line","focus-line")+'"/>')},createDisplayOptions:function(a){var b=this;return Object.keys(a).forEach(function(c){a[c]=b.getComponentOption(c)}),null==a.placeholder&&(a.placeholder=f.PLACEHOLDER),this.hasParent()?a.data=this.getAvailableOptions(this.getParentPropertyValue()):a.data=this.convertDataOptions(a.data),a.multiple=!1,a},convertDataOptions:function(a){return Array.isArray(a)?a:a.list()},removeTooltip:function(){var a=b(d.findDOMNode(this.refs.div)),c=a.find(".select2-selection__rendered");c.removeAttr("title")},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"n-disabled":!this.isEnabled()};return a[this.getComponentCSS("n-select")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a),ref:"div"},c.createElement("select",{style:{width:this.getComponentOption("width")},disabled:!this.isEnabled(),ref:"select"}))},onComponentChanged:function(a){var b=this.getComponent().val();b!=this.getValueFromModel()&&this.setValueToModel(this.getComponent().val()),this.removeTooltip()},onModelChanged:function(a){var b=this.getComponent().val();b!=a["new"]&&this.forceUpdate()},onParentModelChanged:function(a){var b=this.getAvailableOptions(a["new"]);this.resetOptions({data:b})},getParentModel:function(){var a=this.getComponentOption("parentModel");return null==a?this.getModel():a},getParentPropertyValue:function(){return this.getParentModel().get(this.getParentPropertyId())},getParentPropertyId:function(){return this.getComponentOption("parentPropId")},hasParent:function(){return null!=this.getParentPropertyId()},getAvailableOptions:function(a){if(null==a)return this.isAvailableWhenNoParentValue()?this.convertDataOptions(this.getComponentOption("data")):[];var c=this.getComponentOption("parentFilter");if("object"==typeof c)return this.convertDataOptions(this.getComponentOption("data").filter(b.extend({},c,{value:a})));var d=this.convertDataOptions(this.getComponentOption("data"));return"function"==typeof c?c.call(this,a,d):d.filter(function(b){return b[c]==a})},isAvailableWhenNoParentValue:function(){return this.hasParent()?this.getComponentOption("availableWhenNoParentValue"):!0},resetOptions:function(a){if(!this.isViewMode()){var c=this.getComponent(),d=this.getValueFromModel(),e=!1,f=c.data("select2").options.options;c.html(""),b.extend(f,a);var g="";f.data.forEach(function(a){a.id==d?(g+='<option value="'+a.id+'"'+(a.id==d?" selected":"")+">"+a.text+"</option>",e=!0):g+='<option value="'+a.id+'">'+a.text+"</option>"}),c.append(g),c.select2(f),this.renderBorderBottom(),e||c.val("").trigger("change")}},getComponent:function(){return b(d.findDOMNode(this.refs.select))},getTextInViewMode:function(){var a=this.getValueFromModel();if(null!=a){var b=null;b=this.hasParent()?this.getAvailableOptions(this.getParentPropertyValue()):this.convertDataOptions(this.getComponentOption("data")),b.some(function(b){return b.id==a?(a=b.text,!0):!1})}return a}}));!function(b){"use strict";b.fn.fireOnDisable=function(c){if(!("onpropertychange"in document.createElement("input"))||void 0===Object.getOwnPropertyDescriptor)return this;var d=void 0===a.HTMLElement?a.Element.prototype:a.HTMLElement.prototype,e=function(){},f=Object.getOwnPropertyDescriptor(d,"disabled");return document.createEvent?e=function(a){var b=document.createEvent("MutationEvent");b.initMutationEvent("DOMAttrModified",!0,!1,this.getAttributeNode("disabled"),"","","disabled",1),this.dispatchEvent(b)}:document.fireEvent&&(e=function(){this.fireEvent("onpropertychange")}),this.each(function(){Object.defineProperty(this,"disabled",{set:function(a){return b.data(this,"preDisabled",a),a&&e.call(this,a),f.set.call(this,a)},get:function(){var a=b.data(this,"preDisabled");return void 0===a&&(a=f.get.call(this)),a}})})}}(jQuery),e.Components.NSelect2=f,e.LayoutHelper.registerComponentRenderer("select2",function(a,b,d,f){return c.createElement(e.Components.NSelect2,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NSelect",statics:{PLACEHOLDER:"Please Select...",NO_OPTION_FOUND:"No Option Found",FILTER_PLACEHOLDER:"Search..."},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object,view:c.PropTypes.bool},getDefaultProps:function(){return{defaultOptions:{allowClear:!0,minimumResultsForSearch:1,data:[],availableWhenNoParentValue:!1}}},getInitialState:function(){return{}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.registerToComponentCentral()},componentDidMount:function(){this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.unregisterFromComponentCentral()},renderClear:function(){return this.getComponentOption("allowClear")?c.createElement("span",{className:"fa fa-fw fa-close clear",onClick:this.onClearClick}):null},renderText:function(){var a=this.getValueFromModel(),b=null;if(null!=a){var d=this.getAvailableOptions().find(function(b){return b.id==a});d&&(b=d.text)}return null==b&&(b=f.PLACEHOLDER),c.createElement("div",{className:"input-group form-control",onClick:this.onComponentClicked,ref:"comp"},c.createElement("span",{className:"text"},b),this.renderClear(),c.createElement("span",{className:"fa fa-fw fa-sort-down drop"}))},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"n-disabled":!this.isEnabled(),"n-view-mode":this.isViewMode()};return a[this.getComponentCSS("n-select")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a),tabIndex:"0","aria-readonly":"true"},this.renderText(),this.renderNormalLine(),this.renderFocusLine())},renderPopoverContainer:function(){null==this.state.popoverDiv&&(this.state.popoverDiv=b("<div>"),this.state.popoverDiv.appendTo(b("body")),b(document).on("mousedown",this.onDocumentMouseDown).on("keyup",this.onDocumentKeyUp).on("mousewheel",this.onDocumentMouseWheel),b(a).on("resize",this.onWindowResize)),this.state.popoverDiv.hide()},renderOptions:function(a,b){if(null==a||0==a.length)return null;null==b||b.isBlank()||(a=null==a?null:a.filter(function(a){return-1!=a.text.toLowerCase().indexOf(b)}));var d=this;return c.createElement("ul",null,a.map(function(a,b){return c.createElement("li",{onClick:d.onOptionClick.bind(d,a),key:b},c.createElement("span",null,a.text))}))},renderNoOption:function(a){return null==a||0==a.length?c.createElement("div",{className:"no-option"},c.createElement("span",null,f.NO_OPTION_FOUND)):null},renderFilterText:function(a,b){if(null!=a&&0!=a.length){var d=this.getComponentOption("minimumResultsForSearch");if(d>=0&&d!=1/0){var g=e.createModel({text:b}),h=e.createCellLayout("text",{comp:{placeholder:f.FILTER_PLACEHOLDER}});return g.addPostChangeListener("text",this.onFilterTextChange),c.createElement(e.Components.NText,{model:g,layout:h})}return null}},renderPopoverContent:function(a){var b=this.getAvailableOptions();return c.createElement("div",null,this.renderFilterText(b,a),this.renderNoOption(b),this.renderOptions(b,a))},renderPopover:function(a){var b={display:"block"},e=this.getComponent();b.width=e.outerWidth();e.offset();b.top=-1e4,b.left=0;var f=c.createElement("div",{role:"tooltip",className:"n-select-popover popover bottom in",style:b},c.createElement("div",{className:"arrow"}),c.createElement("div",{className:"popover-content"},this.renderPopoverContent(a)));d.render(f,this.state.popoverDiv.get(0),this.onPopoverRenderComplete)},showPopover:function(a){this.renderPopoverContainer(),this.renderPopover(a)},onPopoverRenderComplete:function(){this.state.popoverDiv.show();var c=this.state.popoverDiv.children(".popover"),d={},e=this.getComponent();d.width=e.outerWidth();var f=e.offset();d.top=f.top+e.outerHeight(),d.left=f.left;var g=!1,h=!1,i=c.outerHeight(),j=c.outerWidth();d.top=f.top+e.outerHeight(),d.top+i>b(a).height()+b(a).scrollTop()?f.top-b(a).scrollTop()>=i?(d.top=f.top-i,g=!0):d.top+i<=b(document).height()?g=!1:f.top<i?g=!1:(d.top=f.top-i,g=!0):g=!1,j>d.width&&(width=b(document).width(),d.left+j<=width||d.left+d.width>=j&&(d.left=d.left+d.width-j,h=!0)),g?(c.addClass("top"),c.removeClass("bottom")):(c.removeClass("top"),c.addClass("bottom")),h&&c.addClass("right-to-left"),c.css({top:d.top,left:d.left})},hidePopover:function(){this.destroyPopover()},destroyPopover:function(){this.state.popoverDiv&&(b(document).off("mousedown",this.onDocumentMouseDown).off("keyup",this.onDocumentKeyUp).off("mousewheel",this.onDocumentMouseWheel),b(a).off("resize",this.onWindowResize),this.state.popoverDiv.remove(),delete this.state.popoverDiv)},onComponentClicked:function(){this.isEnabled()&&!this.isViewMode()&&(this.state.popoverDiv&&this.state.popoverDiv.is(":visible")||this.showPopover())},onDocumentMouseDown:function(a){var c=b(a.target);0==c.closest(this.getComponent()).length&&0==c.closest(this.state.popoverDiv).length&&this.hidePopover()},onDocumentMouseWheel:function(a){var c=b(a.target);0==c.closest(this.state.popoverDiv).length&&this.hidePopover()},onDocumentKeyUp:function(a){(27===a.keyCode||9===a.keyCode)&&this.hidePopover()},onWindowResize:function(){this.hidePopover()},onOptionClick:function(a){this.setValueToModel(a.id),this.hidePopover()},onClearClick:function(){this.isEnabled()&&!this.isViewMode()&&this.setValueToModel(null)},onFilterTextChange:function(a){this.showPopover(a["new"])},onModelChanged:function(a){this.forceUpdate()},onParentModelChanged:function(a){var b=this.getAvailableOptions(),c=this.getValueFromModel(),d=b.findIndex(function(a){return a.id==c});-1==d&&this.setValueToModel(null)},getParentModel:function(){var a=this.getComponentOption("parentModel");return null==a?this.getModel():a},getParentPropertyValue:function(){return this.getParentModel().get(this.getParentPropertyId())},getParentPropertyId:function(){return this.getComponentOption("parentPropId")},hasParent:function(){return null!=this.getParentPropertyId()},convertDataOptions:function(a){return Array.isArray(a)?a:a.list()},getAvailableOptions:function(){if(this.hasParent()){var a=this.getParentPropertyValue();if(null==a)return this.isAvailableWhenNoParentValue()?this.convertDataOptions(this.getComponentOption("data")):[];var c=this.getComponentOption("parentFilter");if("object"==typeof c)return this.convertDataOptions(this.getComponentOption("data").filter(b.extend({},c,{value:a})));var d=this.convertDataOptions(this.getComponentOption("data"));return"function"==typeof c?c.call(this,a,d):d.filter(function(b){return b[c]==a})}return this.convertDataOptions(this.getComponentOption("data"))},isAvailableWhenNoParentValue:function(){return this.hasParent()?this.getComponentOption("availableWhenNoParentValue"):!0},getComponent:function(){return b(d.findDOMNode(this.refs.comp))},getTextInViewMode:function(){var a=this.getValueFromModel();if(null!=a){var b=null;b=this.hasParent()?this.getAvailableOptions(this.getParentPropertyValue()):this.convertDataOptions(this.getComponentOption("data")),b.some(function(b){return b.id==a?(a=b.text,!0):!1})}return a}}));e.Components.NSelect=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Select,function(a,b,d,f){return c.createElement(e.Components.NSelect,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NSelectTree",statics:{},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{hideChildWhenParentChecked:!1},treeLayout:{comp:{root:!1,check:!0,multiple:!0,hierarchyCheck:!1}}}},getInitialState:function(){return{}},componentWillUpdate:function(a){this.removePostChangeListener(this.__forceUpdate),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.__forceUpdate),this.addEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.registerToComponentCentral(),this.state.popoverDiv&&this.state.popoverDiv.is(":visible")&&this.showPopover()},componentDidMount:function(){this.addPostChangeListener(this.__forceUpdate),this.addEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().addListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.destroyPopover(),this.removePostChangeListener(this.__forceUpdate),this.removeEnableDependencyMonitor(),this.hasParent()&&this.getParentModel().removeListener(this.getParentPropertyId(),"post","change",this.onParentModelChanged),this.unregisterFromComponentCentral()},renderTree:function(){var a=e.createCellLayout("values",this.getTreeLayout()),b=e.createModel({values:this.getValueFromModel()});return b.addPostChangeListener("values",this.onTreeValueChanged),c.createElement(e.Components.NTree,{model:b,layout:a})},renderSelectionItem:function(a,b){return c.createElement("li",null,c.createElement("span",{className:"fa fa-fw fa-remove",onClick:this.onSelectionItemRemove.bind(this,b)}),a.text)},renderSelectionWhenValueAsArray:function(a){var b=this,c=null;if(this.isHideChildWhenParentChecked()){c=this.getAvailableTreeModel().list();var d=function(b){return-1!=a.findIndex(function(a){return a==b.id})},e=function(a){return a.map(function(a){return d(a)?b.renderSelectionItem(a,a.id):a.children?e(a.children):void 0})};return e(c)}return c=this.getAvailableTreeModel().listAllChildren(),Object.keys(c).map(function(d){var e=a.find(function(a){return a==d});return null!=e?b.renderSelectionItem(c[e],e):void 0})},renderSelectionWhenValueAsJSON:function(a){var b=this,c=this.getAvailableTreeModel().listWithHierarchyKeys({separator:NTree.NODE_SEPARATOR,rootId:NTree.ROOT_ID});if(this.isHideChildWhenParentChecked()){var d=[],f=function(a){return-1!=d.findIndex(function(b){return a.startsWith(b)})};return Object.keys(c).map(function(g){if(!f(g)){var h=g.split(NTree.NODE_SEPARATOR).slice(1).join(e.PROPERTY_SEPARATOR)+e.PROPERTY_SEPARATOR+"selected",i=e.getValueFromJSON(a,h);if(i)return d.push(g+NTree.NODE_SEPARATOR),b.renderSelectionItem(c[g],g)}})}var g=function(a,d,e){var f=e+NTree.NODE_SEPARATOR+d,h=[];return a.selected&&h.push(b.renderSelectionItem(c[f],f)),h.push.apply(h,Object.keys(a).filter(function(a){return"selected"!=a}).map(function(b){return g(a[b],b,f)})),h};return Object.keys(a).filter(function(a){return"selected"!=a}).map(function(b){return g(a[b],b,NTree.ROOT_ID)})},renderSelection:function(){var a=this.getValueFromModel();return null==a?null:this.getTreeLayout().comp.valueAsArray?this.renderSelectionWhenValueAsArray(a):this.renderSelectionWhenValueAsJSON(a)},renderText:function(){return c.createElement("div",{className:"input-group form-control",onClick:this.onComponentClicked,ref:"comp"},c.createElement("ul",{className:"selection"},this.renderSelection()),c.createElement("span",{className:"fa fa-fw fa-sort-down pull-right"}))},render:function(){var a={"n-disabled":!this.isEnabled(),"n-view-mode":this.isViewMode()};return a[this.getComponentCSS("n-select-tree")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a),tabIndex:"0"},this.renderText(),this.renderNormalLine(),this.renderFocusLine())},renderPopoverContainer:function(){null==this.state.popoverDiv&&(this.state.popoverDiv=b("<div>"),this.state.popoverDiv.appendTo(b("body")),b(document).on("mousedown",this.onDocumentMouseDown).on("keyup",this.onDocumentKeyUp).on("mousewheel",this.onDocumentMouseWheel),b(a).on("resize",this.onWindowResize)),this.state.popoverDiv.hide()},renderPopover:function(){var a={display:"block"},b=this.getComponent();a.width=b.outerWidth();b.offset();a.top=-1e4,a.left=0;var e=c.createElement("div",{role:"tooltip",className:"n-select-tree-popover popover bottom in",style:a},c.createElement("div",{className:"arrow"}),c.createElement("div",{className:"popover-content"},this.renderTree()));d.render(e,this.state.popoverDiv.get(0),this.onPopoverRenderComplete)},showPopover:function(){this.renderPopoverContainer(),this.renderPopover()},onPopoverRenderComplete:function(){this.state.popoverDiv.show();var c=this.state.popoverDiv.children(".popover"),d={},e=this.getComponent();d.width=e.outerWidth();var f=e.offset();d.top=f.top+e.outerHeight(),d.left=f.left;var g=!1,h=!1,i=c.outerHeight(),j=c.outerWidth();d.top=f.top+e.outerHeight(),d.top+i>b(a).height()+b(a).scrollTop()?f.top-b(a).scrollTop()>=i?(d.top=f.top-i,g=!0):d.top+i<=b(document).height()?g=!1:f.top<i?g=!1:(d.top=f.top-i,g=!0):g=!1,j>d.width&&(width=b(document).width(),d.left+j<=width||d.left+d.width>=j&&(d.left=d.left+d.width-j,h=!0)),g?(c.addClass("top"),c.removeClass("bottom")):(c.removeClass("top"),c.addClass("bottom")),h&&c.addClass("right-to-left"),c.css({top:d.top,left:d.left})},hidePopover:function(){this.destroyPopover()},destroyPopover:function(){this.state.popoverDiv&&(b(document).off("mousedown",this.onDocumentMouseDown).off("keyup",this.onDocumentKeyUp).off("mousewheel",this.onDocumentMouseWheel),b(a).off("resize",this.onWindowResize),this.state.popoverDiv.remove(),delete this.state.popoverDiv)},onComponentClicked:function(){this.isEnabled()&&!this.isViewMode()&&this.showPopover()},onDocumentMouseDown:function(a){var c=b(a.target);0==c.closest(this.getComponent()).length&&0==c.closest(this.state.popoverDiv).length&&this.hidePopover()},onDocumentMouseWheel:function(a){var c=b(a.target);0==c.closest(this.state.popoverDiv).length&&this.hidePopover()},onDocumentKeyUp:function(a){(27===a.keyCode||9===a.keyCode)&&this.hidePopover()},onWindowResize:function(){this.hidePopover()},onParentModelChanged:function(){var a=this.getComponentOption("parentChanged");a?this.setValueToModel(a.call(this,this.getModel(),this.getParentPropertyValue())):this.setValueToModel(null),this.forceUpdate()},onTreeValueChanged:function(a){var c=a["new"];null==c?this.setValueToModel(c):Array.isArray(c)?this.setValueToModel(c.slice(0)):this.setValueToModel(b.extend(!0,{},c))},onSelectionItemRemove:function(a){if(this.isEnabled()){var b=this.getValueFromModel(),c=this.getTreeLayout().comp.hierarchyCheck;if(null==b);else if(this.getTreeLayout().comp.valueAsArray)if(c){var d=this.getAvailableTreeModel().listWithHierarchyKeys({separator:NTree.NODE_SEPARATOR,rootId:NTree.ROOT_ID}),f=Object.keys(d),g=f.filter(function(b){return-1!=b.indexOf(a+NTree.NODE_SEPARATOR)}).map(function(a){return a.split(NTree.NODE_SEPARATOR).pop()}),h=f.find(function(b){return b.endsWith(NTree.NODE_SEPARATOR+a)}),i=f.filter(function(a){return h.startsWith(a)}).map(function(a){return a.split(NTree.NODE_SEPARATOR).pop()}),j=g.concat(i);this.setValueToModel(b.filter(function(a){return-1==j.findIndex(function(b){return a==b})}))}else this.setValueToModel(b.filter(function(b){return b!=a}));else{var k=a.split(NTree.NODE_SEPARATOR).slice(1),l=e.getValueFromJSON(b,k.join(e.PROPERTY_SEPARATOR));c?(Object.keys(l).forEach(function(a){delete l[a]}),k.splice(k.length-1,1),k.forEach(function(a,c,d){e.setValueIntoJSON(b,d.slice(0,c+1).join(e.PROPERTY_SEPARATOR)+e.PROPERTY_SEPARATOR+"selected",!1)})):delete l.selected,this.getModel().firePostChangeEvent(this.getDataId(),b,b)}}},getComponent:function(){return b(d.findDOMNode(this.refs.comp))},getTreeModel:function(){return this.getComponentOption("data")},getAvailableTreeModel:function(){var a=this.getComponentOption("parentFilter"),b=this.getTreeModel();return a?a.call(this,b,this.getParentPropertyValue()):b},getTreeLayout:function(){var a=this.getComponentOption("treeLayout");return a=a?b.extend(!0,{},this.props.treeLayout,a):b.extend(!0,{},this.props.treeLayout),a.comp.data=this.getAvailableTreeModel(),a.comp.valueAsArray=a.comp.valueAsArray?a.comp.valueAsArray:!1,a.evt=a.evt?a.evt:{},a.evt.expand=a.evt.expand?function(b){a.evt.expand.call(this,b),this.onPopoverRenderComplete.call(this)}:this.onPopoverRenderComplete,a.evt.collapse=a.evt.collapse?function(b){a.evt.collapse.call(this,b),this.onPopoverRenderComplete.call(this)}:this.onPopoverRenderComplete,a},isHideChildWhenParentChecked:function(){var a=this.getTreeLayout().comp.hierarchyCheck;return a?this.getComponentOption("hideChildWhenParentChecked"):!1},hasParent:function(){return null!=this.getParentPropertyId()},getParentPropertyId:function(){return this.getComponentOption("parentPropId")},getParentModel:function(){var a=this.getComponentOption("parentModel");return null==a?this.getModel():a},getParentPropertyValue:function(){return this.getParentModel().get(this.getParentPropertyId())}}));e.Components.NSelectTree=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.SelectTree,function(a,b,d,f){return c.createElement(e.Components.NSelectTree,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NSideMenu",statics:{getSideMenu:function(a,f,g,h){if(f||(f="side_menu_container"),null==e.sideMenu&&(e.sideMenu={}),null==e.sideMenu[f]){var i=b("#"+f);0==i.length&&b("<div id='"+f+"' />").appendTo(b(document.body)),e.sideMenu[f]=d.render(c.createElement(e.Components.NSideMenu,{menus:a,className:g,hover:h?!0:!1}),document.getElementById(f))}return e.sideMenu[f]}},propTypes:{menus:c.PropTypes.array,hover:c.PropTypes.bool,className:c.PropTypes.string},getDefaultProps:function(){return{hover:!1}},getInitialState:function(){return{}},componentDidMount:function(){b(d.findDOMNode(this.refs.menus)).hide()},renderMenuItem:function(a,b,d,e){if(void 0!==a.children){var f=this,g="item_"+b;return c.createElement("li",{ref:g,key:b},c.createElement("a",{href:"javascript:void(0);",onClick:this.onParentMenuClicked.bind(this,g),ref:g+"_link"},a.text,c.createElement("span",{className:"fa fa-fw fa-angle-double-down n-side-menu-ul",ref:g+"_icon"})),c.createElement("ul",{ref:g+"_child",style:{display:"none"}},a.children.map(function(a,c,d){return f.renderMenuItem(a,b+"_"+c,d,!1)})))}return void 0!==a.func?c.createElement("li",{key:b},c.createElement("a",{href:"javascript:void(0);",onClick:this.onMenuClicked.bind(this,a.func,a.value)},a.text)):a.divider===!0?null:c.createElement("li",{key:b},c.createElement("a",{href:a.url},a.text))},render:function(){var a=this;return c.createElement("div",{className:"n-side-menu",ref:"menus",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c.createElement("ul",{className:"nav navbar-nav"},this.props.menus.map(function(b,c,d){return a.renderMenuItem(b,c,d,!0)}),c.createElement("li",{className:"n-side-menu-close"},c.createElement("a",{href:"javascript:void(0);",onClick:this.onCloseClicked},c.createElement("span",{className:"fa fa-fw fa-arrow-circle-left"})))))},onMouseEnter:function(){this.props.hover&&this.show()},onMouseLeave:function(){this.props.hover&&this.willHide()},onMenuClicked:function(a,b){a.call(this,b)},onParentMenuClicked:function(a){b(d.findDOMNode(this.refs[a+"_link"])).blur();var c=b(d.findDOMNode(this.refs[a+"_child"]));c.toggle("fade",function(){c.not(":visible")&&c.find("ul").hide()}),b(d.findDOMNode(this.refs[a+"_icon"])).toggleClass("fa-angle-double-down fa-angle-double-up"),this.collapseMenus(a)},collapseMenus:function(a){var c=this;Object.keys(this.refs).forEach(function(e){if(e.endsWith("_link")){var f=e.substr(0,e.length-5);if(!a||!a.startsWith(f)){var g=b(d.findDOMNode(c.refs[f+"_child"]));g.hide("fade",function(){g.find("ul").hide()})}}}),b(d.findDOMNode(this.refs[a+"_icon"])).toggleClass("fa-angle-double-down fa-angle-double-up")},onCloseClicked:function(){this.hide()},show:function(){this.state.willHide&&(clearTimeout(this.state.willHide),this.state.willHide=null),b(d.findDOMNode(this.refs.menus)).show("fade")},hide:function(){var a=this;b(d.findDOMNode(this.refs.menus)).hide("fade",function(){a.collapseMenus()})},willHide:function(){var a=this;this.state.willHide=setTimeout(function(){a.hide()},300)}});e.Components.NSideMenu=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass({displayName:"NTab",propTypes:{type:c.PropTypes.oneOf(["tab","pill"]),justified:c.PropTypes.bool,direction:c.PropTypes.oneOf(["vertical","horizontal"]),size:c.PropTypes.oneOf(["lg","2x","3x","4x","5x"]),removable:c.PropTypes.bool,canActive:c.PropTypes.func,onActive:c.PropTypes.func,canRemove:c.PropTypes.func,onRemove:c.PropTypes.func,tabClassName:c.PropTypes.string,tabs:c.PropTypes.arrayOf(c.PropTypes.shape({label:c.PropTypes.string,icon:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.element]),active:c.PropTypes.bool,value:c.PropTypes.any,badge:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.number]),innerId:c.PropTypes.string,removable:c.PropTypes.bool,className:c.PropTypes.string}))},getDefaultProps:function(){return{type:"tab",justified:!1,removable:!1}},getInitialState:function(){return{}},componentDidUpdate:function(){this.renderRelatedDOM()},componentDidMount:function(){this.renderRelatedDOM()},renderRelatedDOM:function(){var a=this.getActiveTabIndex();this.props.tabs.forEach(function(c,d){a==d?b("#"+c.innerId).show():b("#"+c.innerId).hide()})},renderIcon:function(a,b){if("string"==typeof a){var d={fa:!0,"fa-fw":!0};return d["fa-"+a]=!0,b&&(d["fa-"+b]=!0),c.createElement("span",{className:e.LayoutHelper.classSet(d)})}return a},renderLabel:function(a){return a?c.createElement("span",null," "+a):null},renderBadge:function(a){return a?c.createElement("span",{className:"badge"},a):null},renderTab:function(a,b){var d=e.LayoutHelper.classSet({active:b==this.getActiveTabIndex(),hide:a.visible===!1}),f=c.createElement("a",{href:"javascript:void(0);",className:"n-tab-delete",onClick:this.onRemoveClicked},c.createElement("span",{className:"fa fa-fw fa-times"}));return c.createElement("li",{role:"presentation",className:d,key:b},c.createElement("a",{href:"javascript:void(0);",onClick:this.onClicked},this.renderIcon(a.icon,this.props.size),this.renderLabel(a.label),this.renderBadge(a.badge)),this.canRemove(a)?f:null)},render:function(){var a={nav:!0,"nav-justified":this.props.justified===!0,"nav-tabs":"tab"===this.props.type,"nav-pills":"pill"===this.props.type,"nav-direction-vertical":"vertical"===this.props.direction};return this.props.tabClassName&&(a[this.props.tabClassName]=!0),c.createElement("div",{className:"n-tab"},c.createElement("ul",{className:e.LayoutHelper.classSet(a),ref:"tabs"},this.props.tabs.map(this.renderTab)))},canRemove:function(a){return null!=a.removable?a.removable===!0:this.props.removable},getActiveTabIndex:function(){var a=this.props.tabs.findIndex(function(a,b){return a.active===!0});return-1==a&&(a=this.props.tabs.findIndex(function(a,b){var c=a.visible!==!1;return c?(a.active=!0,!0):void 0})),a},setActiveTabIndex:function(b){return(0>b||b>=this.props.tabs.length)&&a.console.warn("Tab index["+b+"] out of bound."),this.props.tabs.forEach(function(a,c){a.active=c==b}),this.forceUpdate(),this},onClicked:function(a){var c=b(a.target).closest("li"),d=c.index(),e=this.getActiveTabIndex(),f=this.props.canActive;if(f){var g=this.props.tabs[e],h=f.call(this,this.props.tabs[d].value,d,g.value,e);if(h===!1)return void b(":focus").blur()}this.setActiveTabIndex(d);var i=this.props.onActive;i&&i.call(this,this.props.tabs[d].value,d)},onRemoveClicked:function(a){var c=b(a.target).closest("li");c.addClass("active"),c.parent().children("li").not(c).removeClass("active");var d=c.index(),e=this.props.tabs[d],f=e.value,g=this.props.canRemove;if(g){var h=g.call(this,f,d);if(h===!1)return}this.props.tabs[d].visible=!1;var i=-1;this.props.tabs.some(function(a,b){return a.visible!==!1?(i=b,b>d):void 0}),this.setActiveTabIndex(i);var j=this.props.onRemove;j&&j.call(this,f,d)}});e.Components.NTab=f}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NTable",statics:{__operationButtonWidth:31,__minOperationButtonWidth:40,ROW_HEIGHT:32,TOOLTIP_EDIT:null,TOOLTIP_REMOVE:null,TOOLTIP_MORE:"More Operations...",setOperationButtonWidth:function(a){f.__operationButtonWidth=a},ADD_BUTTON_ICON:"plus",ADD_BUTTON_TEXT:"",SEARCH_PLACE_HOLDER:"Search...",ROW_EDIT_BUTTON_ICON:"pencil",ROW_REMOVE_BUTTON_ICON:"trash-o",ROW_MORE_BUTTON_ICON:"sort-down",EDIT_DIALOG_SAVE_BUTTON_TEXT:"Save",EDIT_DIALOG_SAVE_BUTTON_ICON:"floppy-o",SORT_ICON:"sort",SORT_ASC_ICON:"sort-amount-asc",SORT_DESC_ICON:"sort-amount-desc",NO_DATA_LABEL:"No Data",DETAIL_ERROR_MESSAGE:"Detail error please open item and do validate.",REMOVE_CONFIRM_TITLE:"Delete data?",REMOVE_CONFIRM_MESSAGE:["Are you sure you want to delete data?","Deleted data cannot be recovered."],BOOLEAN_TRUE_DISPLAY_TEXT:"Y",BOOLEAN_FALSE_DISPLAY_TEXT:"N",PAGE_JUMPING_PROXY:null,registerInlineEditor:function(b,c){null!=f.__inlineEditors[b]&&(a.console.warn("Inline editor["+b+"] is repalced."),a.console.warn("From:"),a.console.warn(f.__inlineEditors[b]),a.console.warn("To:"),a.console.warn(c)),f.__inlineEditors[b]=c},getInlineEditor:function(a){var b=f.__inlineEditors[a];if(null==b&&(b=f["__"+a]),null==b)throw e.createComponentException(e.ComponentConstants.Err_Unsupported_Component,"Inline component type["+a+"] is not supported yet.");return b},__inlineEditors:{},__text:{comp:{type:{type:e.ComponentConstants.Text,label:!1}}},__check:{comp:{type:{type:e.ComponentConstants.Check,label:!1}}},__date:{comp:{type:{type:e.ComponentConstants.Date,label:!1}}},__select:{comp:{type:{type:e.ComponentConstants.Select,label:!1}}},__radio:{comp:{type:{type:e.ComponentConstants.Radio,label:!1}}}},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{header:!0,scrollY:!1,scrollX:!1,fixedRightColumns:0,fixedLeftColumns:0,addable:!1,searchable:!0,operationFixed:!1,editable:!1,removable:!1,indexable:!1,indexFixed:!1,rowSelectFixed:!1,sortable:!0,pageable:!1,countPerPage:20,dialogResetVisible:!1,dialogValidateVisible:!1,
collapsible:!1,expanded:!0}}},getInitialState:function(){return{sortColumn:null,sortWay:null,countPerPage:20,pageCount:1,currentPageIndex:1,searchText:null,searchModel:e.createModel({text:null}),searchLayout:e.createCellLayout("text",{comp:{placeholder:f.SEARCH_PLACE_HOLDER},css:{comp:"n-table-search-box"}})}},attachListeners:function(){var a=this;this.getScrollBodyComponent().on("scroll",function(c){var d=b(this);a.getScrollHeaderComponent().scrollLeft(d.scrollLeft()),a.getFixedLeftBodyComponent().scrollTop(d.scrollTop()),a.getFixedRightBodyComponent().scrollTop(d.scrollTop())}),this.getDivComponent().on("mouseenter","tbody tr",function(c){var d=b(this).parent().children().index(b(this));a.getDivComponent().find("tbody tr:nth-child("+(d+1)+")").addClass("hover")}).on("mouseleave","tbody tr",function(c){var d=b(this).parent().children().index(b(this));a.getDivComponent().find("tbody tr:nth-child("+(d+1)+")").removeClass("hover")}),this.renderIfIE8(),this.renderHeaderPopover(),this.addPostChangeListener(this.onModelChanged),this.state.searchModel.addPostChangeListener("text",this.onSearchBoxChanged),this.addPostRemoveListener(this.onModelChanged),this.addPostAddListener(this.onModelChanged),this.addPostValidateListener(this.onModelValidateChanged)},detachListeners:function(){this.getScrollBodyComponent().off("scroll"),this.getDivComponent().off("mouseenter","tbody tr").off("mouseleave","tbody tr"),b(d.findDOMNode(this.refs[this.getHeaderLabelId()])).popover("destroy"),this.removePostChangeListener(this.onModelChanged),this.state.searchModel.removePostChangeListener("text",this.onSearchBoxChanged),this.removePostRemoveListener(this.onModelChanged),this.removePostAddListener(this.onModelChanged),this.removePostValidateListener(this.onModelValidateChanged)},componentWillUpdate:function(a){this.detachListeners(),a!=this.props&&(this.state.columns=null),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.attachListeners(),this.registerToComponentCentral()},componentDidMount:function(){this.attachListeners(),this.registerToComponentCentral()},componentWillUnmount:function(){this.detachListeners(),this.unregisterFromComponentCentral(),this.destroyPopover()},renderIfIE8:function(){if(this.isIE8()&&this.hasVerticalScrollBar()){var a=this.getComponent(),b=this.getFixedLeftBodyComponent(),c=this.getFixedRightBodyComponent(),d=a.find("tr"),e=d.length,g=e*f.ROW_HEIGHT;g>this.getComponentOption("scrollY")&&(g=this.getComponentOption("scrollY")),a.closest("div").css({height:g+17}),b.css({height:g}),c.css({height:g})}},isIE:function(){return e.browser.msie},isIE8:function(){return e.browser.msie&&8==e.browser.version},isFirefox:function(){return e.browser.mozilla},prepareDisplayOptions:function(){if(null==this.state.columns){var a=this;this.state.columns=this.getComponentOption("columns"),Array.isArray(this.state.columns)?this.state.columns=e.createTableColumnLayout(this.state.columns):this.state.columns=e.createTableColumnLayout(this.state.columns.columns()),this.fixedRightColumns=this.getComponentOption("fixedRightColumns"),this.fixedLeftColumns=this.getComponentOption("fixedLeftColumns");var b=null,c=this.isEditable(),d=this.isRemovable(),f=this.getComponentOption("rowOperations");null==f?f=[]:Array.isArray(f)||(f=[f]),f=f.filter(function(b){return a.isViewMode()?"edit"!=b.view:a.isViewMode()?void 0:"view"!=b.view}),(c||d||0!=f.length)&&(b={editable:c,removable:d,rowOperations:f,title:"",width:this.calcOperationColumnWidth(c,d,f)},this.state.columns.push(b),(this.fixedRightColumns>0||this.getComponentOption("operationFixed")===!0)&&this.fixedRightColumns++);var g=this.isRowSelectable();g&&(b={rowSelectable:g,width:40,title:""},this.state.columns.splice(0,0,b),(this.fixedLeftColumns>0||this.getComponentOption("rowSelectFixed")===!0)&&this.fixedLeftColumns++);var h=this.isIndexable();h&&(b={indexable:!0,width:40,title:"#"},this.state.columns.splice(0,0,b),(this.fixedLeftColumns>0||this.getComponentOption("indexFixed")===!0)&&this.fixedLeftColumns++)}},calcOperationColumnWidth:function(a,b,c){var d=this.getComponentOption("operationColumnWidth");if(null!=d)return d;var e=this.getComponentOption("maxOperationButtonCount");if(e){var g=(a?1:0)+(b?1:0)+c.length;e>g?(d=(a?f.__operationButtonWidth:0)+(b?f.__operationButtonWidth:0),0!=c.length&&(d+=f.__operationButtonWidth*c.length)):d=(e+1)*f.__operationButtonWidth}else d=(a?f.__operationButtonWidth:0)+(b?f.__operationButtonWidth:0),0!=c.length&&(d+=f.__operationButtonWidth*c.length);return d<f.__minOperationButtonWidth?f.__minOperationButtonWidth:d},renderSearchBox:function(){return this.isSearchable()?c.createElement(e.Components.NText,{model:this.state.searchModel,layout:this.state.searchLayout}):null},renderHeadingButtons:function(){return this.isAddable()?c.createElement("a",{href:"javascript:void(0);",onClick:this.onAddClicked,className:"n-table-heading-buttons pull-right",ref:"add-button",style:{display:this.state.expanded?"block":"none"}},c.createElement(e.Components.NIcon,{icon:f.ADD_BUTTON_ICON}),f.ADD_BUTTON_TEXT):null},renderPanelHeadingLabel:function(){var a="col-sm-3 col-md-3 col-lg-3";this.getModel().hasError(this.getDataId())&&(a+=" has-error");var b={"n-table-heading-label":!0};return this.isCollapsible()&&(b["n-table-heading-label-collapsible"]=!0),c.createElement("div",{className:a},c.createElement("span",{className:this.getAdditionalCSS("headingLabel",e.LayoutHelper.classSet(b)),ref:this.getHeaderLabelId(),onClick:this.isCollapsible()?this.onTitleClicked:null},this.getLayout().getLabel()))},renderHeaderPopover:function(){if(this.getModel().hasError(this.getDataId())){var a=this.getModel().getError(this.getDataId()),c=this,e=a.map(function(a){return"string"==typeof a?"<span style='display:block'>"+a.format([c.getLayout().getLabel()])+"</span>":"<span style='display:block'>"+f.DETAIL_ERROR_MESSAGE+"</span>"});b(d.findDOMNode(this.refs[this.getHeaderLabelId()])).popover({placement:"top",trigger:"hover",html:!0,content:e,animation:!1})}},renderPanelHeading:function(){return this.isHeading()?c.createElement("div",{className:this.getAdditionalCSS("heading","panel-heading n-table-heading")},c.createElement("div",{className:"row"},this.renderPanelHeadingLabel(),c.createElement("div",{className:"col-sm-9 col-md-9 col-lg-9"},this.renderHeadingButtons(),this.renderSearchBox()))):null},renderTableHeaderSortButton:function(a){if(this.isSortable(a)){var b=f.SORT_ICON,d=this.getAdditionalCSS("sort","pull-right n-table-sort");return this.state.sortColumn==a&&(d+=" "+this.getAdditionalCSS("sorted","n-table-sorted"),b="asc"==this.state.sortWay?f.SORT_ASC_ICON:f.SORT_DESC_ICON),c.createElement("a",{href:"javascript:void(0);",className:d,onClick:this.onSortClicked.bind(this,a)},c.createElement(e.Components.NIcon,{icon:b}))}},renderTableHeaderCheckBox:function(a){var b=this.getDataToDisplay(),d=this.computePagination(b),f=this.isCurrentPageAllSelected(a,b,d),g=e.createModel({allCheck:f}),h=e.createCellLayout("allCheck",{comp:{type:e.ComponentConstants.Check}}),i=this;return g.addListener("allCheck","post","change",function(c){var f=c["new"];if(null!=b){var g=1;b.forEach(function(b){g>=d.min&&g<=d.max&&e.setValueIntoJSON(b,a.rowSelectable,f),g++}),i.forceUpdate()}}),c.createElement(e.Components.NCheck,{model:g,layout:h})},renderTableHeading:function(a,b,d){var e=this.getRenderColumnIndexRange(a,b,d),f=0,g=this;return c.createElement("thead",null,c.createElement("tr",null,this.state.columns.map(function(a){if(f>=e.min&&f<=e.max){f++;var b={};return b.width=a.width,void 0!==a.visible&&a.visible!==!0&&(b.display="none"),a.rowSelectable?c.createElement("td",{style:b,key:f},g.renderTableHeaderCheckBox(a)):c.createElement("td",{style:b,key:f},a.title,g.renderTableHeaderSortButton(a))}f++})))},renderRowEditButton:function(a){var b=e.createCellLayout("editButton",{comp:{style:"link",icon:f.ROW_EDIT_BUTTON_ICON,enabled:this.getRowEditButtonEnabled(),click:this.onEditClicked.bind(this,a.getCurrentModel()),tooltip:f.TOOLTIP_EDIT},css:{comp:"n-table-op-btn"}});return c.createElement(e.Components.NFormButton,{model:a,layout:b})},renderRowRemoveButton:function(a){var b=e.createCellLayout("removeButton",{comp:{style:"link",icon:f.ROW_REMOVE_BUTTON_ICON,enabled:this.getRowRemoveButtonEnabled(),click:this.onRemoveClicked.bind(this,a.getCurrentModel()),tooltip:f.TOOLTIP_REMOVE},css:{comp:"n-table-op-btn"}});return c.createElement(e.Components.NFormButton,{model:a,layout:b})},renderRowOperationButton:function(a,b,d){var f=e.createCellLayout("rowButton",{label:a.icon?null:a.tooltip,comp:{style:"link",icon:a.icon,enabled:a.enabled,click:this.onRowOperationClicked.bind(this,a.click,b.getCurrentModel()),tooltip:a.tooltip},css:{comp:"n-table-op-btn"}});return c.createElement(e.Components.NFormButton,{model:b,layout:f,key:d})},getRowOperations:function(a){var b=a.rowOperations;return(void 0===b||null===b)&&(b=[]),b},renderFlatOperationCell:function(a,b){var d=a.editable?this.renderRowEditButton(b):null,e=a.removable?this.renderRowRemoveButton(b):null,f=this.getRowOperations(a),g=this;return c.createElement("div",{className:"btn-group n-table-op-btn-group",role:"group"},f.map(function(a,c){return g.renderRowOperationButton(a,b,c)}),d,e)},renderPopoverContainer:function(){null==this.state.popoverDiv&&(this.state.popoverDiv=b("<div>"),this.state.popoverDiv.appendTo(b("body")),b(document).on("click",this.onDocumentClicked).on("keyup",this.onDocumentKeyUp)),this.state.popoverDiv.hide()},isRenderMoreOperationButtonsAsIcon:function(a){return this.getComponentOption("moreAsMenu")?!0:!a.some(function(a){return null==a.icon})},renderPopoverAsMenu:function(a,b){var d=a.some(function(a){return null!=a.icon}),f=this,g=function(a,g){var h=e.createCellLayout("rowButton",{label:a.tooltip,comp:{style:"link",icon:d?a.icon?a.icon:"placeholder":null,enabled:a.enabled,click:f.onRowOperationClicked.bind(f,a.click,b.getCurrentModel())},css:{comp:"n-table-op-btn"}});return c.createElement("li",{key:g},c.createElement(e.Components.NFormButton,{model:b,layout:h}))};return c.createElement("ul",{className:"nav"},a.map(g))},renderPopoverAsIcon:function(a,b){var c=this;return a.map(function(a,d){return c.renderRowOperationButton(a,b,d)})},renderPopover:function(a,e,f){var g={display:"block"},h=b(f.closest("a")),i=h.offset();g.top=i.top+h.outerHeight()-5,g.left=i.left;d.render(c.createElement("div",{role:"tooltip",className:"n-table-op-btn-popover popover bottom in",style:g},c.createElement("div",{className:"arrow"}),c.createElement("div",{className:"popover-content"},this.isRenderMoreOperationButtonsAsIcon(a)?this.renderPopoverAsIcon(a,e):this.renderPopoverAsMenu(a,e))),this.state.popoverDiv.get(0))},showPopover:function(a,c,d){this.renderPopoverContainer(),this.renderPopover(a,c,d),this.state.popoverDiv.show();var e={},f=b(d.closest("a")),g=f.offset(),h=this.state.popoverDiv.children(".popover"),i=h.outerWidth();e.left=g.left+f.outerWidth()-i+10,h.css(e)},hidePopover:function(){this.state.popoverDiv&&this.state.popoverDiv.is(":visible")&&(this.state.popoverDiv.hide(),d.render(c.createElement("noscript",null),this.state.popoverDiv.get(0)))},destroyPopover:function(){this.state.popoverDiv&&(b(document).off("click",this.onDocumentClicked).off("keyup",this.onDocumentKeyUp),this.state.popoverDiv.remove(),delete this.state.popoverDiv)},onDocumentClicked:function(a){var c=b(a.target);0==c.closest(this.state.popoverDiv).length&&this.hidePopover()},onDocumentKeyUp:function(a){27===a.keyCode&&this.hidePopover()},onRowOperationMoreClicked:function(a,b,c){this.showPopover(a,b,c)},renderRowOperationMoreButton:function(a,b){var d=e.createCellLayout("rowButton",{comp:{style:"link",icon:f.ROW_MORE_BUTTON_ICON,click:this.onRowOperationMoreClicked.bind(this,a),tooltip:f.TOOLTIP_MORE},css:{comp:"n-table-op-btn more"}});return c.createElement(e.Components.NFormButton,{model:b,layout:d,key:"more-op"})},renderDropDownOperationCell:function(a,b,d){var e=this.getRowOperations(a);a.editable&&e.push({editButton:!0}),a.removable&&e.push({removeButton:!0});var f=this,g=-1,h=[];e.some(function(a,c){return a.editButton?h.push(f.renderRowEditButton(b)):a.removeButton?h.push(f.renderRowRemoveButton(b)):h.push(f.renderRowOperationButton(a,b,c)),g++,d-g==1});var i=e.length-g>1,j=null;return i&&h.push(this.renderRowOperationMoreButton(e.slice(g+1),b)),c.createElement("div",{className:"btn-group n-table-op-btn-group",role:"group"},h,j)},renderOperationCell:function(a,b){var c=!1,d=this.getComponentOption("maxOperationButtonCount");if(d){var e=(a.editable?1:0)+(a.removable?1:0)+a.rowOperations.length;e>d&&(c=!0)}return c?this.renderDropDownOperationCell(a,b,d):this.renderFlatOperationCell(a,b)},renderRowSelectCell:function(a,b){var d=e.createModel(b);d.useBaseAsCurrent();var f=this;d.addListener(a.rowSelectable,"post","change",function(a){f.forceUpdate()});var g=e.createCellLayout(a.rowSelectable,{comp:{type:e.ComponentConstants.Check}});return c.createElement(e.Components.NCheck,{model:d,layout:g})},renderTableBodyRow:function(a,d,g,h,i){var j=this.getRenderColumnIndexRange(g,h,i),k=0,l=this,m=d%2==0?"even":"odd";if(this.getModel().hasError(this.getDataId())){for(var n=null,o=this.getModel().getError(this.getDataId()),p=0,q=o.length;q>p;p++)"string"!=typeof o[p]&&(n=o[p].getError(a));null!=n&&(m+=" has-error")}var r=this.createInlineRowModel(a);return c.createElement("tr",{className:m,key:d},this.state.columns.map(function(g){if(k>=j.min&&k<=j.max){k++;var h={width:g.width};void 0!==g.visible&&g.visible!==!0&&(h.display="none");var i;if(g.editable||g.removable||null!=g.rowOperations)i=l.renderOperationCell(g,r),h.textAlign="center";else if(g.indexable)i=d;else if(g.rowSelectable)i=l.renderRowSelectCell(g,a);else if(g.inline)if("string"==typeof g.inline){var m=f.getInlineEditor(g.inline);m.pos={width:12},m.css?m.css.cell=" "+m.css.cell:m.css={cell:"inline-editor"},("select"===g.inline||"radio"===g.inline)&&g.codes&&(m=b.extend(!0,{},{comp:{data:g.codes}},m)),i=c.createElement(e.Components.NFormCell,{model:r,layout:e.createCellLayout(g.data,m),direction:"horizontal",view:l.isViewMode()})}else"cell"==g.inline.inlineType?(g.inline.pos={width:12},g.inline.css?g.inline.css.cell=" "+g.inline.css.cell:g.inline.css={cell:"inline-editor"},i=c.createElement(e.Components.NFormCell,{model:r,layout:e.createCellLayout(g.data,g.inline),direction:"horizontal",view:l.isViewMode(),className:g.inline.__className})):i=c.createElement(e.Components.NForm,{model:r,layout:e.createFormLayout(g.inline),direction:"horizontal",view:l.isViewMode()});else i=l.getDisplayTextOfColumn(g,a);return c.createElement("td",{style:h,key:k},i)}k++}))},renderTableBody:function(a,b,d){var e=this.getDataToDisplay();if(null==e||0==e.length)return null;var f=1,g=this,h=this.computePagination(e);return c.createElement("tbody",null,e.map(function(c){return f>=h.min&&f<=h.max?g.renderTableBodyRow(c,f++,a,b,d):(f++,null)}))},renderTableNoScrollY:function(){return c.createElement("div",{className:this.getAdditionalCSS("panelBody","n-table-panel-body")},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:this.computeTableStyle(),ref:"table"},this.renderTableHeading(!0),this.renderTableBody(!0)))},renderTableScrollY:function(){var a=this.computeTableStyle(),b={overflowY:"scroll"},d={maxHeight:this.getComponentOption("scrollY"),overflowY:"scroll"};return c.createElement("div",{className:this.getAdditionalCSS("panelBody","n-table-panel-body")},c.createElement("div",{className:"n-table-scroll-head",ref:this.getScrolledHeaderDivId(),style:b},c.createElement("div",{className:"n-table-scroll-head-inner",style:a},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:a},this.renderTableHeading(!0)))),c.createElement("div",{className:"n-table-scroll-body",style:d,ref:this.getScrolledBodyDivId()},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:a,ref:"table"},this.renderTableBody(!0))))},renderTable:function(){return this.hasVerticalScrollBar()&&this.hasDataToDisplay()?this.renderTableScrollY():this.renderTableNoScrollY()},renderFixedLeftColumnsScrollY:function(){var a={width:this.computeFixedLeftColumnsWidth()},b={width:"100%",overflow:"hidden"};this.hasHorizontalScrollBar()&&(b.maxHeight=this.getComponentOption("scrollY")-(this.isIE8()?0:18));var d={width:"100%"};return c.createElement("div",{className:"n-table-fix-left",style:a},c.createElement("table",{cellSpacing:"0",style:d,className:this.getAdditionalCSS("table","n-table cell-border")},this.renderTableHeading(!1,!0)),c.createElement("div",{ref:this.getFixedLeftBodyDivId(),style:b},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:d},this.renderTableBody(!1,!0))))},renderFixedLeftColumnsNoScrollY:function(){var a={width:this.computeFixedLeftColumnsWidth()},b={width:"100%"};return c.createElement("div",{className:"n-table-fix-left",style:a},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:b},this.renderTableHeading(!1,!0),this.renderTableBody(!1,!0)))},renderFixedLeftColumns:function(){return!this.hasFixedLeftColumns()&&this.hasDataToDisplay()?null:this.hasVerticalScrollBar()?this.renderFixedLeftColumnsScrollY():this.renderFixedLeftColumnsNoScrollY()},renderFixedRightColumnsNoScrollY:function(){var a={width:this.computeFixedRightColumnsWidth()},b={width:"100%"};return c.createElement("div",{className:"n-table-fix-right",style:a},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border"),style:b},this.renderTableHeading(!1,!1,!0),this.renderTableBody(!1,!1,!0)))},renderFixedRightColumnsScrollY:function(){var a={width:this.computeFixedRightColumnsWidth(),right:"16px"},b={width:"100%",overflow:"hidden"};this.hasHorizontalScrollBar()&&(b.maxHeight=this.getComponentOption("scrollY")-(this.isIE8()?0:18));var d={width:"100%"};return c.createElement("div",{className:"n-table-fix-right",style:a},c.createElement("div",{className:"n-table-fix-right-head-wrapper"},c.createElement("div",{className:"n-table-fix-right-top-corner"}),c.createElement("table",{cellSpacing:"0",style:d,className:this.getAdditionalCSS("table","n-table cell-border")},this.renderTableHeading(!1,!1,!0))),c.createElement("div",{ref:this.getFixedRightBodyDivId(),style:b},c.createElement("table",{cellSpacing:"0",className:this.getAdditionalCSS("table","n-table cell-border")},this.renderTableBody(!1,!1,!0))))},renderFixedRightColumns:function(){return!this.hasFixedRightColumns()&&this.hasDataToDisplay()?null:this.hasVerticalScrollBar()?this.renderFixedRightColumnsScrollY():this.renderFixedRightColumnsNoScrollY()},renderNoDataReminder:function(){return this.hasDataToDisplay()?null:c.createElement("div",{className:"n-table-no-data"},c.createElement("span",null,f.NO_DATA_LABEL))},renderPagination:function(){return this.isPageable()&&this.hasDataToDisplay()?c.createElement(e.Components.NPagination,{className:"n-table-pagination",pageCount:this.state.pageCount,currentPageIndex:this.state.currentPageIndex,toPage:this.toPage}):null},renderRightTopCorner:function(){var a=null;if(this.hasVerticalScrollBar()&&!this.hasFixedRightColumns()){var b={width:"16px",right:"16px"},d={width:"100%",overflow:"hidden"};this.hasHorizontalScrollBar()&&(d.maxHeight=this.getComponentOption("scrollY")-(this.isIE8()?0:18)),a=c.createElement("div",{className:"n-table-fix-right",style:b},c.createElement("div",{className:"n-table-fix-right-head-wrapper"},c.createElement("div",{className:"n-table-fix-right-top-corner"})))}return a},render:function(){this.prepareDisplayOptions();var a={"n-table-container panel":!0},b=this.getComponentOption("style");b?a["panel-"+b]=!0:a["panel-default"]=!0,this.isHeading()||(a["n-table-no-header"]=!0);var d={display:this.isExpanded()?"block":"none"};return c.createElement("div",{className:this.getComponentCSS(e.LayoutHelper.classSet(a)),ref:"div"},this.renderPanelHeading(),c.createElement("div",{ref:"table-panel-body",style:d},c.createElement("div",{className:this.getAdditionalCSS("body","n-table-body-container panel-body")},this.renderTable(),this.renderFixedLeftColumns(),this.renderFixedRightColumns(),this.renderRightTopCorner()),this.renderPagination()))},hasVerticalScrollBar:function(){var a=this.getComponentOption("scrollY");return a!==!1},hasHorizontalScrollBar:function(){var a=this.hasVerticalScrollBar();if(a)return!0;var b=this.getComponentOption("scrollX");return b===!0},computeTableStyle:function(){var a=0;return this.hasHorizontalScrollBar()?(a=0,this.state.columns.forEach(function(b){(void 0===b.visible||b.visible===!0)&&(a+=b.width?1*b.width:0)})):a="100%",{width:a,maxWidth:a}},computeFixedLeftColumnsWidth:function(){var a=0,b=this.getMaxFixedLeftColumnIndex(),c=0;return this.state.columns.forEach(function(d){b>=c&&(void 0===d.visible||d.visible===!0)&&(a+=d.width?1*d.width:0),c++}),a+1},computeFixedRightColumnsWidth:function(){var a=0,b=this.getMinFixedRightColumnIndex(),c=0;return this.state.columns.forEach(function(d){c>=b&&(void 0===d.visible||d.visible===!0)&&(a+=d.width),c++}),a+(this.isFirefox()?3:1)},getRenderColumnIndexRange:function(a,b,c){var d={};return a?(d.min=0,d.max=1e4):b?(d.min=0,d.max=this.getMaxFixedLeftColumnIndex()):c&&(d.min=this.getMinFixedRightColumnIndex(),d.max=1e4),d},getMaxFixedLeftColumnIndex:function(){return this.fixedLeftColumns-1},getMinFixedRightColumnIndex:function(){return this.state.columns.length()-this.fixedRightColumns},getQuerySettings:function(){return this.getComponentOption("criteria")},computePagination:function(a){var b=0,c=999999;if(this.isPageable()){var d=this.getQuerySettings();if(null===d){this.state.countPerPage=this.getComponentOption("countPerPage");var e=0==a.length?1:a.length/this.state.countPerPage;this.state.pageCount=Math.floor(e)==e?e:Math.floor(e)+1,this.state.currentPageIndex=this.state.currentPageIndex>this.state.pageCount?this.state.pageCount:this.state.currentPageIndex,this.state.currentPageIndex=this.state.currentPageIndex<=0?1:this.state.currentPageIndex,b=(this.state.currentPageIndex-1)*this.state.countPerPage+1,c=b+this.state.countPerPage-1}else{var f=this.getModel().get(d);this.state.countPerPage=f.countPerPage,this.state.pageCount=f.pageCount,this.state.currentPageIndex=f.pageIndex,b=1,c=this.state.countPerPage}}return{min:b,max:c}},hasFixedLeftColumns:function(){return this.fixedLeftColumns>0},hasFixedRightColumns:function(){return this.fixedRightColumns>0},isAddable:function(){return this.getComponentOption("addable")&&!this.isViewMode()},isEditable:function(){return this.getComponentOption("editable")},getRowEditButtonEnabled:function(){return this.getComponentOption("rowEditEnabled")},isRemovable:function(){return this.getComponentOption("removable")&&!this.isViewMode()},getRowRemoveButtonEnabled:function(){return this.getComponentOption("rowRemoveEnabled")},isSearchable:function(){return this.getComponentOption("searchable")},isIndexable:function(){return this.getComponentOption("indexable")},isRowSelectable:function(){return this.isViewMode()?!1:this.getComponentOption("rowSelectable")},isPageable:function(){return this.getComponentOption("pageable")},isHeading:function(){return this.getComponentOption("header")},isCollapsible:function(){return this.getComponentOption("collapsible")},isExpanded:function(){return void 0===this.state.expanded&&(this.state.expanded=this.getComponentOption("expanded")),this.state.expanded},isSortable:function(a){return void 0===a?this.getComponentOption("sortable"):this.isSortable()?a.sort===!1?!1:!(a.editable||a.removable||a.indexable||a.rowSelectable||null!=a.rowOperations):a.sort},getSorter:function(){return this.getComponentOption("sorter")},hasDataToDisplay:function(){var a=this.getDataToDisplay();return null!=a&&a.length>0},getDisplayTextOfColumn:function(a,b){var c=null;if(c=a.render?a.render(b):a.codes?a.codes.getText(e.getValueFromJSON(b,a.data)):e.getValueFromJSON(b,a.data),"boolean"==typeof c){if(c===!0)return f.BOOLEAN_TRUE_DISPLAY_TEXT;if(c===!1)return f.BOOLEAN_FALSE_DISPLAY_TEXT}return null==c?null:c.toString()},filterData:function(a,b,c){var d=this.state.searchText.toUpperCase(),e=this.getComponentOption("columns"),f=this;return e.some(function(b){var c=f.getDisplayTextOfColumn(b,a);return null==c?!1:-1!=c.toString().toUpperCase().indexOf(d)})},getDataToDisplay:function(){var a=this.getValueFromModel();return null==a?a:this.isSearching()?a.filter(this.filterData):a},isSearching:function(){return this.isSearchable()&&null!=this.state.searchText&&0!=this.state.searchText.length},isCurrentPageAllSelected:function(a,b,c){var d=1;return null==b?!1:!b.some(function(b){return d>=c.min&&d<=c.max?(d++,b[a.rowSelectable]!==!0):(d++,!1)})},onTitleClicked:function(){this.state.expanded=!this.state.expanded,this.state.expanded?(b(d.findDOMNode(this.refs["table-panel-body"])).slideDown(300),b(d.findDOMNode(this.refs["add-button"])).show()):(b(d.findDOMNode(this.refs["table-panel-body"])).slideUp(300),b(d.findDOMNode(this.refs["add-button"])).hide())},onAddClicked:function(){var a=e.cloneJSON(this.getComponentOption("modelTemplate")),b=this.createEditingModel(a),c=this.getComponentOption("editLayout"),d=this.getComponentOption("addClick");d?d.call(this,this.getModel(),b,c):this.getEditDialog().show({model:b,layout:e.createFormLayout(c),buttons:{right:[{icon:f.EDIT_DIALOG_SAVE_BUTTON_ICON,text:f.EDIT_DIALOG_SAVE_BUTTON_TEXT,style:"primary",click:this.onAddCompleted}],reset:this.getComponentOption("dialogResetVisible"),validate:this.getComponentOption("dialogValidateVisible")}})},onAddCompleted:function(){var a=!1,b=this.getEditDialog();if(a=this.getComponentOption("onAddSave")?this.getComponentOption("onAddSave").call(this,b.getModel(),b)===!1:b.validate(),!a){var c=b.hide();this.getModel().add(this.getDataId(),c.getCurrentModel())}},onEditClicked:function(a){var b=this.createEditingModel(a),c=this.getComponentOption("editLayout"),d=this.getComponentOption("editClick");d?d.call(this,this.getModel(),b,c):this.getEditDialog().show({model:b,layout:e.createFormLayout(c),buttons:{right:[{icon:f.EDIT_DIALOG_SAVE_BUTTON_ICON,text:f.EDIT_DIALOG_SAVE_BUTTON_TEXT,style:"primary",click:this.onEditCompleted,view:"edit"}],reset:this.getComponentOption("dialogResetVisible"),validate:this.getComponentOption("dialogValidateVisible"),cancel:this.isViewMode()?function(a,b){b()}:!0},view:this.isViewMode()})},onEditCompleted:function(){var a=!1,b=this.getEditDialog();if(a=this.getComponentOption("onEditSave")?this.getComponentOption("onEditSave").call(this,b.getModel(),b)===!1:b.validate(),!a){var c=this.getEditDialog().hide(),d=c.getOriginalModel(),e=c.getCurrentModel();this.getModel().update(this.getDataId(),d,e)}},onRemoveClicked:function(a){var b=function(a){var b=this.getComponentOption("canRemove");(!b||b.call(this,this.getModel(),a))&&this.getModel().remove(this.getDataId(),a),e.Components.NConfirm.getConfirmModal().hide()};e.Components.NConfirm.getConfirmModal().show(f.REMOVE_CONFIRM_TITLE,f.REMOVE_CONFIRM_MESSAGE,b.bind(this,a))},onRowOperationClicked:function(a,b){a.call(this,b)},onSearchBoxChanged:function(){var a=this.state.searchModel.get("text");null==a||""==a?this.setState({searchText:null}):this.setState({searchText:a})},onSortClicked:function(a){var b=this.getValueFromModel();if(null!=b){var c="asc";this.state.sortColumn==a&&(c="asc"==this.state.sortWay?"desc":"asc");var d=this.getSorter();if(d)return d.call(this,{mode:c,column:a,data:b,criteria:this.getQuerySettings()}),void this.setState({sortColumn:a,sortWay:c});var f=!1;if(void 0!==a.sort&&null!=a.sort)if("function"==typeof a.sort)d=a.sort;else if("number"===a.sort)f=!0;else if("boolean"!=typeof a.sort)throw e.createComponentException(e.ComponentConstants.Err_Unuspported_Column_Sort,"Column sort ["+a.sort+"] is not supported yet.");var g=this;d=null==d?function(b,c){var d=g.getDisplayTextOfColumn(a,b),e=g.getDisplayTextOfColumn(a,c);return null==d?null==e?0:-1:null==e?1:(f&&(d*=1,e*=1),d>e?1:e>d?-1:0)}:d,"asc"==c?b.sort(d):b.sort(function(a,b){return 0-d(a,b)}),this.setState({sortColumn:a,sortWay:c})}},getEditDialog:function(){return(void 0===this.state.editDialog||null===this.state.editDialog)&&(this.state.editDialog=e.Components.NModalForm.createFormModal(this.getLayout().getLabel())),this.state.editDialog},createEditingModel:function(a){var b=this.getModel().getValidator(),c=b?b.getConfig()[this.getDataId()]:null,d=c?e.createModelValidator(c.table):null,f=e.createModel(a,d);return f.parent(this.getModel()),f},createInlineRowModel:function(a){var b=this.createEditingModel(a);b.useBaseAsCurrent();var c=this.getComponentOption("rowListener");return c&&(c=Array.isArray(c)?c:[c],c.forEach(function(a){b.addListener(a.id,a.time?a.time:"post",a.type?a.type:"change",a.listener)})),b},onModelChanged:function(a){"add"==a.type?(this.computePagination(this.getDataToDisplay()),this.state.currentPageIndex=this.state.pageCount):"remove"==a.type||"change"==a.type,null!=this.getModel().getValidator()?this.getModel().validate(this.getDataId()):this.forceUpdate()},onModelValidateChanged:function(a){this.forceUpdate()},toPage:function(a){if(this.state.currentPageIndex!=a){var c=this.getQuerySettings();if(null===c)this.setState({currentPageIndex:a});else{var d=this,g=this.getModel(),h=g.get(c);h=b.extend({},h);var i=h.url;delete h.url,delete h.pageCount,h.pageIndex=a,f.PAGE_JUMPING_PROXY&&(h=f.PAGE_JUMPING_PROXY.call(this,h));var j=this.getEventMonitor("pageChange");j?this.notifyEvent({type:"pageChange",criteria:h,target:this}):e.doPost(i,h).done(function(a){"string"==typeof a&&(a=JSON.parse(a)),g.mergeCurrentModel(a),d.forceUpdate()})}}},getDivComponent:function(){return b(d.findDOMNode(this.refs.div))},getComponent:function(){return b(d.findDOMNode(this.refs.table))},getHeaderLabelId:function(){return"n-table-header-label"},getScrollHeaderComponent:function(){return b(this.refs[this.getScrolledHeaderDivId()]?d.findDOMNode(this.refs[this.getScrolledHeaderDivId()]):"#___")},getScrolledHeaderDivId:function(){return"n-table-scrolled-head"},getScrollBodyComponent:function(){return b(this.refs[this.getScrolledBodyDivId()]?d.findDOMNode(this.refs[this.getScrolledBodyDivId()]):"#___")},getScrolledBodyDivId:function(){return"n-table-scrolled-body"},getFixedLeftBodyComponent:function(){return b(this.refs[this.getFixedLeftBodyDivId()]?d.findDOMNode(this.refs[this.getFixedLeftBodyDivId()]):"#___")},getFixedLeftBodyDivId:function(){return"n-table-scrolled-left-body"},getFixedRightBodyComponent:function(){return b(this.refs[this.getFixedRightBodyDivId()]?d.findDOMNode(this.refs[this.getFixedRightBodyDivId()]):"#___")},getFixedRightBodyDivId:function(){return"n-table-scrolled-right-body"},clearColumnsDefinition:function(){this.state.columns=null,this.forceUpdate()}}));e.Components.NTable=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Table,function(a,b,d,f){return c.createElement(e.Components.NTable,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NText",statics:{NUMBER_FORMAT:function(a){for(var b=(a+"").split("."),c=b[0],d=b.length>1?"."+b[1]:"",e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return c+d},PERCENTAGE:{model:function(a){return isNaN(a)?a:(a+"").movePointLeft(2)},view:function(a){return isNaN(a)?a:(a+"").movePointRight(2)}}},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{}}},getInitialState:function(){return{}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.getComponent().off("change",this.onComponentChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,c){var e=this.getValueFromModel();b(d.findDOMNode(this.refs.focusLine)).hasClass("focus")||(e=this.getFormattedValue(e)),
this.getComponent().val()!=e&&this.getComponent().val(e),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.getComponent().on("change",this.onComponentChanged),this.registerToComponentCentral()},componentDidMount:function(){this.getComponent().val(this.getFormattedValue(this.getValueFromModel())),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.getComponent().on("change",this.onComponentChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.getComponent().off("change",this.onComponentChanged),this.unregisterFromComponentCentral()},renderLeftAddon:function(){return this.renderAddon(this.getComponentOption("leftAddon"))},renderText:function(){var a={"form-control":!0};return c.createElement("input",{type:this.getComponentOption("pwd",!1)?"password":"text",className:e.LayoutHelper.classSet(a),disabled:!this.isEnabled(),placeholder:this.getComponentOption("placeholder"),onKeyPress:this.onComponentChanged,onChange:this.onComponentChanged,onFocus:this.onComponentFocused,onBlur:this.onComponentBlurred,onKeyUp:this.onKeyUp,ref:"txt"})},renderRightAddon:function(){return this.renderAddon(this.getComponentOption("rightAddon"))},renderAddon:function(a){if(null==a)return null;var b={"input-group-addon":!0,link:null!=a.click,disabled:!this.isEnabled()},d={fa:!0,"fa-fw":!0},f=a.icon;null!=f&&(d["fa-"+f]=!0);var g=null==f?null:c.createElement("span",{className:e.LayoutHelper.classSet(d),key:"iconPart"}),h=a.text,i=a.iconFirst===!1?[h,g]:[g,h];return c.createElement("span",{className:e.LayoutHelper.classSet(b),onClick:this.onAddonClicked.bind(this,a.click)},i.map(function(a){return a}))},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"n-disabled":!this.isEnabled()};return a[this.getComponentCSS("n-text")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a)},c.createElement("div",{className:"input-group"},this.renderLeftAddon(),this.renderText(),this.renderRightAddon()),this.renderNormalLine(),this.renderFocusLine())},onComponentFocused:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus");var a=this.getValueFromModel();a!=this.getComponent().val()&&this.getComponent().val(a)},onComponentBlurred:function(a){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus");var c=a.target.value;if(c&&!c.isBlank()){var e=this.getFormattedValue(c);e!=c&&this.getComponent().val(e)}this.setValueToModel(c)},onComponentChanged:function(a){this.setValueToModel(a.target.value)},onModelChanged:function(a){this.forceUpdate()},onKeyUp:function(a){var b=this.getEventMonitor("keyUp");b&&b.call(this,a)},onAddonClicked:function(a){this.isAddonClickable(a)&&a.call(this,this.getModel(),this.getValueFromModel())},getComponent:function(){return b(d.findDOMNode(this.refs.txt))},isAddonClickable:function(a){return this.isEnabled()&&a},getTextFormat:function(){return this.getComponentOption("format")},getFormattedValue:function(a){if(a&&("number"==typeof a&&(a+=""),!a.isBlank())){var b=this.getTextFormat();if(b){var c=a;return c="currency"==b?a.currencyFormat():b.call(this,a)}}return a},getTextConvertor:function(){return this.getComponentOption("convertor")},getValueFromModel:function(){var a=this.getModel().get(this.getDataId()),b=this.getTextConvertor();return b?b.view.call(this,a):a},setValueToModel:function(a){var b=this.getTextConvertor();b?this.getModel().set(this.getDataId(),b.model.call(this,a)):this.getModel().set(this.getDataId(),a)}}));e.Components.NText=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Text,function(a,b,d,f){return c.createElement(e.Components.NText,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NTextArea",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{lines:1}}},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.getComponent().off("change",this.onComponentChanged),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.getComponent().val()!=this.getValueFromModel()&&this.getComponent().val(this.getValueFromModel()),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.getComponent().on("change",this.onComponentChanged),this.registerToComponentCentral()},componentDidMount:function(){this.getComponent().val(this.getValueFromModel()),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.getComponent().on("change",this.onComponentChanged),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.getComponent().off("change",this.onComponentChanged),this.unregisterFromComponentCentral()},renderText:function(){var a={"form-control":!0};return a["l"+this.getComponentOption("lines")]=!0,c.createElement("textarea",{className:e.LayoutHelper.classSet(a),disabled:!this.isEnabled(),placeholder:this.getComponentOption("placeholder"),onKeyPress:this.onComponentChanged,onChange:this.onComponentChanged,onFocus:this.onComponentFocused,onBlur:this.onComponentBlurred,ref:"txt"})},render:function(){if(this.isViewMode())return this.renderInViewMode();var a={"n-disabled":!this.isEnabled()};return a[this.getComponentCSS("n-textarea")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a)},this.renderText(),this.renderNormalLine(),this.renderFocusLine())},onComponentFocused:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentBlurred:function(){b(d.findDOMNode(this.refs.focusLine)).toggleClass("focus"),b(d.findDOMNode(this.refs.normalLine)).toggleClass("focus")},onComponentChanged:function(a){this.setValueToModel(a.target.value)},onModelChanged:function(a){this.forceUpdate()},onAddonClicked:function(a){a&&a.call(this,this.getModel(),this.getValueFromModel())},getComponent:function(){return b(d.findDOMNode(this.refs.txt))},getTextInViewMode:function(){var a=this.getValueFromModel();return null!=a&&(a=a.split(/\r|\n/)),a}}));e.Components.NTextArea=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.TextArea,function(a,b,d,f){return c.createElement(e.Components.NTextArea,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NToggle",propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},componentWillUpdate:function(a){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.getComponent().prop("checked",this.getValueFromModel()),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentDidMount:function(){this.getComponent().prop("checked",this.getValueFromModel()),this.addPostChangeListener(this.onModelChanged),this.addEnableDependencyMonitor(),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.onModelChanged),this.removeEnableDependencyMonitor(),this.unregisterFromComponentCentral()},renderLabel:function(a,b){var d={"toggle-label":!0,disabled:!this.isEnabled()};return d[b]=!0,c.createElement("span",{className:e.LayoutHelper.classSet(d)},a)},renderLeftLabel:function(){var a=this.getComponentOption("labelAttached");return a&&a.left?this.renderLabel(a.left,"toggle-label-left"):void 0},renderRightLabel:function(){var a=this.getComponentOption("labelAttached");return a&&a.right?this.renderLabel(a.right,"toggle-label-right"):void 0},renderToggleButton:function(){var a=this.isChecked(),b={disabled:!this.isEnabled(),checked:a,unchecked:!a,"toggle-container":!0};return c.createElement("div",{className:e.LayoutHelper.classSet(b)},c.createElement("span",{className:"n-toggle-line"}),c.createElement("span",{className:"n-toggle-true",tabIndex:"-1",onClick:this.onButtonClicked.bind(this,!0)}),c.createElement("span",{className:"n-toggle-false",tabIndex:"-1",onClick:this.onButtonClicked.bind(this,!1)}))},render:function(){var a={"n-disabled":!this.isEnabled(),"n-view-mode":this.isViewMode()};return a[this.getComponentCSS("n-toggle")]=!0,c.createElement("div",{className:e.LayoutHelper.classSet(a)},c.createElement("input",{type:"checkbox",style:{display:"none"},onChange:this.onComponentChanged,ref:"txt"}),this.renderLeftLabel(),this.renderToggleButton(),this.renderRightLabel())},onButtonClicked:function(a){this.isEnabled()&&!this.isViewMode()&&this.setValueToModel(a)},onComponentChanged:function(a){this.setValueToModel(a.target.checked)},onModelChanged:function(a){this.getComponent().prop("checked",a["new"]===!0),this.forceUpdate()},isChecked:function(){return this.getValueFromModel()===!0},getComponent:function(){return b(d.findDOMNode(this.refs.txt))}}));e.Components.NToggle=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Toggle,function(a,b,d,f){return c.createElement(e.Components.NToggle,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b,c,d,e){var f=c.createClass(e.defineCellComponent({displayName:"NTree",statics:{ROOT_LABEL:"Root",FOLDER_ICON:"folder-o",FOLDER_OPEN_ICON:"folder-open-o",FILE_ICON:"file-o",OP_FOLDER_LEAF_ICON:"angle-right",OP_FOLDER_ICON:"angle-double-right",OP_FOLDER_OPEN_ICON:"angle-double-down",OP_FILE_ICON:"",NODE_SEPARATOR:"|",ROOT_ID:"0",convertValueTreeToArray:function(a,b){var c=[],d=function(a,b){Object.keys(a).forEach(function(e){"selected"==e&&a[e]?b!=f.ROOT_ID?c.push(b):c.selected=a.selected?!0:void 0:d(a[e],e)})};return d(a,b),c}},propTypes:{model:c.PropTypes.object,layout:c.PropTypes.object},getDefaultProps:function(){return{defaultOptions:{root:!0,check:!1,inactiveSlibing:!0,opIconEnabled:!1,multiple:!0,valueAsArray:!1,hierarchyCheck:!1,expandLevel:1,border:!1,expandButton:{comp:{icon:"plus-square-o",style:"link"}},collapseButton:{comp:{icon:"minus-square-o",style:"link"}}}}},getInitialState:function(){var a=b.extend(!0,{},this.getComponentOption("expandButton"));a&&(a.comp.click||(a.comp.click=this.expandAll),a=e.createCellLayout("expand",a));var c=b.extend(!0,{},this.getComponentOption("collapseButton"));return c&&(c.comp.click||(c.comp.click=this.collapseAll),c=e.createCellLayout("collapse",c)),{activeNodes:{},root:{text:this.getRootLabel(),id:f.ROOT_ID},expandButton:a,collapseButton:c}},componentWillUpdate:function(a){this.removePostChangeListener(this.__forceUpdate),this.unregisterFromComponentCentral()},componentDidUpdate:function(a,b){this.addPostChangeListener(this.__forceUpdate),this.registerToComponentCentral()},componentWillMount:function(){var a=this.getComponentOption("expandLevel");null==a&&(a=0),"all"===a&&(a=9999);var b=this,c=function(d,e,f){if(a>f){var g=b.getNodeId(d,e);b.state.activeNodes[g]=e,e.children&&e.children.forEach(function(a){c(g,a,f+1)})}};this.state.root.children=this.getTopLevelNodes(),c(null,this.state.root,0)},componentDidMount:function(){this.addPostChangeListener(this.__forceUpdate),this.registerToComponentCentral()},componentWillUnmount:function(){this.removePostChangeListener(this.__forceUpdate),this.unregisterFromComponentCentral()},renderCheck:function(a,b){var d=this.isNodeCanSelect(a);if(!d)return null;var f=this.getValueFromModel();f=f?f:{};var g=e.createModel({selected:this.isNodeChecked(b)});g.useBaseAsCurrent();var h=e.createCellLayout("selected",{comp:{type:e.ComponentConstants.Check}});return g.addPostChangeListener("selected",this.onNodeCheckChanged.bind(this,a,b)),c.createElement(e.Components.NCheck,{model:g,layout:h,view:this.isViewMode()})},renderNode:function(a,b){var d=this.getNodeId(a,b),f=null;if(this.getComponentOption("opIconEnabled")){var g={iconClassName:"node-op-icon",fixWidth:!0,icon:this.getNodeOperationIcon(b,d)};f=c.createElement("a",{href:"javascript:void(0);",onClick:this.onNodeClicked.bind(this,b,d)},c.createElement(e.Components.NIcon,g))}var h={icon:this.getNodeIcon(b,d),fixWidth:!0,iconClassName:"node-icon"},i=c.createElement("a",{href:"javascript:void(0);",onClick:this.onNodeClicked.bind(this,b,d)},c.createElement(e.Components.NIcon,h)),j=this.isActive(d)?"active":null;return c.createElement("li",{className:j,key:d},f,i,this.renderCheck(b,d),c.createElement("a",{href:"javascript:void(0);",onClick:this.onNodeClicked.bind(this,b,d)},c.createElement("span",{className:"node-text"},this.getNodeText(b))),this.renderNodes(b,d))},renderNodes:function(a,b){var d=a.children;return d&&d.length>0?c.createElement("ul",{className:"nav"},d.map(this.renderNode.bind(this,b))):null},renderRoot:function(){return c.createElement("ul",{className:"nav"},this.renderNode(null,this.state.root))},renderTopLevel:function(){var a=this.state.root;return a.children=this.getTopLevelNodes(),this.isRootPaint()?this.renderRoot():this.renderNodes(a,this.getNodeId(null,a))},renderButtons:function(){var a=this.state.expandButton?c.createElement(e.Components.NFormButton,{model:this.getModel(),layout:this.state.expandButton}):null,b=this.state.collapseButton?c.createElement(e.Components.NFormButton,{model:this.getModel(),layout:this.state.collapseButton}):null;return a||b?c.createElement("span",{className:"buttons"},a,b):null},render:function(){var a={};this.getComponentOption("height")&&(a.height=this.getComponentOption("height")),this.getComponentOption("maxHeight")&&(a.maxHeight=this.getComponentOption("maxHeight"));var b=this.getComponentCSS("n-tree");return this.getComponentOption("border")&&(b+=" border"),c.createElement("div",{className:b,style:a},this.renderTopLevel(),this.renderButtons())},onNodeClicked:function(a,b){this.isLeaf(a)||(this.state.activeNodes[b]?this.collapseNode(a,b):this.expandNode(a,b));var c=this.getComponentOption("nodeClick");c&&c.call(this,a)},onNodeCheckChanged:function(a,b,c,d){var e=this.isHierarchyCheck(),f=this.getValueFromModel();this.isValueAsArray()?(f=f?f:[],e?(this.checkNodeHierarchy(a,b,c["new"],f),this.hierarchyCheckToAncestors(b,f)):this.checkNode(b,c["new"],f),this.getValueFromModel()!=f?this.setValueToModel(f):this.getModel().firePostChangeEvent(this.getDataId(),f,f)):(f||(f={}),e?(this.checkNodeHierarchy(a,b,c["new"],f),this.hierarchyCheckToAncestors(b,f)):this.checkNode(b,c["new"],f),this.getValueFromModel()!=f?this.setValueToModel(f):this.getModel().firePostChangeEvent(this.getDataId(),f,f))},isValueAsArray:function(){return this.getComponentOption("valueAsArray")},checkNode:function(a,b,c){if(this.isValueAsArray())if(this.isMultipleSelection()||(c.length=0),a==this.state.root.id)c.selected=b;else{var d=a.split(f.NODE_SEPARATOR),g=d[d.length-1],h=c.findIndex(function(a){return a==g});b&&-1==h?c.push(g):b||-1==h||c.splice(h,1)}else if(this.isMultipleSelection()||Object.keys(c).forEach(function(a){delete c[a]}),a==this.state.root.id)e.setValueIntoJSON(c,"selected",b);else{var i=a.split(f.NODE_SEPARATOR);e.setValueIntoJSON(c,i.slice(1).join(e.PROPERTY_SEPARATOR)+e.PROPERTY_SEPARATOR+"selected",b)}return c},checkNodeHierarchy:function(a,b,c,d){if(d=this.checkNode(b,c,d),a.children){var e=this;a.children.forEach(function(a){var f=e.getNodeId(b,a);e.checkNodeHierarchy(a,f,c,d)})}return d},isNodeChecked:function(a,b){if(b=b?b:this.getValueFromModel(),b=b?b:{},Array.isArray(b)){if(a==this.state.root.id)return b.selected;var c=a.split(f.NODE_SEPARATOR),d=c[c.length-1];return-1!=b.findIndex(function(a){return a==d})}return a==this.state.root.id?e.getValueFromJSON(b,"selected"):e.getValueFromJSON(b,a.split(f.NODE_SEPARATOR).slice(1).join(e.PROPERTY_SEPARATOR)+e.PROPERTY_SEPARATOR+"selected")},hierarchyCheckToAncestors:function(a,b){var c=this,d=function(a,e){if(a.children){var f=!1;return a.children.forEach(function(a){var b=d(a,c.getNodeId(e,a));b||(f=!0)}),c.checkNode(e,!f,b),!f}return c.isNodeChecked(e,b)};d(this.state.root,this.getNodeId(null,this.state.root))},expandAll:function(){var a=b.extend({},this.state.activeNodes),c=this.state.root,d=function(b,c){if(!this.isLeaf(b)){var e=this.getNodeId(c,b);a[e]=b;var f=this;b.children.forEach(function(a){d.call(f,a,e)})}};d.call(this,c,null);var e=this,f=null;this.setState(function(b,c){return f=b.activeNodes,{activeNodes:a}},function(){e.notifyEvent({type:"expand",before:f,after:a})})},collapseAll:function(){var a=this,c=this.state.root,d=null;if(this.isRootPaint())d=[this.getNodeId(null,c)];else{var e=this.getNodeId(null,c);c.children&&(d=c.children.map(function(b){return a.getNodeId(e,b)}))}var f=new RegExp(d.map(function(a){return"("+a+")"}).join("|")),g=b.extend({},this.state.activeNodes);Object.keys(g).forEach(function(a){a.match(f)&&delete g[a]});var h=null;this.setState(function(a,b){return h=a.activeNodes,{activeNodes:g}},function(){a.notifyEvent({type:"collapse",before:h,after:g})})},isRootPaint:function(){return this.getComponentOption("root")},getRootLabel:function(){var a=this.getComponentOption("root");return"string"==typeof a?a:f.ROOT_LABEL},isActive:function(a){return this.state.activeNodes[a]},isLeaf:function(a){return!a.children||0==a.children.length},isInactiveSlibingWhenActive:function(){return this.getComponentOption("inactiveSlibing")},collapseNode:function(a,c){var d=new RegExp(c),e=b.extend({},this.state.activeNodes);Object.keys(e).forEach(function(a){a.match(d)&&delete e[a]});var f=this,g=null;this.setState(function(a,b){return g=a.activeNodes,{activeNodes:e}},function(){f.notifyEvent({type:"collapse",before:g,after:e})})},expandNode:function(a,c){var d=b.extend({},this.state.activeNodes);if(this.isInactiveSlibingWhenActive()&&!this.isLeaf(a)){var e=c.lastIndexOf(f.NODE_SEPARATOR);if(e>0){var g=new RegExp(c.substring(0,e+1));Object.keys(d).forEach(function(a){a.match(g)&&delete d[a]})}else this.isRootPaint()||(d={})}d[c]=a;var h=this,i=null;this.setState(function(a,b){return i=a.activeNodes,{activeNodes:d}},function(){h.notifyEvent({type:"expand",before:i,after:d})})},getTopLevelNodes:function(){return this.getAvailableNodes().list()},getAvailableNodes:function(){return this.getComponentOption("data")},getNodeIcon:function(a,b){var c=this.isLeaf(a),d=!c||a.folder,e=this.isActive(b);return d?c?this.getCustomNodeIcon({node:a,active:e,folder:!0,leaf:!0},f.FOLDER_ICON):e?this.getCustomNodeIcon({node:a,active:!0,folder:!0,leaf:!1},f.FOLDER_OPEN_ICON):this.getCustomNodeIcon({node:a,active:!1,folder:!0,leaf:!1},f.FOLDER_ICON):this.getCustomNodeIcon({node:a,active:e,folder:!1,leaf:!0},f.FILE_ICON)},getNodeText:function(a){return a.text},getCustomNodeIcon:function(a,b){var c=this.getComponentOption("nodeIcon");return"function"==typeof c?c.call(this,a):c?c:b},getNodeOperationIcon:function(a,b){var c=this.isLeaf(a),d=!c||a.folder,e=this.isActive(b);return d?c?this.getCustomNodeOperationIcon({node:a,active:e,folder:!0,leaf:!0},f.OP_FOLDER_LEAF_ICON):e?this.getCustomNodeOperationIcon({node:a,active:!0,folder:!0,leaf:!1},f.OP_FOLDER_OPEN_ICON):this.getCustomNodeOperationIcon({node:a,active:!1,folder:!0,leaf:!1},f.OP_FOLDER_ICON):this.getCustomNodeOperationIcon({node:a,active:e,folder:!1,leaf:!0},f.OP_FILE_ICON)},getCustomNodeOperationIcon:function(a,b){var c=this.getComponentOption("opNodeIcon");return"function"==typeof c?c.call(this,a):c?c:b},isNodeCanSelect:function(a){var b=this.getComponentOption("check");return"function"==typeof b?b.call(this,a):b?b:!1},isMultipleSelection:function(){return this.getComponentOption("multiple")},isHierarchyCheck:function(){return this.getComponentOption("hierarchyCheck")&&this.isMultipleSelection()},getNodeId:function(a,b){var c=null;return c=a?a+f.NODE_SEPARATOR+b.id:""+b.id}}));e.Components.NTree=f,e.LayoutHelper.registerComponentRenderer(e.ComponentConstants.Tree,function(a,b,d,f){return c.createElement(e.Components.NTree,e.LayoutHelper.transformParameters(a,b,d,f))})}(window,jQuery,React,ReactDOM,$pt),function(a,b){("undefined"==typeof DONT_EXPOSE_PARROT_TO_GLOBAL||DONT_EXPOSE_PARROT_TO_GLOBAL!==!0)&&b.exposeComponents(a)}(window,$pt);
//# sourceMappingURL=nest-parrot.min.js.map